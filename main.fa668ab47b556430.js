"use strict";(self.webpackChunkSistemas_Interactivo=self.webpackChunkSistemas_Interactivo||[]).push([[179],{2011:(rt,De,k)=>{k.d(De,{Dh:()=>ce,GT:()=>pe,cc:()=>Ae,hO:()=>Ge,on:()=>B,pX:()=>J,xv:()=>ue});var d=k(5e3),K=k(127),O=k(5813);rt=k.hmd(rt);const oe=["ngOnDestroy"],J=(Ee,Ye,qe,be={})=>new Proxy(Ee,{get:(ye,ve)=>qe.runOutsideAngular(()=>{var $e;if(Ee[ve])return(null===($e=null==be?void 0:be.spy)||void 0===$e?void 0:$e.get)&&be.spy.get(ve,Ee[ve]),Ee[ve];if(oe.indexOf(ve)>-1)return()=>{};const Be=Ye.toPromise().then(ee=>{const q=ee&&ee[ve];return"function"==typeof q?q.bind(ee):q&&q.then?q.then(te=>qe.run(()=>te)):qe.run(()=>q)});return new Proxy(()=>{},{get:(ee,q)=>Be[q],apply:(ee,q,te)=>Be.then(ge=>{var ne;const Me=ge&&ge(...te);return(null===(ne=null==be?void 0:be.spy)||void 0===ne?void 0:ne.apply)&&be.spy.apply(ve,te,Me),Me})})})}),pe=(Ee,Ye)=>{Ye.forEach(qe=>{Object.getOwnPropertyNames(qe.prototype||qe).forEach(be=>{Object.defineProperty(Ee.prototype,be,Object.getOwnPropertyDescriptor(qe.prototype||qe,be))})})};class re{constructor(Ye){return Ye}}const ce=new d.OlP("angularfire2.app.options"),ue=new d.OlP("angularfire2.app.name");function B(Ee,Ye,qe){const ye="object"==typeof qe&&qe||{};ye.name=ye.name||"string"==typeof qe&&qe||"[DEFAULT]";const $e=K.Z.apps.filter(Be=>Be&&Be.name===ye.name)[0]||Ye.runOutsideAngular(()=>K.Z.initializeApp(Ee,ye));try{JSON.stringify(Ee)!==JSON.stringify($e.options)&&j("error",`${$e.name} Firebase App already initialized with different options${rt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new re($e)}const j=(Ee,...Ye)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[Ee](...Ye)},Q={provide:re,useFactory:B,deps:[ce,d.R0b,[new d.FiY,ue]]};let Ge=(()=>{class Ee{constructor(qe){K.Z.registerVersion("angularfire",O.q4.full,"core"),K.Z.registerVersion("angularfire",O.q4.full,"app-compat"),K.Z.registerVersion("angular",d.q4F.full,qe.toString())}static initializeApp(qe,be){return{ngModule:Ee,providers:[{provide:ce,useValue:qe},{provide:ue,useValue:be}]}}}return Ee.\u0275fac=function(qe){return new(qe||Ee)(d.LFG(d.Lbi))},Ee.\u0275mod=d.oAB({type:Ee}),Ee.\u0275inj=d.cJS({providers:[Q]}),Ee})();function Ae(Ee,Ye,qe,be,ye){const[,ve,$e]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===Ee)||[];if(ve)return function Ne(Ee,Ye){try{return Ee.toString()===Ye.toString()}catch(qe){return Ee===Ye}}(ye,$e)||(he("error",`${Ye} was already initialized on the ${qe} Firebase App with different settings.${ke?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:ye,was:$e})),ve;{const Be=be();return globalThis.\u0275AngularfireInstanceCache.push([Ee,Be,ye]),Be}}const ke=!!rt.hot,he=(Ee,...Ye)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[Ee](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(rt,De,k)=>{k.d(De,{q4:()=>Ml,iC:()=>kl,HU:()=>Eu,vb:()=>od,JM:()=>$s});var d=k(5e3),K=k(5867),O=k(5861),oe=k(9681),J=k(2090),pe=k(4859),re=k(1877);const ce="@firebase/installations",j="w:0.5.7",Q="FIS_v2",Ee=new J.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(b){return b instanceof J.ZR&&b.code.includes("request-failed")}function qe({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function be(b){return{token:b.token,requestStatus:2,expiresIn:te(b.expiresIn),creationTime:Date.now()}}function ye(b,C){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(b,C){const F=(yield C.json()).error;return Ee.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function $e({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function Be(b,{refreshToken:C}){const x=$e(b);return x.append("Authorization",function ge(b){return`${Q} ${b}`}(C)),x}function ee(b){return q.apply(this,arguments)}function q(){return(q=(0,O.Z)(function*(b){const C=yield b();return C.status>=500&&C.status<600?b():C})).apply(this,arguments)}function te(b){return Number(b.replace("s","000"))}function ne(b,C){return Me.apply(this,arguments)}function Me(){return(Me=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:C},{fid:x}){const F=qe(b),Z=$e(b),X=C.getImmediate({optional:!0});if(X){const yt=yield X.getHeartbeatsHeader();yt&&Z.append("x-firebase-client",yt)}const xe={method:"POST",headers:Z,body:JSON.stringify({fid:x,authVersion:Q,appId:b.appId,sdkVersion:j})},ze=yield ee(()=>fetch(F,xe));if(ze.ok){const yt=yield ze.json();return{fid:yt.fid||x,registrationStatus:2,refreshToken:yt.refreshToken,authToken:be(yt.authToken)}}throw yield ye("Create Installation",ze)})).apply(this,arguments)}function se(b){return new Promise(C=>{setTimeout(C,b)})}const Zt=/^[cdef][\w-]{21}$/;function it(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function ht(b){return function vt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Zt.test(x)?x:""}catch(b){return""}}function sn(b){return`${b.appName}!${b.appId}`}const on=new Map;function mi(b,C){const x=sn(b);zt(x,C),function Lt(b,C){const x=function Xr(){return!nr&&"BroadcastChannel"in self&&(nr=new BroadcastChannel("[Firebase] FID Change"),nr.onmessage=b=>{zt(b.data.key,b.data.fid)}),nr}();x&&x.postMessage({key:b,fid:C}),function Es(){0===on.size&&nr&&(nr.close(),nr=null)}()}(x,C)}function zt(b,C){const x=on.get(b);if(x)for(const F of x)F(C)}let nr=null;const Sr="firebase-installations-store";let Ki=null;function Yi(){return Ki||(Ki=(0,J.X3)("firebase-installations-database",1,(b,C)=>{0===C&&b.createObjectStore(Sr)})),Ki}function st(b,C){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,O.Z)(function*(b,C){const x=sn(b),Z=(yield Yi()).transaction(Sr,"readwrite"),X=Z.objectStore(Sr),Se=yield X.get(x);return yield X.put(C,x),yield Z.complete,(!Se||Se.fid!==C.fid)&&mi(b,C.fid),C})).apply(this,arguments)}function Yn(b){return jn.apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(b){const C=sn(b),F=(yield Yi()).transaction(Sr,"readwrite");yield F.objectStore(Sr).delete(C),yield F.complete})).apply(this,arguments)}function ei(b,C){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,O.Z)(function*(b,C){const x=sn(b),Z=(yield Yi()).transaction(Sr,"readwrite"),X=Z.objectStore(Sr),Se=yield X.get(x),xe=C(Se);return void 0===xe?yield X.delete(x):yield X.put(xe,x),yield Z.complete,xe&&(!Se||Se.fid!==xe.fid)&&mi(b,xe.fid),xe})).apply(this,arguments)}function dn(b){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,O.Z)(function*(b){let C;const x=yield ei(b.appConfig,F=>{const Z=ws(F),X=da(b,Z);return C=X.registrationPromise,X.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function ws(b){return Ft(b||{fid:it(),registrationStatus:0})}function da(b,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Ee.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function Vt(b,C){return et.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:mt(b)}:{installationEntry:C}}function et(){return(et=(0,O.Z)(function*(b,C){try{const x=yield ne(b,C);return st(b.appConfig,x)}catch(x){throw Ye(x)&&409===x.customData.serverCode?yield Yn(b.appConfig):yield st(b.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function mt(b){return rr.apply(this,arguments)}function rr(){return(rr=(0,O.Z)(function*(b){let C=yield Pi(b.appConfig);for(;1===C.registrationStatus;)yield se(100),C=yield Pi(b.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield dn(b);return F||x}return C})).apply(this,arguments)}function Pi(b){return ei(b,C=>{if(!C)throw Ee.create("installation-not-found");return Ft(C)})}function Ft(b){return function eo(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function fr(b,C){return ir.apply(this,arguments)}function ir(){return(ir=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:C},x){const F=ot(b,x),Z=Be(b,x),X=C.getImmediate({optional:!0});if(X){const yt=yield X.getHeartbeatsHeader();yt&&Z.append("x-firebase-client",yt)}const xe={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:j,appId:b.appId}})},ze=yield ee(()=>fetch(F,xe));if(ze.ok)return be(yield ze.json());throw yield ye("Generate Auth Token",ze)})).apply(this,arguments)}function ot(b,{fid:C}){return`${qe(b)}/${C}/authTokens:generate`}function pr(b){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,O.Z)(function*(b,C=!1){let x;const F=yield ei(b.appConfig,X=>{if(!Mt(X))throw Ee.create("not-registered");const Se=X.authToken;if(!C&&U(Se))return X;if(1===Se.requestStatus)return x=Ze(b,C),X;{if(!navigator.onLine)throw Ee.create("app-offline");const xe=$(X);return x=at(b,xe),xe}});return x?yield x:F.authToken})).apply(this,arguments)}function Ze(b,C){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,O.Z)(function*(b,C){let x=yield We(b.appConfig);for(;1===x.authToken.requestStatus;)yield se(100),x=yield We(b.appConfig);const F=x.authToken;return 0===F.requestStatus?pr(b,C):F})).apply(this,arguments)}function We(b){return ei(b,C=>{if(!Mt(C))throw Ee.create("not-registered");return function le(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function at(b,C){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,O.Z)(function*(b,C){try{const x=yield fr(b,C),F=Object.assign(Object.assign({},C),{authToken:x});return yield st(b.appConfig,F),x}catch(x){if(!Ye(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield st(b.appConfig,F)}else yield Yn(b.appConfig);throw x}})).apply(this,arguments)}function Mt(b){return void 0!==b&&2===b.registrationStatus}function U(b){return 2===b.requestStatus&&!function L(b){const C=Date.now();return C<b.creationTime||b.creationTime+b.expiresIn<C+36e5}(b)}function $(b){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:C})}function Le(){return(Le=(0,O.Z)(function*(b){const C=b,{installationEntry:x,registrationPromise:F}=yield dn(C);return F?F.catch(console.error):pr(C).catch(console.error),x.fid})).apply(this,arguments)}function Gt(){return(Gt=(0,O.Z)(function*(b,C=!1){const x=b;return yield gr(x),(yield pr(x,C)).token})).apply(this,arguments)}function gr(b){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,O.Z)(function*(b){const{registrationPromise:C}=yield dn(b);C&&(yield C)})).apply(this,arguments)}function $n(b){return Ee.create("missing-app-config-values",{valueName:b})}const fa="installations",Oe=b=>{const C=b.getProvider("app").getImmediate(),x=function Qi(b){if(!b||!b.options)throw $n("App Configuration");if(!b.name)throw $n("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!b.options[x])throw $n(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},St=b=>{const C=b.getProvider("app").getImmediate(),x=(0,oe._getProvider)(C,fa).getImmediate();return{getId:()=>function Y(b){return Le.apply(this,arguments)}(x),getToken:Z=>function ft(b){return Gt.apply(this,arguments)}(x,Z)}};(function un(){(0,oe._registerComponent)(new pe.wA(fa,Oe,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("installations-internal",St,"PRIVATE"))})(),(0,oe.registerVersion)(ce,"0.5.7"),(0,oe.registerVersion)(ce,"0.5.7","esm2017");const sr="@firebase/remote-config",Tn=new J.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Th{constructor(C,x,F,Z){this.client=C,this.storage=x,this.storageCache=F,this.logger=Z}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,Z=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Z}.`),Z}fetch(C){var x=this;return(0,O.Z)(function*(){const[F,Z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Z&&x.isCachedDataFresh(C.cacheMaxAgeMillis,F))return Z;C.eTag=Z&&Z.eTag;const X=yield x.client.fetch(C),Se=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&Se.push(x.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(Se),X})()}}function Vc(b=navigator){return b.languages&&b.languages[0]||b.language}class eu{constructor(C,x,F,Z,X,Se){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=F,this.projectId=Z,this.apiKey=X,this.appId=Se}fetch(C){var x=this;return(0,O.Z)(function*(){const[F,Z]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,xe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},ze={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:Z,app_id:x.appId,language_code:Vc()},yt={method:"POST",headers:xe,body:JSON.stringify(ze)},At=fetch(Se,yt),Et=new Promise((li,Di)=>{C.signal.addEventListener(()=>{const mo=new Error("The operation was aborted.");mo.name="AbortError",Di(mo)})});let Vn;try{yield Promise.race([At,Et]),Vn=yield At}catch(li){let Di="fetch-client-network";throw"AbortError"===li.name&&(Di="fetch-timeout"),Tn.create(Di,{originalErrorMessage:li.message})}let wn=Vn.status;const Qo=Vn.headers.get("ETag")||void 0;let go,Rr;if(200===Vn.status){let li;try{li=yield Vn.json()}catch(Di){throw Tn.create("fetch-client-parse",{originalErrorMessage:Di.message})}go=li.entries,Rr=li.state}if("INSTANCE_STATE_UNSPECIFIED"===Rr?wn=500:"NO_CHANGE"===Rr?wn=304:("NO_TEMPLATE"===Rr||"EMPTY_CONFIG"===Rr)&&(go={}),304!==wn&&200!==wn)throw Tn.create("fetch-status",{httpStatus:wn});return{status:wn,eTag:Qo,config:go}})()}}class Pp{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:F}){var Z=this;return(0,O.Z)(function*(){yield function kn(b,C){return new Promise((x,F)=>{const Z=Math.max(C-Date.now(),0),X=setTimeout(x,Z);b.addEventListener(()=>{clearTimeout(X),F(Tn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const X=yield Z.client.fetch(C);return yield Z.storage.deleteThrottleMetadata(),X}catch(X){if(!function Uc(b){if(!(b instanceof J.ZR&&b.customData))return!1;const C=Number(b.customData.httpStatus);return 429===C||500===C||503===C||504===C}(X))throw X;const Se={throttleEndTimeMillis:Date.now()+(0,J.$s)(F),backoffCount:F+1};return yield Z.storage.setThrottleMetadata(Se),Z.attemptFetch(C,Se)}})()}}class Bc{constructor(C,x,F,Z,X){this.app=C,this._client=x,this._storageCache=F,this._storage=Z,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function al(b,C){const x=b.target.error||void 0;return Tn.create(C,{originalErrorMessage:x&&x.message})}const Ts="app_namespace_store";class Vp{constructor(C,x,F,Z=function Lp(){return new Promise((b,C)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{C(al(F,"storage-open"))},x.onsuccess=F=>{b(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Ts,{keyPath:"compositeKey"})}}catch(x){C(Tn.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=C,this.appName=x,this.namespace=F,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,X)=>{const xe=F.transaction([Ts],"readonly").objectStore(Ts),ze=x.createCompositeKey(C);try{const yt=xe.get(ze);yt.onerror=At=>{X(al(At,"storage-get"))},yt.onsuccess=At=>{const Et=At.target.result;Z(Et?Et.value:void 0)}}catch(yt){X(Tn.create("storage-get",{originalErrorMessage:yt&&yt.message}))}})})()}set(C,x){var F=this;return(0,O.Z)(function*(){const Z=yield F.openDbPromise;return new Promise((X,Se)=>{const ze=Z.transaction([Ts],"readwrite").objectStore(Ts),yt=F.createCompositeKey(C);try{const At=ze.put({compositeKey:yt,value:x});At.onerror=Et=>{Se(al(Et,"storage-set"))},At.onsuccess=()=>{X()}}catch(At){Se(Tn.create("storage-set",{originalErrorMessage:At&&At.message}))}})})()}delete(C){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,X)=>{const xe=F.transaction([Ts],"readwrite").objectStore(Ts),ze=x.createCompositeKey(C);try{const yt=xe.delete(ze);yt.onerror=At=>{X(al(At,"storage-delete"))},yt.onsuccess=()=>{Z()}}catch(yt){X(Tn.create("storage-delete",{originalErrorMessage:yt&&yt.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class $c{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const x=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),Z=C.storage.getActiveConfig(),X=yield x;X&&(C.lastFetchStatus=X);const Se=yield F;Se&&(C.lastSuccessfulFetchTimestampMillis=Se);const xe=yield Z;xe&&(C.activeConfig=xe)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function ro(){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,O.Z)(function*(){if(!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(b){return!1}})).apply(this,arguments)}!function Fo(){(0,oe._registerComponent)(new pe.wA("remote-config",function b(C,{instanceIdentifier:x}){const F=C.getProvider("app").getImmediate(),Z=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Tn.create("registration-window");if(!(0,J.hl)())throw Tn.create("indexed-db-unavailable");const{projectId:X,apiKey:Se,appId:xe}=F.options;if(!X)throw Tn.create("registration-project-id");if(!Se)throw Tn.create("registration-api-key");if(!xe)throw Tn.create("registration-app-id");const ze=new Vp(xe,F.name,x=x||"firebase"),yt=new $c(ze),At=new re.Yd(sr);At.logLevel=re.in.ERROR;const Et=new eu(Z,oe.SDK_VERSION,x,X,Se,xe),Vn=new Pp(Et,ze),wn=new Th(Vn,ze,yt,At),Qo=new Bc(F,wn,yt,ze,At);return function or(b){const C=(0,J.m9)(b);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Qo),Qo},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(sr,"0.3.6"),(0,oe.registerVersion)(sr,"0.3.6","esm2017")}();const ul="/firebase-messaging-sw.js",As="/firebase-cloud-messaging-push-scope",jr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",io="google.c.a.c_id",ga="google.c.a.c_l",Hc="google.c.a.ts",Up="google.c.a.e";var Ss=(()=>{return(b=Ss||(Ss={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Ss;var b})();function ri(b){const C=new Uint8Array(b);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function nu(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),Z=new Uint8Array(F.length);for(let X=0;X<F.length;++X)Z[X]=F.charCodeAt(X);return Z}const ru="fcm_token_details_db",ar="fcm_token_object_Store";function Sh(b){return iu.apply(this,arguments)}function iu(){return iu=(0,O.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(ru))return null;let C=null;return(yield(0,J.X3)(ru,5,function(){var F=(0,O.Z)(function*(Z,X,Se,xe){var ze;if(X<2||!Z.objectStoreNames.contains(ar))return;const yt=xe.objectStore(ar),At=yield yt.index("fcmSenderId").get(b);if(yield yt.clear(),At)if(2===X){const Et=At;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;C={token:Et.fcmToken,createTime:null!==(ze=Et.createTime)&&void 0!==ze?ze:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:ri(Et.vapidKey)}}}else if(3===X){const Et=At;C={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:ri(Et.auth),p256dh:ri(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:ri(Et.vapidKey)}}}else if(4===X){const Et=At;C={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:ri(Et.auth),p256dh:ri(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:ri(Et.vapidKey)}}}});return function(Z,X,Se,xe){return F.apply(this,arguments)}}())).close(),yield(0,J.Lj)(ru),yield(0,J.Lj)("fcm_vapid_details_db"),yield(0,J.Lj)("undefined"),Gc(C)?C:null}),iu.apply(this,arguments)}function Gc(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:C}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const ts="firebase-messaging-store";let ma=null;function ll(){return ma||(ma=(0,J.X3)("firebase-messaging-database",1,(b,C)=>{0===C&&b.createObjectStore(ts)})),ma}function cn(b){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,O.Z)(function*(b){const C=oo(b),F=yield(yield ll()).transaction(ts).objectStore(ts).get(C);if(F)return F;{const Z=yield Sh(b.appConfig.senderId);if(Z)return yield xs(b,Z),Z}})).apply(this,arguments)}function xs(b,C){return nn.apply(this,arguments)}function nn(){return(nn=(0,O.Z)(function*(b,C){const x=oo(b),Z=(yield ll()).transaction(ts,"readwrite");return yield Z.objectStore(ts).put(C,x),yield Z.complete,C})).apply(this,arguments)}function qc(b){return so.apply(this,arguments)}function so(){return(so=(0,O.Z)(function*(b){const C=oo(b),F=(yield ll()).transaction(ts,"readwrite");yield F.objectStore(ts).delete(C),yield F.complete})).apply(this,arguments)}function oo({appConfig:b}){return b.appId}const Sn=new J.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ya(b,C){return _i.apply(this,arguments)}function _i(){return(_i=(0,O.Z)(function*(b,C){const x=yield Rs(b),F=ut(C),Z={method:"POST",headers:x,body:JSON.stringify(F)};let X;try{X=yield(yield fetch($r(b.appConfig),Z)).json()}catch(Se){throw Sn.create("token-subscribe-failed",{errorInfo:Se})}if(X.error)throw Sn.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw Sn.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function yr(b,C){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,O.Z)(function*(b,C){const x=yield Rs(b),F=ut(C.subscriptionOptions),Z={method:"PATCH",headers:x,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(`${$r(b.appConfig)}/${C.token}`,Z)).json()}catch(Se){throw Sn.create("token-update-failed",{errorInfo:Se})}if(X.error)throw Sn.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw Sn.create("token-update-no-token");return X.token})).apply(this,arguments)}function ns(b,C){return au.apply(this,arguments)}function au(){return(au=(0,O.Z)(function*(b,C){const F={method:"DELETE",headers:yield Rs(b)};try{const X=yield(yield fetch(`${$r(b.appConfig)}/${C}`,F)).json();if(X.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(Z){throw Sn.create("token-unsubscribe-failed",{errorInfo:Z})}})).apply(this,arguments)}function $r({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Rs(b){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,O.Z)(function*({appConfig:b,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function ut({p256dh:b,auth:C,endpoint:x,vapidKey:F}){const Z={web:{endpoint:x,auth:C,p256dh:b}};return F!==jr&&(Z.web.applicationPubKey=F),Z}const uu=6048e5;function _a(b){return lu.apply(this,arguments)}function lu(){return(lu=(0,O.Z)(function*(b){const C=yield hl(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:C.endpoint,auth:ri(C.getKey("auth")),p256dh:ri(C.getKey("p256dh"))},F=yield cn(b.firebaseDependencies);if(F){if(Bo(F.subscriptionOptions,x))return Date.now()>=F.createTime+uu?cl(b,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield ns(b.firebaseDependencies,F.token)}catch(Z){console.warn(Z)}return we(b.firebaseDependencies,x)}return we(b.firebaseDependencies,x)})).apply(this,arguments)}function cu(b){return du.apply(this,arguments)}function du(){return(du=(0,O.Z)(function*(b){const C=yield cn(b.firebaseDependencies);C&&(yield ns(b.firebaseDependencies,C.token),yield qc(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function cl(b,C){return dl.apply(this,arguments)}function dl(){return(dl=(0,O.Z)(function*(b,C){try{const x=yield yr(b.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield xs(b.firebaseDependencies,F),x}catch(x){throw yield cu(b),x}})).apply(this,arguments)}function we(b,C){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,O.Z)(function*(b,C){const F={token:yield ya(b,C),createTime:Date.now(),subscriptionOptions:C};return yield xs(b,F),F.token})).apply(this,arguments)}function hl(b,C){return hn.apply(this,arguments)}function hn(){return(hn=(0,O.Z)(function*(b,C){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:nu(C)})})).apply(this,arguments)}function Bo(b,C){return C.vapidKey===b.vapidKey&&C.endpoint===b.endpoint&&C.auth===b.auth&&C.p256dh===b.p256dh}function jo(b){const C={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Hr(b,C){if(!C.notification)return;b.notification={};const x=C.notification.title;x&&(b.notification.title=x);const F=C.notification.body;F&&(b.notification.body=F);const Z=C.notification.image;Z&&(b.notification.image=Z)}(C,b),function fl(b,C){!C.data||(b.data=C.data)}(C,b),function pl(b,C){if(!C.fcmOptions)return;b.fcmOptions={};const x=C.fcmOptions.link;x&&(b.fcmOptions.link=x);const F=C.fcmOptions.analytics_label;F&&(b.fcmOptions.analyticsLabel=F)}(C,b),C}function Zc(b){return"object"==typeof b&&!!b&&io in b}function gl(b,C){const x=[];for(let F=0;F<b.length;F++)x.push(b.charAt(F)),F<C.length&&x.push(C.charAt(F));return x.join("")}function Os(b){return Sn.create("missing-app-config-values",{valueName:b})}gl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),gl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ur{constructor(C,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function hu(b){if(!b||!b.options)throw Os("App Configuration Object");if(!b.name)throw Os("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const F of C)if(!x[F])throw Os(F);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Z,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ii(b){return fu.apply(this,arguments)}function fu(){return(fu=(0,O.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(ul,{scope:As}),b.swRegistration.update().catch(()=>{})}catch(C){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function Ps(b,C){return vi.apply(this,arguments)}function vi(){return(vi=(0,O.Z)(function*(b,C){if(!C&&!b.swRegistration&&(yield ii(b)),C||!b.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");b.swRegistration=C}})).apply(this,arguments)}function ml(b,C){return pu.apply(this,arguments)}function pu(){return(pu=(0,O.Z)(function*(b,C){C?b.vapidKey=C:b.vapidKey||(b.vapidKey=jr)})).apply(this,arguments)}function yl(){return(yl=(0,O.Z)(function*(b,C){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield ml(b,null==C?void 0:C.vapidKey),yield Ps(b,null==C?void 0:C.serviceWorkerRegistration),_a(b)})).apply(this,arguments)}function va(b,C,x){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,O.Z)(function*(b,C,x){const F=_l(C);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[io],message_name:x[ga],message_time:x[Hc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function _l(b){switch(b){case Ss.NOTIFICATION_CLICKED:return"notification_open";case Ss.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function zc(){return(zc=(0,O.Z)(function*(b,C){const x=C.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===Ss.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(jo(x)):b.onMessageHandler.next(jo(x)));const F=x.data;Zc(F)&&"1"===F[Up]&&(yield va(b,x.messageType,F))})).apply(this,arguments)}const El="@firebase/messaging",Wc=b=>{const C=new ur(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function vl(b,C){return zc.apply(this,arguments)}(C,x)),C},uo=b=>{const C=b.getProvider("messaging").getImmediate();return{getToken:F=>function gu(b,C){return yl.apply(this,arguments)}(C,F)}};function Yc(){return lo.apply(this,arguments)}function lo(){return(lo=(0,O.Z)(function*(){try{yield(0,J.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Kc(){(0,oe._registerComponent)(new pe.wA("messaging",Wc,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("messaging-internal",uo,"PRIVATE")),(0,oe.registerVersion)(El,"0.9.11"),(0,oe.registerVersion)(El,"0.9.11","esm2017")}();const Il="analytics",oy="firebase_id",wa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mu="https://www.googletagmanager.com/gtag/js",Fn=new re.Yd("@firebase/analytics");function Qc(b){return Promise.all(b.map(C=>C.catch(x=>x)))}function Bp(b,C){const x=document.createElement("script");x.src=`${mu}?l=${b}&id=${C}`,x.async=!0,document.head.appendChild(x)}function $o(b,C,x,F,Z,X){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,O.Z)(function*(b,C,x,F,Z,X){const Se=F[Z];try{if(Se)yield C[Se];else{const ze=(yield Qc(x)).find(yt=>yt.measurementId===Z);ze&&(yield C[ze.appId])}}catch(xe){Fn.error(xe)}b("config",Z,X)})).apply(this,arguments)}function Cl(b,C,x,F,Z){return co.apply(this,arguments)}function co(){return(co=(0,O.Z)(function*(b,C,x,F,Z){try{let X=[];if(Z&&Z.send_to){let Se=Z.send_to;Array.isArray(Se)||(Se=[Se]);const xe=yield Qc(x);for(const ze of Se){const yt=xe.find(Et=>Et.measurementId===ze),At=yt&&C[yt.appId];if(!At){X=[];break}X.push(At)}}0===X.length&&(X=Object.values(C)),yield Promise.all(X),b("event",F,Z||{})}catch(X){Fn.error(X)}})).apply(this,arguments)}function jp(){const b=window.document.getElementsByTagName("script");for(const C of Object.values(b))if(C.src&&C.src.includes(mu))return C;return null}const Mn=new J.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),qr=new class Gr{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Ho(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function ed(b){return ln.apply(this,arguments)}function ln(){return(ln=(0,O.Z)(function*(b){var C;const{appId:x,apiKey:F}=b,Z={method:"GET",headers:Ho(F)},X=wa.replace("{app-id}",x),Se=yield fetch(X,Z);if(200!==Se.status&&304!==Se.status){let xe="";try{const ze=yield Se.json();(null===(C=ze.error)||void 0===C?void 0:C.message)&&(xe=ze.error.message)}catch(ze){}throw Mn.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:xe})}return Se.json()})).apply(this,arguments)}function Rh(b){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,O.Z)(function*(b,C=qr,x){const{appId:F,apiKey:Z,measurementId:X}=b.options;if(!F)throw Mn.create("no-app-id");if(!Z){if(X)return{measurementId:X,appId:F};throw Mn.create("no-api-key")}const Se=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},xe=new Dl;return setTimeout((0,O.Z)(function*(){xe.abort()}),void 0!==x?x:6e4),yu({appId:F,apiKey:Z,measurementId:X},Se,xe,C)})).apply(this,arguments)}function yu(b,C,x){return si.apply(this,arguments)}function si(){return(si=(0,O.Z)(function*(b,{throttleEndTimeMillis:C,backoffCount:x},F,Z=qr){const{appId:X,measurementId:Se}=b;try{yield Ot(F,C)}catch(xe){if(Se)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:X,measurementId:Se};throw xe}try{const xe=yield ed(b);return Z.deleteThrottleMetadata(X),xe}catch(xe){if(!td(xe)){if(Z.deleteThrottleMetadata(X),Se)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${xe.message}]`),{appId:X,measurementId:Se};throw xe}const ze=503===Number(xe.customData.httpStatus)?(0,J.$s)(x,Z.intervalMillis,30):(0,J.$s)(x,Z.intervalMillis),yt={throttleEndTimeMillis:Date.now()+ze,backoffCount:x+1};return Z.setThrottleMetadata(X,yt),Fn.debug(`Calling attemptFetch again in ${ze} millis`),yu(b,yt,F,Z)}})).apply(this,arguments)}function Ot(b,C){return new Promise((x,F)=>{const Z=Math.max(C-Date.now(),0),X=setTimeout(x,Z);b.addEventListener(()=>{clearTimeout(X),F(Mn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function td(b){if(!(b instanceof J.ZR&&b.customData))return!1;const C=Number(b.customData.httpStatus);return 429===C||500===C||503===C||504===C}class Dl{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function nd(){return ho.apply(this,arguments)}function ho(){return(ho=(0,O.Z)(function*(){if(!(0,J.hl)())return Fn.warn(Mn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,J.eu)()}catch(b){return Fn.warn(Mn.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function ss(){return(ss=(0,O.Z)(function*(b,C,x,F,Z,X,Se){var xe;const ze=Rh(b);ze.then(wn=>{x[wn.measurementId]=wn.appId,b.options.measurementId&&wn.measurementId!==b.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${wn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(wn=>Fn.error(wn)),C.push(ze);const yt=nd().then(wn=>{if(wn)return F.getId()}),[At,Et]=yield Promise.all([ze,yt]);jp()||Bp(X,At.measurementId),Z("js",new Date);const Vn=null!==(xe=null==Se?void 0:Se.config)&&void 0!==xe?xe:{};return Vn.origin="firebase",Vn.update=!0,null!=Et&&(Vn[oy]=Et),Z("config",At.measurementId,Vn),At.measurementId})).apply(this,arguments)}class Go{constructor(C){this.app=C}_delete(){return delete oi[this.app.options.appId],Promise.resolve()}}let oi={},Ls=[];const Ia={};let Vs,Li,Fi="dataLayer",Al=!1;function wi(b,C,x){!function qo(){const b=[];if((0,J.ru)()&&b.push("This is a browser extension environment."),(0,J.zI)()||b.push("Cookies are not available."),b.length>0){const C=b.map((F,Z)=>`(${Z+1}) ${F}`).join(" "),x=Mn.create("invalid-analytics-context",{errorInfo:C});Fn.warn(x.message)}}();const F=b.options.appId;if(!F)throw Mn.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Mn.create("no-api-key");Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=oi[F])throw Mn.create("already-exists",{id:F});if(!Al){!function is(b){let C=[];Array.isArray(window[b])?C=window[b]:window[b]=C}(Fi);const{wrappedGtag:X,gtagCore:Se}=function Mh(b,C,x,F,Z){let X=function(...Se){window[F].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(X=window[Z]),window[Z]=function Xc(b,C,x,F){function X(){return(X=(0,O.Z)(function*(Se,xe,ze){try{"event"===Se?yield Cl(b,C,x,xe,ze):"config"===Se?yield $o(b,C,x,F,xe,ze):b("set",xe)}catch(yt){Fn.error(yt)}})).apply(this,arguments)}return function Z(Se,xe,ze){return X.apply(this,arguments)}}(X,b,C,x),{gtagCore:X,wrappedGtag:window[Z]}}(oi,Ls,Ia,Fi,"gtag");Li=X,Vs=Se,Al=!0}return oi[F]=function Ln(b,C,x,F,Z,X,Se){return ss.apply(this,arguments)}(b,Ls,Ia,C,Vs,Fi,x),new Go(b)}function ba(){return(ba=(0,O.Z)(function*(b,C,x,F,Z){if(Z&&Z.global)b("event",x,F);else{const X=yield C;b("event",x,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function vn(){return Us.apply(this,arguments)}function Us(){return(Us=(0,O.Z)(function*(){if((0,J.ru)()||!(0,J.zI)()||!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(b){return!1}})).apply(this,arguments)}const Bs="@firebase/analytics";!function qp(){(0,oe._registerComponent)(new pe.wA(Il,(C,{options:x})=>wi(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new pe.wA("analytics-internal",function b(C){try{const x=C.getProvider(Il).getImmediate();return{logEvent:(F,Z,X)=>function Gp(b,C,x,F){b=(0,J.m9)(b),function Zo(b,C,x,F,Z){return ba.apply(this,arguments)}(Li,oi[b.app.options.appId],C,x,F).catch(Z=>Fn.error(Z))}(x,F,Z,X)}}catch(x){throw Mn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)(Bs,"0.7.7"),(0,oe.registerVersion)(Bs,"0.7.7","esm2017")}();var js=k(4408),_u=k(7565);const Sl=new class fn extends _u.v{}(class as extends js.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,x,F):C.flush(this)}});var Zp=k(4986),xl=k(8505),Er=k(9468),ai=k(5363);const Ml=new d.GfV("7.3.0"),us="__angularfire_symbol__analyticsIsSupportedValue",Ci="__angularfire_symbol__analyticsIsSupported",Ui="__angularfire_symbol__remoteConfigIsSupportedValue",Ca="__angularfire_symbol__remoteConfigIsSupported",Rl="__angularfire_symbol__messagingIsSupportedValue",Nl="__angularfire_symbol__messagingIsSupported";function $s(b,C,x){if(C){if(1===C.length)return C[0];const X=C.filter(Se=>Se.app===x);if(1===X.length)return X[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[Ci]||(globalThis[Ci]=vn().then(b=>globalThis[us]=b).catch(()=>globalThis[us]=!1)),globalThis[Nl]||(globalThis[Nl]=Yc().then(b=>globalThis[Rl]=b).catch(()=>globalThis[Rl]=!1)),globalThis[Ca]||(globalThis[Ca]=ro().then(b=>globalThis[Ui]=b).catch(()=>globalThis[Ui]=!1));const od=(b,C)=>{const x=C?[C]:(0,K.C6)(),F=[];return x.forEach(Z=>{Z.container.getProvider(b).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function fo(){}class vu{constructor(C,x=Sl){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,F){const Z=this.zone;return this.delegate.schedule(function(Se){Z.runGuarded(()=>{C.apply(this,[Se])})},x,F)}}class Bi{constructor(C){this.zone=C,this.task=null}call(C,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fo,{},fo,fo)),x.pipe((0,xl.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Eu=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new vu(Zone.current)),this.insideAngular=x.run(()=>new vu(Zone.current,Zp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(d.LFG(d.R0b))},b.\u0275prov=d.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function ji(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function kl(b){return ji(),function po(b){return function(x){return(x=x.lift(new Bi(b.ngZone))).pipe((0,Er.R)(b.outsideAngular),(0,ai.Q)(b.insideAngular))}}(ji())(b)}},2090:(rt,De,k)=>{k.d(De,{$s:()=>eo,BH:()=>Ae,G6:()=>ee,L:()=>ue,LL:()=>vt,Lj:()=>Pt,Mn:()=>$e,Sg:()=>Ne,UG:()=>Ee,US:()=>re,X3:()=>at,ZB:()=>Q,ZR:()=>se,b$:()=>be,d:()=>ye,eu:()=>te,hl:()=>q,jU:()=>Ye,m9:()=>ot,ne:()=>st,pd:()=>Ki,r3:()=>zt,ru:()=>qe,tV:()=>B,uI:()=>he,vZ:()=>Es,w1:()=>ve,xO:()=>Oi,xb:()=>nr,z$:()=>ke,zI:()=>ge,zd:()=>Sr});var d=k(5861);const J=function(U){const L=[];let $=0;for(let le=0;le<U.length;le++){let Y=U.charCodeAt(le);Y<128?L[$++]=Y:Y<2048?(L[$++]=Y>>6|192,L[$++]=63&Y|128):55296==(64512&Y)&&le+1<U.length&&56320==(64512&U.charCodeAt(le+1))?(Y=65536+((1023&Y)<<10)+(1023&U.charCodeAt(++le)),L[$++]=Y>>18|240,L[$++]=Y>>12&63|128,L[$++]=Y>>6&63|128,L[$++]=63&Y|128):(L[$++]=Y>>12|224,L[$++]=Y>>6&63|128,L[$++]=63&Y|128)}return L},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,le=[];for(let Y=0;Y<U.length;Y+=3){const Le=U[Y],ft=Y+1<U.length,Gt=ft?U[Y+1]:0,gr=Y+2<U.length,Ut=gr?U[Y+2]:0;let an=(15&Gt)<<2|Ut>>6,Jn=63&Ut;gr||(Jn=64,ft||(an=64)),le.push($[Le>>2],$[(3&Le)<<4|Gt>>4],$[an],$[Jn])}return le.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(J(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let $=0,le=0;for(;$<U.length;){const Y=U[$++];if(Y<128)L[le++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Le=U[$++];L[le++]=String.fromCharCode((31&Y)<<6|63&Le)}else if(Y>239&&Y<365){const gr=((7&Y)<<18|(63&U[$++])<<12|(63&U[$++])<<6|63&U[$++])-65536;L[le++]=String.fromCharCode(55296+(gr>>10)),L[le++]=String.fromCharCode(56320+(1023&gr))}else{const Le=U[$++],ft=U[$++];L[le++]=String.fromCharCode((15&Y)<<12|(63&Le)<<6|63&ft)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const $=L?this.charToByteMapWebSafe_:this.charToByteMap_,le=[];for(let Y=0;Y<U.length;){const Le=$[U.charAt(Y++)],Gt=Y<U.length?$[U.charAt(Y)]:0;++Y;const Ut=Y<U.length?$[U.charAt(Y)]:64;++Y;const Tt=Y<U.length?$[U.charAt(Y)]:64;if(++Y,null==Le||null==Gt||null==Ut||null==Tt)throw Error();le.push(Le<<2|Gt>>4),64!==Ut&&(le.push(Gt<<4&240|Ut>>2),64!==Tt&&le.push(Ut<<6&192|Tt))}return le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ue=function(U){return function(U){const L=J(U);return re.encodeByteArray(L,!0)}(U).replace(/\./g,"")},B=function(U){try{return re.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Q(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const $ in L)!L.hasOwnProperty($)||!Ge($)||(U[$]=Q(U[$],L[$]));return U}function Ge(U){return"__proto__"!==U}class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,$)=>{this.resolve=L,this.reject=$})}wrapCallback(L){return($,le)=>{$?this.reject($):this.resolve(le),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L($):L($,le))}}}function Ne(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const le=L||"demo-project",Y=U.iat||0,Le=U.sub||U.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ft=Object.assign({iss:`https://securetoken.google.com/${le}`,aud:le,iat:Y,exp:Y+3600,auth_time:Y,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(ft)),""].join(".")}function ke(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Ye(){return"object"==typeof self&&self.self===self}function qe(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function be(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ye(){return ke().indexOf("Electron/")>=0}function ve(){const U=ke();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function $e(){return ke().indexOf("MSAppHost/")>=0}function ee(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q(){return"object"==typeof indexedDB}function te(){return new Promise((U,L)=>{try{let $=!0;const le="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(le);Y.onsuccess=()=>{Y.result.close(),$||self.indexedDB.deleteDatabase(le),U(!0)},Y.onupgradeneeded=()=>{$=!1},Y.onerror=()=>{var Le;L((null===(Le=Y.error)||void 0===Le?void 0:Le.message)||"")}}catch($){L($)}})}function ge(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class se extends Error{constructor(L,$,le){super($),this.code=L,this.customData=le,this.name="FirebaseError",Object.setPrototypeOf(this,se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vt.prototype.create)}}class vt{constructor(L,$,le){this.service=L,this.serviceName=$,this.errors=le}create(L,...$){const le=$[0]||{},Y=`${this.service}/${L}`,Le=this.errors[L],ft=Le?function Zt(U,L){return U.replace(Dn,($,le)=>{const Y=L[le];return null!=Y?String(Y):`<${le}?>`})}(Le,le):"Error";return new se(Y,`${this.serviceName}: ${ft} (${Y}).`,le)}}const Dn=/\{\$([^}]+)}/g;function zt(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function nr(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function Es(U,L){if(U===L)return!0;const $=Object.keys(U),le=Object.keys(L);for(const Y of $){if(!le.includes(Y))return!1;const Le=U[Y],ft=L[Y];if(Ar(Le)&&Ar(ft)){if(!Es(Le,ft))return!1}else if(Le!==ft)return!1}for(const Y of le)if(!$.includes(Y))return!1;return!0}function Ar(U){return null!==U&&"object"==typeof U}function Oi(U){const L=[];for(const[$,le]of Object.entries(U))Array.isArray(le)?le.forEach(Y=>{L.push(encodeURIComponent($)+"="+encodeURIComponent(Y))}):L.push(encodeURIComponent($)+"="+encodeURIComponent(le));return L.length?"&"+L.join("&"):""}function Sr(U){const L={};return U.replace(/^\?/,"").split("&").forEach(le=>{if(le){const[Y,Le]=le.split("=");L[decodeURIComponent(Y)]=decodeURIComponent(Le)}}),L}function Ki(U){const L=U.indexOf("?");if(!L)return"";const $=U.indexOf("#",L);return U.substring(L,$>0?$:void 0)}function st(U,L){const $=new Ur(U,L);return $.subscribe.bind($)}class Ur{constructor(L,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{L(this)}).catch(le=>{this.error(le)})}next(L){this.forEachObserver($=>{$.next(L)})}error(L){this.forEachObserver($=>{$.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,$,le){let Y;if(void 0===L&&void 0===$&&void 0===le)throw new Error("Missing Observer.");Y=function jn(U,L){if("object"!=typeof U||null===U)return!1;for(const $ of L)if($ in U&&"function"==typeof U[$])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:$,complete:le},void 0===Y.next&&(Y.next=ei),void 0===Y.error&&(Y.error=ei),void 0===Y.complete&&(Y.complete=ei);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch(ft){}}),this.observers.push(Y),Le}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,L)}sendOne(L,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{$(this.observers[L])}catch(le){"undefined"!=typeof console&&console.error&&console.error(le)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ei(){}function eo(U,L=1e3,$=2){const le=L*Math.pow($,U),Y=Math.round(.5*le*(Math.random()-.5)*2);return Math.min(144e5,le+Y)}function ot(U){return U&&U._delegate?U._delegate:U}function pr(U,L){return new Promise(($,le)=>{U.onsuccess=Y=>{$(Y.target.result)},U.onerror=Y=>{var Le;le(`${L}: ${null===(Le=Y.target.error)||void 0===Le?void 0:Le.message}`)}})}class Nt{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,$){return new Ze(this._db.transaction.call(this._db,L,$))}createObjectStore(L,$){return new Ce(this._db.createObjectStore(L,$))}close(){this._db.close()}}class Ze{constructor(L){this._transaction=L,this.complete=new Promise(($,le)=>{this._transaction.oncomplete=function(){$()},this._transaction.onerror=()=>{le(this._transaction.error)},this._transaction.onabort=()=>{le(this._transaction.error)}})}objectStore(L){return new Ce(this._transaction.objectStore(L))}}class Ce{constructor(L){this._store=L}index(L){return new We(this._store.index(L))}createIndex(L,$,le){return new We(this._store.createIndex(L,$,le))}get(L){return pr(this._store.get(L),"Error reading from IndexedDB")}put(L,$){return pr(this._store.put(L,$),"Error writing to IndexedDB")}delete(L){return pr(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return pr(this._store.clear(),"Error clearing IndexedDB object store")}}class We{constructor(L){this._index=L}get(L){return pr(this._index.get(L),"Error reading from IndexedDB")}}function at(U,L,$){return new Promise((le,Y)=>{try{const Le=indexedDB.open(U,L);Le.onsuccess=ft=>{le(new Nt(ft.target.result))},Le.onerror=ft=>{var Gt;Y(`Error opening indexedDB: ${null===(Gt=ft.target.error)||void 0===Gt?void 0:Gt.message}`)},Le.onupgradeneeded=ft=>{$(new Nt(Le.result),ft.oldVersion,ft.newVersion,new Ze(Le.transaction))}}catch(Le){Y(`Error opening indexedDB: ${Le.message}`)}})}function Pt(U){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,d.Z)(function*(U){return new Promise((L,$)=>{try{const le=indexedDB.deleteDatabase(U);le.onsuccess=()=>{L()},le.onerror=Y=>{var Le;$(`Error deleting indexedDB database "${U}": ${null===(Le=Y.target.error)||void 0===Le?void 0:Le.message}`)}}catch(le){$(`Error deleting indexedDB database "${U}": ${le.message}`)}})})).apply(this,arguments)}},5116:(rt,De,k)=>{var d=k(5e3);let K=null;function O(){return K}const re=new d.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ue(){return(0,d.LFG)(j)}()},providedIn:"platform"}),n})();const B=new d.OlP("Location Initialized");let j=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(re))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ge(){return new j((0,d.LFG)(re))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ne(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ke(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ee(n){const e=(0,d.LFG)(re).location;return new qe((0,d.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ye=new d.OlP("appBaseHref");let qe=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ke(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const h=this.prepareExternalUrl(o+ke(u));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){const h=this.prepareExternalUrl(o+ke(u));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce),d.LFG(Ye,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),be=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let h=this.prepareExternalUrl(o+ke(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){let h=this.prepareExternalUrl(o+ke(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce),d.LFG(Ye,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ye=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ne(Be(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ke(r))}normalize(t){return n.stripTrailingSlash(function $e(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ke(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ke(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=ke,n.joinWithSlash=Ae,n.stripTrailingSlash=Ne,n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ve(){return new ye((0,d.LFG)(he),(0,d.LFG)(ce))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}class Cs{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let An=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,h)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Cs(o.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,h),Ji(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Ji(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ji(n,e){n.context.$implicit=e.item}let or=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new tn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Qa("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Qa("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class tn{constructor(){this.$implicit=null,this.ngIf=null}}function Qa(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Vo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Ss="browser";function ar(n){return"server"===n}let su=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new ou((0,d.LFG)(re),window)}),n})();class ou{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ma(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const h=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ts(this.window.history)||ts(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ts(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class xs extends class Uo extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function J(n){K||(K=n)}(new xs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function qc(){return nn=nn||document.querySelector("base"),nn?nn.getAttribute("href"):null}();return null==t?null:function oo(n){so=so||document.createElement("a"),so.setAttribute("href",n);const e=so.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){nn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ko(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let so,nn=null;const mr=new d.OlP("TRANSITION_ID"),ya=[{provide:d.ip1,useFactory:function Sn(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[mr,re,d.zs3],multi:!0}];class _i{static init(){(0,d.VLi)(new _i)}addToWindow(e){d.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const o=d.dqk.getAllAngularTestabilities();let u=o.length,h=!1;const m=function(w){h=h||w,u--,0==u&&r(h)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let yr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ms=new d.OlP("EventManagerPlugins");let ns=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const h=o[u];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ms),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class au{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let $r=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Rs=(()=>{class n extends $r{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const h=this._doc.createElement("style");h.textContent=u,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ns),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ns))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(re))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Ns(n){O().remove(n)}const ut={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},uu=/%COMP%/g;function we(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?we(n,o,t):(o=o.replace(uu,n),t.push(o))}return t}function Rt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let hn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Bo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new fl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case d.ifc.ShadowDom:return new pl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=we(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ns),d.LFG(Rs),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Bo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ut[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=ut[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ut[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,o&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Rt(r)):this.eventManager.addEventListener(e,t,Rt(r))}}class fl extends Bo{constructor(e,t,r,o){super(e),this.component=r;const u=we(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function cl(n){return"_ngcontent-%COMP%".replace(uu,n)}(o+"-"+r.id),this.hostAttr=function dl(n){return"_nghost-%COMP%".replace(uu,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class pl extends Bo{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=we(o.id,o.styles,[]);for(let h=0;h<u.length;h++){const m=document.createElement("style");m.textContent=u[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Zc=(()=>{class n extends au{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(re))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const gl=["alt","control","meta","shift"],Os={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ur={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ii={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let fu=(()=>{class n extends au{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),h=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let h="";if(gl.forEach(w=>{const D=r.indexOf(w);D>-1&&(r.splice(D,1),h+=w+".")}),h+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=h,m}static getEventFullKey(t){let r="",o=function Ps(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ur.hasOwnProperty(e)&&(e=ur[e]))}return Os[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),gl.forEach(u=>{u!=o&&ii[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(re))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const yl=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:Ss},{provide:d.g9A,useValue:function vi(){xs.makeCurrent(),_i.init()},multi:!0},{provide:re,useFactory:function pu(){return(0,d.RDi)(document),document},deps:[]}]),va=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function ml(){return new d.qLn},deps:[]},{provide:Ms,useClass:Zc,multi:!0,deps:[re,d.R0b,d.Lbi]},{provide:Ms,useClass:fu,multi:!0,deps:[re]},{provide:hn,useClass:hn,deps:[ns,Rs,d.AFp]},{provide:d.FYo,useExisting:hn},{provide:$r,useExisting:Rs},{provide:Rs,useClass:Rs,deps:[re]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:ns,useClass:ns,deps:[Ms,d.R0b]},{provide:class cn{},useClass:yr,deps:[]}];let Ea=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:mr,useExisting:d.AFp},ya]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:va,imports:[Vo,d.hGG]}),n})();"undefined"!=typeof window&&window;var xn=k(8996),Mn=k(7669);function pt(...n){const e=(0,Mn.yG)(n);return(0,xn.D)(n,e)}var lr=k(7579);class Gr extends lr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var qr=k(8306);const{isArray:Ho}=Array,{getPrototypeOf:ed,prototype:ln,keys:Rh}=Object;function Ei(n){if(1===n.length){const e=n[0];if(Ho(e))return{args:e,keys:null};if(function yu(n){return n&&"object"==typeof n&&ed(n)===ln}(e)){const t=Rh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var si=k(4671),Ot=k(4004);const{isArray:td}=Array;function nd(n){return(0,Ot.U)(e=>function Dl(n,e){return td(e)?n(...e):n(e)}(n,e))}function ho(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Ln=k(5403),ss=k(9672);function Ls(n,e,t){n?(0,ss.f)(t,n,e):e()}var Ia=k(576);function Fi(n,e){const t=(0,Ia.m)(n)?n:()=>n,r=o=>o.error(t());return new qr.y(e?o=>e.schedule(r,0,o):r)}const Vs=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Li=k(8189);function rd(...n){return function Al(){return(0,Li.J)(1)}()((0,xn.D)(n,(0,Mn.yG)(n)))}var qo=k(8421);function wi(n){return new qr.y(e=>{(0,qo.Xf)(n()).subscribe(e)})}var Zo=k(515),ba=k(727),Mr=k(4482);function Ii(){return(0,Mr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Ln.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class id extends qr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Mr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ba.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Ln.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ba.w0.EMPTY)}return e}refCount(){return Ii()(this)}}function Rn(n,e){return(0,Mr.e)((t,r)=>{let o=null,u=0,h=!1;const m=()=>h&&!o&&r.complete();t.subscribe((0,Ln.x)(r,w=>{null==o||o.unsubscribe();let D=0;const M=u++;(0,qo.Xf)(n(w,M)).subscribe(o=(0,Ln.x)(r,R=>r.next(e?e(w,R,M,D++):R),()=>{o=null,m()}))},()=>{h=!0,m()}))})}var zo=k(5698);function bi(...n){const e=(0,Mn.yG)(n);return(0,Mr.e)((t,r)=>{(e?rd(n,t,e):rd(n,t)).subscribe(r)})}function Wo(n,e,t,r,o){return(u,h)=>{let m=t,w=e,D=0;u.subscribe((0,Ln.x)(h,M=>{const R=D++;w=m?n(w,M,R):(m=!0,M),r&&h.next(w)},o&&(()=>{m&&h.next(w),h.complete()})))}}function vr(n,e){return(0,Mr.e)(Wo(n,e,arguments.length>=2,!0))}function os(n,e){return(0,Mr.e)((t,r)=>{let o=0;t.subscribe((0,Ln.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function Vi(n){return(0,Mr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Ln.x)(t,void 0,void 0,h=>{u=(0,qo.Xf)(n(h,Vi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var vn=k(5577);function Us(n,e){return(0,Ia.m)(e)?(0,vn.z)(n,e,1):(0,vn.z)(n,1)}function sd(n){return n<=0?()=>Zo.E:(0,Mr.e)((e,t)=>{let r=[];e.subscribe((0,Ln.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function En(n=$p){return(0,Mr.e)((e,t)=>{let r=!1;e.subscribe((0,Ln.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function $p(){return new Vs}function Hp(n){return(0,Mr.e)((e,t)=>{let r=!1;e.subscribe((0,Ln.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Bs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?os((o,u)=>n(o,u,r)):si.y,(0,zo.q)(1),t?Hp(e):En(()=>new Vs))}var Zr=k(8505);class js{constructor(e,t){this.id=e,this.url=t}}class as extends js{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _u extends js{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fn extends js{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Sl extends js{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ko extends js{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zp extends js{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xl extends js{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Er extends js{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ai extends js{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ml{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class us{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ci{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ui{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ca{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const xt="primary";class Ol{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Hn(n){return new Ol(n)}const Pl="ngNavigationCancelingError";function $s(n){const e=Error("NavigationCancelingError: "+n);return e[Pl]=!0,e}function fo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const h=r[u],m=n[u];if(h.startsWith(":"))o[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Bi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Eu(n[o],e[o]))return!1;return!0}function Eu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function ji(n){return Array.prototype.concat.apply([],n)}function ad(n){return n.length>0?n[n.length-1]:null}function Gn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ui(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,xn.D)(Promise.resolve(n)):pt(n)}const po={exact:function C(n,e,t){if(!At(n.segments,e.segments)||!X(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!C(n.children[r],e.children[r],t))return!1;return!0},subset:F},Yo={exact:function b(n,e){return Bi(n,e)},subset:function x(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Eu(n[t],e[t]))},ignored:()=>!0};function wu(n,e,t){return po[t.paths](n.root,e.root,t.matrixParams)&&Yo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function F(n,e,t){return Z(n,e,e.segments,t)}function Z(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!At(o,t)||e.hasChildren()||!X(o,t,r))}if(n.segments.length===t.length){if(!At(n.segments,t)||!X(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!F(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(At(n.segments,o)&&X(n.segments,o,r)&&n.children[xt])&&Z(n.children[xt],e,u,r)}}function X(n,e,t){return e.every((r,o)=>Yo[t](n[o].parameters,r.parameters))}class Se{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return Qo.serialize(this)}}class xe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Gn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return go(this)}}class ze{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Hn(this.parameters)),this._parameterMap}toString(){return Da(this)}}function At(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Vn{}class wn{parse(e){const t=new ld(e);return new Se(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Rr(e.root,!0)}`,r=function ay(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Di(t)}=${Di(o)}`).join("&"):`${Di(t)}=${Di(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function mo(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Qo=new wn;function go(n){return n.segments.map(e=>Da(e)).join("/")}function Rr(n,e){if(!n.hasChildren())return go(n);if(e){const t=n.children[xt]?Rr(n.children[xt],!1):"",r=[];return Gn(n.children,(o,u)=>{u!==xt&&r.push(`${u}:${Rr(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Et(n,e){let t=[];return Gn(n.children,(r,o)=>{o===xt&&(t=t.concat(e(r,o)))}),Gn(n.children,(r,o)=>{o!==xt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===xt?[Rr(n.children[xt],!1)]:[`${o}:${Rr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xt]?`${go(n)}/${t[0]}`:`${go(n)}/(${t.join("//")})`}}function li(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Di(n){return li(n).replace(/%3B/gi,";")}function ud(n){return li(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fl(n){return decodeURIComponent(n)}function Ll(n){return Fl(n.replace(/\+/g,"%20"))}function Da(n){return`${ud(n.path)}${function zp(n){return Object.keys(n).map(e=>`;${ud(e)}=${ud(n[e])}`).join("")}(n.parameters)}`}const uy=/^[^\/()?;=#]+/;function ls(n){const e=n.match(uy);return e?e[0]:""}const Vl=/^[^=?&#]+/,cy=/^[^&#]+/;class ld{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xt]=new xe(e,t)),r}parseSegment(){const e=ls(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ze(Fl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ls(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=ls(this.remaining);o&&(r=o,this.capture(r))}e[Fl(t)]=Fl(r)}parseQueryParam(e){const t=function ly(n){const e=n.match(Vl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function Wp(n){const e=n.match(cy);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=Ll(t),u=Ll(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ls(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=xt);const h=this.parseChildren();t[u]=1===Object.keys(h).length?h[xt]:new xe([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class dy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Nh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Nh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Oh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Oh(e,this._root).map(t=>t.value)}}function Nh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Nh(n,t);if(r)return r}return null}function Oh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Oh(n,t);if(r.length)return r.unshift(e),r}return[]}class yo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function _o(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class cd extends dy{constructor(e,t){super(e),this.snapshot=t,hd(this,e)}toString(){return this.snapshot.toString()}}function Ta(n,e){const t=function hy(n,e){const h=new Iu([],{},{},"",{},xt,e,null,n.root,-1,{});return new Ph("",new yo(h,[]))}(n,e),r=new Gr([new ze("",{})]),o=new Gr({}),u=new Gr({}),h=new Gr({}),m=new Gr(""),w=new cs(r,o,h,m,u,xt,e,t.root);return w.snapshot=t.root,new cd(new yo(w,[]),t)}class cs{constructor(e,t,r,o,u,h,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ot.U)(e=>Hn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ot.U)(e=>Hn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function fy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function dd(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Iu{constructor(e,t,r,o,u,h,m,w,D,M,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=m,this.routeConfig=w,this._urlSegment=D,this._lastPathIndex=M,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ph extends dy{constructor(e,t){super(t),this.url=e,hd(this,t)}toString(){return fd(this._root)}}function hd(n,e){e.value._routerState=n,e.children.forEach(t=>hd(n,t))}function fd(n){const e=n.children.length>0?` { ${n.children.map(fd).join(", ")} } `:"";return`${n.value}${e}`}function pd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Bi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Bi(e.params,t.params)||n.params.next(t.params),function vu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Bi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Bi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function kh(n,e){const t=Bi(n.params,e.params)&&function yt(n,e){return At(n,e)&&n.every((t,r)=>Bi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||kh(n.parent,e.parent))}function Ul(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Fh(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Ul(n,r,o);return Ul(n,r)})}(n,e,t);return new yo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const h=u.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(m=>Ul(n,m)),h}}const r=function gy(n){return new cs(new Gr(n.url),new Gr(n.params),new Gr(n.queryParams),new Gr(n.fragment),new Gr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Ul(n,u));return new yo(r,o)}}function Jo(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function bu(n){return"object"==typeof n&&null!=n&&n.outlets}function Kp(n,e,t,r,o){let u={};if(r&&Gn(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(D=>`${D}`):`${m}`}),n===e)return new Se(t,u,o);const h=Lh(n,e,t);return new Se(h,u,o)}function Lh(n,e,t){const r={};return Gn(n.children,(o,u)=>{r[u]=o===e?t:Lh(o,e,t)}),new xe(n.segments,r)}class my{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Jo(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(bu);if(o&&o!==ad(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Vh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ey(n,e,t){if(n||(n=new xe([],{})),0===n.segments.length&&n.hasChildren())return Gs(n,e,t);const r=function l0(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const h=n.segments[o],m=t[r];if(bu(m))break;const w=`${m}`,D=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&D&&"object"==typeof D&&void 0===D.outlets){if(!Ti(w,D,h))return u;r+=2}else{if(!Ti(w,{},h))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new xe(n.segments.slice(0,r.pathIndex),{});return u.children[xt]=new xe(n.segments.slice(r.pathIndex),n.children),Gs(u,0,o)}return r.match&&0===o.length?new xe(n.segments,{}):r.match&&!n.hasChildren()?Uh(n,e,t):r.match?Gs(n,0,o):Uh(n,e,t)}function Gs(n,e,t){if(0===t.length)return new xe(n.segments,{});{const r=function vy(n){return bu(n[0])?n[0].outlets:{[xt]:n}}(t),o={};return Gn(r,(u,h)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[h]=Ey(n.children[h],e,u))}),Gn(n.children,(u,h)=>{void 0===r[h]&&(o[h]=u)}),new xe(n.segments,o)}}function Uh(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(bu(u)){const w=Cu(u.outlets);return new xe(r,w)}if(0===o&&Jo(t[0])){r.push(new ze(n.segments[e].path,Bh(t[0]))),o++;continue}const h=bu(u)?u.outlets[xt]:`${u}`,m=o<t.length-1?t[o+1]:null;h&&m&&Jo(m)?(r.push(new ze(h,Bh(m))),o+=2):(r.push(new ze(h,{})),o++)}return new xe(r,{})}function Cu(n){const e={};return Gn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Uh(new xe([],{}),0,t))}),e}function Bh(n){const e={};return Gn(n,(t,r)=>e[r]=`${t}`),e}function Ti(n,e,t){return n==t.path&&Bi(e,t.parameters)}class Qp{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),pd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=_o(t);e.children.forEach(u=>{const h=u.value.outlet;this.deactivateRoutes(u,o[h],r),delete o[h]}),Gn(o,(u,h)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=_o(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);if(r&&r.outlet){const h=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=_o(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=_o(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Rl(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Ui(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(pd(o),o===u)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),pd(m.route.value),this.activateChildRoutes(e,null,h.children)}else{const m=function gd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=w,h.outlet&&h.outlet.activateWith(o,w),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class md{constructor(e,t){this.routes=e,this.module=t}}function Aa(n){return"function"==typeof n}function Du(n){return n instanceof Se}const jl=Symbol("INITIAL_VALUE");function Xo(){return Rn(n=>function Go(...n){const e=(0,Mn.yG)(n),t=(0,Mn.jO)(n),{args:r,keys:o}=Ei(n);if(0===r.length)return(0,xn.D)([],e);const u=new qr.y(function oi(n,e,t=si.y){return r=>{Ls(e,()=>{const{length:o}=n,u=new Array(o);let h=o,m=o;for(let w=0;w<o;w++)Ls(e,()=>{const D=(0,xn.D)(n[w],e);let M=!1;D.subscribe((0,Ln.x)(r,R=>{u[w]=R,M||(M=!0,m--),m||r.next(t(u.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,o?h=>ho(o,h):si.y));return t?u.pipe(nd(t)):u}(n.map(e=>e.pipe((0,zo.q)(1),bi(jl)))).pipe(vr((e,t)=>{let r=!1;return t.reduce((o,u,h)=>o!==jl?o:(u===jl&&(r=!0),r||!1!==u&&h!==t.length-1&&!Du(u)?o:u),e)},jl),os(e=>e!==jl),(0,Ot.U)(e=>Du(e)?e:!0===e),(0,zo.q)(1)))}class wy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new $l,this.attachRef=null}}class $l{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new wy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Hl=(()=>{class n{constructor(t,r,o,u,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=u||xt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new Gh(t,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36($l),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Gh{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===cs?this.route:e===$l?this.childContexts:this.parent.get(e,t)}}let qh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[Hl],encapsulation:2}),n})();function Gl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];yd(r,Zh(e,r))}}function yd(n,e){n.children&&Gl(n.children,e)}function Zh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function zh(n){const e=n.children&&n.children.map(zh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xt&&(t.component=qh),t}function Qt(n){return n.outlet||xt}function Wh(n,e){const t=n.filter(r=>Qt(r)===e);return t.push(...n.filter(r=>Qt(r)!==e)),t}const Xp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Tu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Xp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||fo)(t,n,e);if(!u)return Object.assign({},Xp);const h={};Gn(u.posParams,(w,D)=>{h[D]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},h),u.consumed[u.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function ql(n,e,t,r,o="corrected"){if(t.length>0&&function by(n,e,t){return t.some(r=>vd(n,e,r)&&Qt(r)!==xt)}(n,t,r)){const h=new xe(e,function _d(n,e,t,r){const o={};o[xt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Qt(u)!==xt){const h=new xe([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[Qt(u)]=h}return o}(n,e,r,new xe(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function eg(n,e,t){return t.some(r=>vd(n,e,r))}(n,t,r)){const h=new xe(n.segments,function Iy(n,e,t,r,o,u){const h={};for(const m of r)if(vd(n,t,m)&&!o[Qt(m)]){const w=new xe([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,h[Qt(m)]=w}return Object.assign(Object.assign({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const u=new xe(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function vd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Cy(n,e,t,r){return!!(Qt(n)===r||r!==xt&&vd(e,t,n))&&("**"===n.path||Tu(e,n,t).matched)}function Dy(n,e,t){return 0===e.length&&!n.children[t]}class ea{constructor(e){this.segmentGroup=e||null}}class wr{constructor(e){this.urlTree=e}}function vo(n){return Fi(new ea(n))}function Zl(n){return Fi(new wr(n))}class Yh{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=ql(this.urlTree.root,[],[],this.config).segmentGroup,t=new xe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,xt).pipe((0,Ot.U)(u=>this.createUrlTree(xa(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Vi(u=>{if(u instanceof wr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ea?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,xt).pipe((0,Ot.U)(o=>this.createUrlTree(xa(o),e.queryParams,e.fragment))).pipe(Vi(o=>{throw o instanceof ea?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new xe([],{[xt]:e}):e;return new Se(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ot.U)(u=>new xe([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,xn.D)(o).pipe(Us(u=>{const h=r.children[u],m=Wh(t,u);return this.expandSegmentGroup(e,m,h,u).pipe((0,Ot.U)(w=>({segment:w,outlet:u})))}),vr((u,h)=>(u[h.outlet]=h.segment,u),{}),function Gp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?os((o,u)=>n(o,u,r)):si.y,sd(1),t?Hp(e):En(()=>new Vs))}())}expandSegment(e,t,r,o,u,h){return(0,xn.D)(r).pipe(Us(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,h).pipe(Vi(D=>{if(D instanceof ea)return pt(null);throw D}))),Bs(m=>!!m),Vi((m,w)=>{if(m instanceof Vs||"EmptyError"===m.name)return Dy(t,o,u)?pt(new xe([],{})):vo(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,h,m){return Cy(o,t,u,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h):vo(t):vo(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Zl(u):this.lineralizeSegments(r,u).pipe((0,vn.z)(h=>{const m=new xe(h,{});return this.expandSegment(e,m,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){const{matched:m,consumedSegments:w,remainingSegments:D,positionalParamSegments:M}=Tu(t,o,u);if(!m)return vo(t);const R=this.applyRedirectCommands(w,o.redirectTo,M);return o.redirectTo.startsWith("/")?Zl(R):this.lineralizeSegments(o,R).pipe((0,vn.z)(H=>this.expandSegment(e,t,r,H.concat(D),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?pt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Ot.U)(R=>(r._loadedConfig=R,new xe(o,{})))):pt(new xe(o,{}));const{matched:h,consumedSegments:m,remainingSegments:w}=Tu(t,r,o);return h?this.getChildConfig(e,r,o).pipe((0,vn.z)(M=>{const R=M.module,H=M.routes,{segmentGroup:W,slicedSegments:fe}=ql(t,m,w,H),Fe=new xe(W.segments,W.children);if(0===fe.length&&Fe.hasChildren())return this.expandChildren(R,H,Fe).pipe((0,Ot.U)(mn=>new xe(m,mn)));if(0===H.length&&0===fe.length)return pt(new xe(m,{}));const tt=Qt(r)===u;return this.expandSegment(R,Fe,H,fe,tt?xt:u,!0).pipe((0,Ot.U)(dt=>new xe(m.concat(dt.segments),dt.children)))})):vo(t)}getChildConfig(e,t,r){return t.children?pt(new md(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?pt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,vn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Ot.U)(u=>(t._loadedConfig=u,u))):function Nr(n){return Fi($s(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):pt(new md([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?pt(o.map(h=>{const m=e.get(h);let w;if(function jh(n){return n&&Aa(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!Aa(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return ui(w)})).pipe(Xo(),(0,Zr.b)(h=>{if(!Du(h))return;const m=$s(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,Ot.U)(h=>!0===h)):pt(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return pt(r);if(o.numberOfChildren>1||!o.children[xt])return Fi(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Se(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Gn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let h={};return Gn(t.children,(m,w)=>{h[w]=this.createSegmentGroup(e,m,r,o)}),new xe(u,h)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function xa(n){const e={};for(const r of Object.keys(n.children)){const u=xa(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Ai(n){if(1===n.numberOfChildren&&n.children[xt]){const e=n.children[xt];return new xe(n.segments.concat(e.segments),e.children)}return n}(new xe(n.segments,e))}class tg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ma{constructor(e,t){this.component=e,this.route=t}}function Jh(n,e,t){const r=n._root;return ci(r,e?e._root:null,t,[r.value])}function zl(n,e,t){const r=function Ty(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function ci(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=_o(e);return n.children.forEach(h=>{(function rg(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,h=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(h&&u.routeConfig===h.routeConfig){const w=function Ay(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!At(n.url,e.url);case"pathParamsOrQueryParamsChange":return!At(n.url,e.url)||!Bi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kh(n,e)||!Bi(n.queryParams,e.queryParams);default:return!kh(n,e)}}(h,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new tg(r)):(u.data=h.data,u._resolvedData=h._resolvedData),ci(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Ma(m.outlet.component,h))}else h&&Ra(e,m,o),o.canActivateChecks.push(new tg(r)),ci(n,null,u.component?m?m.children:null:t,r,o)})(h,u[h.value.outlet],t,r.concat([h.value]),o),delete u[h.value.outlet]}),Gn(u,(h,m)=>Ra(h,t.getContext(m),o)),o}function Ra(n,e,t){const r=_o(n),o=n.value;Gn(r,(u,h)=>{Ra(u,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new Ma(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class tf{}function nf(n){return new qr.y(e=>e.error(n))}class rf{constructor(e,t,r,o,u,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h}recognize(){const e=ql(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,xt);if(null===t)return null;const r=new Iu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},xt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new yo(r,t),u=new Ph(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=fy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const h=t.children[u],m=Wh(e,u),w=this.processSegmentGroup(m,h,u);if(null===w)return null;r.push(...w)}const o=sg(r);return function Ry(n){n.sort((e,t)=>e.value.outlet===xt?-1:t.value.outlet===xt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const h=this.processSegmentAgainstRoute(u,t,r,o);if(null!==h)return h}return Dy(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Cy(e,t,r,o))return null;let u,h=[],m=[];if("**"===e.path){const W=r.length>0?ad(r).parameters:{};u=new Iu(r,W,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Qt(e),e.component,e,f(t),g(t)+r.length,A(e))}else{const W=Tu(t,e,r);if(!W.matched)return null;h=W.consumedSegments,m=W.remainingSegments,u=new Iu(h,W.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,v(e),Qt(e),e.component,e,f(t),g(t)+h.length,A(e))}const w=function Ny(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:D,slicedSegments:M}=ql(t,h,m,w.filter(W=>void 0===W.redirectTo),this.relativeLinkResolution);if(0===M.length&&D.hasChildren()){const W=this.processChildren(w,D);return null===W?null:[new yo(u,W)]}if(0===w.length&&0===M.length)return[new yo(u,[])];const R=Qt(e)===o,H=this.processSegment(w,D,M,R?xt:o);return null===H?null:[new yo(u,H)]}}function Oy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function sg(n){const e=[],t=new Set;for(const r of n){if(!Oy(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=sg(r.children);e.push(new yo(r.value,o))}return e.filter(r=>!t.has(r))}function f(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function g(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function v(n){return n.data||{}}function A(n){return n.resolve||{}}function Ke(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function nt(n){return Rn(e=>{const t=n(e);return t?(0,xn.D)(t).pipe((0,Ot.U)(()=>e)):pt(e)})}class Kl extends class Hi{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Au=new d.OlP("ROUTES");class Su{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Ot.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=u.create(e);return new md(ji(h.injector.get(Au,void 0,d.XFs.Self|d.XFs.Optional)).map(zh),h)}),Vi(u=>{throw t._loader$=void 0,u}));return t._loader$=new id(o,()=>new lr.x).pipe(Ii()),t._loader$}loadModuleFactory(e){return ui(e()).pipe((0,vn.z)(t=>t instanceof d.YKP?pt(t):(0,xn.D)(this.compiler.compileModuleAsync(t))))}}class Py{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ta(n){throw n}function Ed(n,e,t){return e.parse("/")}function wd(n,e){return pt(null)}const of={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Id={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let qn=(()=>{class n{constructor(t,r,o,u,h,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new lr.x,this.errorHandler=ta,this.malformedUriErrorHandler=Ed,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:wd,afterPreactivation:wd},this.urlHandlingStrategy=new Py,this.routeReuseStrategy=new Kl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(d.h0i),this.console=h.get(d.c2e);const R=h.get(d.R0b);this.isNgZoneEnabled=R instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function kl(){return new Se(new xe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Su(h,m,H=>this.triggerEvent(new Ml(H)),H=>this.triggerEvent(new us(H))),this.routerState=Ta(this.currentUrlTree,this.rootComponentType),this.transitions=new Gr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(os(o=>0!==o.id),(0,Ot.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Rn(o=>{let u=!1,h=!1;return pt(o).pipe((0,Zr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Rn(m=>{const w=this.browserUrlTree.toString(),D=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return og(m.source)&&(this.browserUrlTree=m.extractedUrl),pt(m).pipe(Rn(R=>{const H=this.transitions.getValue();return r.next(new as(R.id,this.serializeUrl(R.extractedUrl),R.source,R.restoredState)),H!==this.transitions.getValue()?Zo.E:Promise.resolve(R)}),function Qh(n,e,t,r){return Rn(o=>function Sa(n,e,t,r,o){return new Yh(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Ot.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Zr.b)(R=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:R.urlAfterRedirects})}),function N(n,e,t,r,o){return(0,vn.z)(u=>function My(n,e,t,r,o="emptyOnly",u="legacy"){try{const h=new rf(n,e,t,r,o,u).recognize();return null===h?nf(new tf):pt(h)}catch(h){return nf(h)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Ot.U)(h=>Object.assign(Object.assign({},u),{targetSnapshot:h}))))}(this.rootComponentType,this.config,R=>this.serializeUrl(R),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Zr.b)(R=>{if("eager"===this.urlUpdateStrategy){if(!R.extras.skipLocationChange){const W=this.urlHandlingStrategy.merge(R.urlAfterRedirects,R.rawUrl);this.setBrowserUrl(W,R)}this.browserUrlTree=R.urlAfterRedirects}const H=new Ko(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);r.next(H)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:W,source:fe,restoredState:Fe,extras:tt}=m,qt=new as(H,this.serializeUrl(W),fe,Fe);r.next(qt);const dt=Ta(W,this.rootComponentType).snapshot;return pt(Object.assign(Object.assign({},m),{targetSnapshot:dt,urlAfterRedirects:W,extras:Object.assign(Object.assign({},tt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Zo.E}),nt(m=>{const{targetSnapshot:w,id:D,extractedUrl:M,rawUrl:R,extras:{skipLocationChange:H,replaceUrl:W}}=m;return this.hooks.beforePreactivation(w,{navigationId:D,appliedUrlTree:M,rawUrlTree:R,skipLocationChange:!!H,replaceUrl:!!W})}),(0,Zr.b)(m=>{const w=new Zp(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,Ot.U)(m=>Object.assign(Object.assign({},m),{guards:Jh(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function Sy(n,e){return(0,vn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:h}}=t;return 0===h.length&&0===u.length?pt(Object.assign(Object.assign({},t),{guardsResult:!0})):function ig(n,e,t,r){return(0,xn.D)(n).pipe((0,vn.z)(o=>function Wl(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?pt(u.map(m=>{const w=zl(m,e,o);let D;if(function c0(n){return n&&Aa(n.canDeactivate)}(w))D=ui(w.canDeactivate(n,e,t,r));else{if(!Aa(w))throw new Error("Invalid CanDeactivate guard");D=ui(w(n,e,t,r))}return D.pipe(Bs())})).pipe(Xo()):pt(!0)}(o.component,o.route,t,e,r)),Bs(o=>!0!==o,!0))}(h,r,o,n).pipe((0,vn.z)(m=>m&&function Jp(n){return"boolean"==typeof n}(m)?function Ir(n,e,t,r){return(0,xn.D)(e).pipe(Us(o=>rd(function ef(n,e){return null!==n&&e&&e(new Ci(n)),pt(!0)}(o.route.parent,r),function Xh(n,e){return null!==n&&e&&e(new Ca(n)),pt(!0)}(o.route,r),function Eo(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(h=>function ng(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>wi(()=>pt(h.guards.map(w=>{const D=zl(w,h.node,t);let M;if(function Hh(n){return n&&Aa(n.canActivateChild)}(D))M=ui(D.canActivateChild(r,n));else{if(!Aa(D))throw new Error("Invalid CanActivateChild guard");M=ui(D(r,n))}return M.pipe(Bs())})).pipe(Xo())));return pt(u).pipe(Xo())}(n,o.path,t),function xy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return pt(!0);const o=r.map(u=>wi(()=>{const h=zl(u,e,t);let m;if(function $h(n){return n&&Aa(n.canActivate)}(h))m=ui(h.canActivate(e,n));else{if(!Aa(h))throw new Error("Invalid CanActivate guard");m=ui(h(e,n))}return m.pipe(Bs())}));return pt(o).pipe(Xo())}(n,o.route,t))),Bs(o=>!0!==o,!0))}(r,u,n,e):pt(m)),(0,Ot.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Zr.b)(m=>{if(Du(m.guardsResult)){const D=$s(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw D.url=m.guardsResult,D}const w=new xl(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),os(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),nt(m=>{if(m.guards.canActivateChecks.length)return pt(m).pipe((0,Zr.b)(w=>{const D=new Er(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}),Rn(w=>{let D=!1;return pt(w).pipe(function G(n,e){return(0,vn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return pt(t);let u=0;return(0,xn.D)(o).pipe(Us(h=>function ie(n,e,t,r){return function Ve(n,e,t,r){const o=Ke(n);if(0===o.length)return pt({});const u={};return(0,xn.D)(o).pipe((0,vn.z)(h=>function gt(n,e,t,r){const o=zl(n,e,r);return ui(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,Zr.b)(m=>{u[h]=m}))),sd(1),(0,vn.z)(()=>Ke(u).length===o.length?pt(u):Zo.E))}(n._resolve,n,e,r).pipe((0,Ot.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),fy(n,t).resolve),null)))}(h.route,r,n,e)),(0,Zr.b)(()=>u++),sd(1),(0,vn.z)(h=>u===o.length?pt(t):Zo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Zr.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Zr.b)(w=>{const D=new ai(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}))}),nt(m=>{const{targetSnapshot:w,id:D,extractedUrl:M,rawUrl:R,extras:{skipLocationChange:H,replaceUrl:W}}=m;return this.hooks.afterPreactivation(w,{navigationId:D,appliedUrlTree:M,rawUrlTree:R,skipLocationChange:!!H,replaceUrl:!!W})}),(0,Ot.U)(m=>{const w=function py(n,e,t){const r=Ul(n,e._root,t?t._root:void 0);return new cd(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,Zr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Ot.U)(r=>(new Qp(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Zr.b)({next(){u=!0},complete(){u=!0}}),function qp(n){return(0,Mr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||h||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),Vi(m=>{if(h=!0,function od(n){return n&&n[Pl]}(m)){const w=Du(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const D=new fn(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(D),w?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),R={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||og(o.source)};this.scheduleNavigation(M,"imperative",null,R,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new Sl(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(D){o.reject(D)}}return Zo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},h=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(h){const w=Object.assign({},h);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,h,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Gl(t),this.config=t.map(zh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:h,queryParamsHandling:m,preserveFragment:w}=r,D=o||this.routerState.root,M=w?this.currentUrlTree.fragment:h;let R=null;switch(m){case"merge":R=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":R=this.currentUrlTree.queryParams;break;default:R=u||null}return null!==R&&(R=this.removeEmptyProps(R)),function Hs(n,e,t,r,o){if(0===t.length)return Kp(e.root,e.root,e.root,r,o);const u=function yy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new my(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,h)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Gn(u.outlets,(w,D)=>{m[D]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===h?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new my(t,e,r)}(t);if(u.toRoot())return Kp(e.root,e.root,new xe([],{}),r,o);const h=function Yp(n,e,t){if(n.isAbsolute)return new Vh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Vh(u,u===e.root,0)}const r=Jo(n.commands[0])?0:1;return function _y(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Vh(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=h.processChildren?Gs(h.segmentGroup,h.index,u.commands):Ey(h.segmentGroup,h.index,u.commands);return Kp(e.root,h.segmentGroup,m,r,o)}(D,this.currentUrlTree,t,R,null!=M?M:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Du(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function af(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},of):!1===r?Object.assign({},Id):r,Du(t))return wu(this.currentUrlTree,t,o);const u=this.parseUrl(t);return wu(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new _u(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,h){var m,w;if(this.disposed)return Promise.resolve(!1);let D,M,R;h?(D=h.resolve,M=h.reject,R=h.promise):R=new Promise((fe,Fe)=>{D=fe,M=Fe});const H=++this.navigationId;let W;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),W=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):W=0,this.setTransition({id:H,targetPageId:W,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:D,reject:M,promise:R,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),R.catch(fe=>Promise.reject(fe))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new fn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function og(n){return"imperative"!==n}class Vy{}class h0{preload(e,t){return pt(null)}}let f0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new Su(o,r,w=>t.triggerEvent(new Ml(w)),w=>t.triggerEvent(new us(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(os(t=>t instanceof _u),Us(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const h=u._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,xn.D)(o).pipe((0,Li.J)(),(0,Ot.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?pt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,vn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qn),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(Vy))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ag=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof as?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof _u&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Nl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Nl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ds=new d.OlP("ROUTER_CONFIGURATION"),By=new d.OlP("ROUTER_FORROOT_GUARD"),p0=[ye,{provide:Vn,useClass:wn},{provide:qn,useFactory:function $y(n,e,t,r,o,u,h={},m,w){const D=new qn(null,n,e,t,r,o,ji(u));return m&&(D.urlHandlingStrategy=m),w&&(D.routeReuseStrategy=w),function y0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,D),h.enableTracing&&D.events.subscribe(M=>{var R,H;null===(R=console.group)||void 0===R||R.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(H=console.groupEnd)||void 0===H||H.call(console)}),D},deps:[Vn,$l,ye,d.zs3,d.Sil,Au,ds,[class sf{},new d.FiY],[class In{},new d.FiY]]},$l,{provide:cs,useFactory:function ug(n){return n.routerState.root},deps:[qn]},f0,h0,class Uy{preload(e,t){return t().pipe(Vi(()=>pt(null)))}},{provide:ds,useValue:{enableTracing:!1}}];function fb(){return new d.PXZ("Router",qn)}let uf=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[p0,jy(t),{provide:By,useFactory:m0,deps:[[qn,new d.FiY,new d.tp0]]},{provide:ds,useValue:r||{}},{provide:he,useFactory:g0,deps:[ce,[new d.tBr(Ye),new d.FiY],ds]},{provide:ag,useFactory:pb,deps:[qn,su,ds]},{provide:Vy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:h0},{provide:d.PXZ,multi:!0,useFactory:fb},[Cd,{provide:d.ip1,multi:!0,useFactory:_0,deps:[Cd]},{provide:Gy,useFactory:Hy,deps:[Cd]},{provide:d.tb,multi:!0,useExisting:Gy}]]}}static forChild(t){return{ngModule:n,providers:[jy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(By,8),d.LFG(qn,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function pb(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new ag(n,e,t)}function g0(n,e,t={}){return t.useHash?new be(n,e):new qe(n,e)}function m0(n){return"guarded"}function jy(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:Au,multi:!0,useValue:n}]}let Cd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new lr.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(qn),h=this.injector.get(ds);return"disabled"===h.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?pt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(ds),o=this.injector.get(f0),u=this.injector.get(ag),h=this.injector.get(qn),m=this.injector.get(d.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),u.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function _0(n){return n.appInitializer.bind(n)}function Hy(n){return n.bootstrapListener.bind(n)}const Gy=new d.OlP("Router Initializer");let gb=(()=>{class n{constructor(t){this.router=t,this.title="Sistemas_Interactivo"}goToPag(t){this.router.navigate(["EMat",t])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(qn))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[Hl],styles:[".extra1[_ngcontent-%COMP%]{margin-right:40px;margin-top:20px;float:right}.extra2[_ngcontent-%COMP%]{margin-left:40px;margin-top:20px}"]}),n})(),E0=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Yl=(()=>{class n extends E0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const wo=new d.OlP("NgValueAccessor"),UT={provide:wo,useExisting:(0,d.Gpc)(()=>Na),multi:!0},mb=new d.OlP("CompositionEventMode");let Na=(()=>{class n extends E0{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function w0(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(mb,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([UT]),d.qOj]}),n})();function xu(n){return null==n||0===n.length}const pn=new d.OlP("NgValidators"),Mu=new d.OlP("NgAsyncValidators");function T0(n){return xu(n.value)?{required:!0}:null}function lf(n){return null}function Ky(n){return null!=n}function Yy(n){const e=(0,d.QGY)(n)?(0,xn.D)(n):n;return(0,d.CqO)(e),e}function cf(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function qs(n,e){return e.map(t=>t(n))}function R0(n){return n.map(e=>function M0(n){return!n.validate}(e)?e:t=>e.validate(t))}function Io(n){return null!=n?function cg(n){if(!n)return null;const e=n.filter(Ky);return 0==e.length?null:function(t){return cf(qs(t,e))}}(R0(n)):null}function hg(n){return null!=n?function dg(n){if(!n)return null;const e=n.filter(Ky);return 0==e.length?null:function(t){return function v0(...n){const e=(0,Mn.jO)(n),{args:t,keys:r}=Ei(n),o=new qr.y(u=>{const{length:h}=t;if(!h)return void u.complete();const m=new Array(h);let w=h,D=h;for(let M=0;M<h;M++){let R=!1;(0,qo.Xf)(t[M]).subscribe((0,Ln.x)(u,H=>{R||(R=!0,D--),m[M]=H},()=>w--,void 0,()=>{(!w||!R)&&(D||u.next(r?ho(r,m):m),u.complete())}))}});return e?o.pipe(nd(e)):o}(qs(t,e).map(Yy)).pipe((0,Ot.U)(cf))}}(R0(n)):null}function fg(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yb(n){return n._rawValidators}function Qy(n){return n._rawAsyncValidators}function N0(n){return n?Array.isArray(n)?n:[n]:[]}function Ql(n,e){return Array.isArray(n)?n.includes(e):n===e}function df(n,e){const t=N0(e);return N0(n).forEach(o=>{Ql(t,o)||t.push(o)}),t}function pg(n,e){return N0(e).filter(t=>!Ql(n,t))}class gg{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Io(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=hg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class na extends gg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Gi extends gg{get formDirective(){return null}get path(){return null}}class O0{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let Dd=(()=>{class n extends O0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(na,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[d.qOj]}),n})(),Jl=(()=>{class n extends O0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Gi,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[d.qOj]}),n})();function Zs(n,e){hf(n,e),e.valueAccessor.writeValue(n.value),function Xy(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Oa(n,e)})}(n,e),function V0(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function vb(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Oa(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function L0(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Td(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ff(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function _g(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function hf(n,e){const t=yb(n);null!==e.validator?n.setValidators(fg(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Qy(n);null!==e.asyncValidator?n.setAsyncValidators(fg(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();_g(e._rawValidators,o),_g(e._rawAsyncValidators,o)}function ff(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=yb(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=Qy(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return _g(e._rawValidators,r),_g(e._rawAsyncValidators,r),t}function Oa(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ec(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Sd="VALID",gf="INVALID",Nu="PENDING",tc="DISABLED";function xd(n){return(mf(n)?n.validators:n)||null}function H0(n){return Array.isArray(n)?Io(n):n||null}function Eg(n,e){return(mf(e)?e.asyncValidators:n)||null}function Eb(n){return Array.isArray(n)?hg(n):n||null}function mf(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const wg=n=>n instanceof i_,Ig=n=>n instanceof s_,n_=n=>n instanceof wb;function G0(n){return wg(n)?n.value:n.getRawValue()}function q0(n,e){const t=Ig(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[e])throw new d.vHH(1001,"")}function qi(n,e){Ig(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new d.vHH(1002,"")})}class r_{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=H0(this._rawValidators),this._composedAsyncValidatorFn=Eb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Sd}get invalid(){return this.status===gf}get pending(){return this.status==Nu}get disabled(){return this.status===tc}get enabled(){return this.status!==tc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=H0(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Eb(e)}addValidators(e){this.setValidators(df(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(df(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(pg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(pg(e,this._rawAsyncValidators))}hasValidator(e){return Ql(this._rawValidators,e)}hasAsyncValidator(e){return Ql(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Nu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=tc,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Sd,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sd||this.status===Nu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?tc:Sd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Nu,this._hasOwnPendingAsyncValidator=!0;const t=Yy(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function $0(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Ig(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:n_(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?tc:this.errors?gf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Nu)?Nu:this._anyControlsHaveStatus(gf)?gf:Sd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class i_ extends r_{constructor(e=null,t,r){super(xd(t),Eg(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mf(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ec(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ec(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class s_ extends r_{constructor(e,t,r){super(xd(t),Eg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){qi(this,e),Object.keys(e).forEach(r=>{q0(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=G0(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class wb extends r_{constructor(e,t,r){super(xd(t),Eg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){qi(this,e),e.forEach((r,o)=>{q0(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>G0(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let nc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const J0={provide:wo,useExisting:(0,d.Gpc)(()=>Dg),multi:!0};let Dg=(()=>{class n extends Yl{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[d._Bn([J0]),d.qOj]}),n})(),eE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const a_=new d.OlP("NgModelWithFormControlWarning"),Tb={provide:Gi,useExisting:(0,d.Gpc)(()=>Ou)};let Ou=(()=>{class n extends Gi{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ff(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Zs(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Td(t.control||null,t,!1),ec(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function vg(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(Td(r||null,t),wg(o)&&(Zs(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function U0(n,e){hf(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function e_(n,e){return ff(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){hf(this.form,this),this._oldForm&&ff(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(pn,10),d.Y36(Mu,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([Tb]),d.qOj,d.TTD]}),n})();const rE={provide:na,useExisting:(0,d.Gpc)(()=>rc)};let rc=(()=>{class n extends na{constructor(t,r,o,u,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Ru(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Na?t=u:function Ad(n){return Object.getPrototypeOf(n.constructor)===Yl}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Xl(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Jy(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(Gi,13),d.Y36(pn,10),d.Y36(Mu,10),d.Y36(wo,10),d.Y36(a_,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([rE]),d.qOj,d.TTD]}),n})();function Rb(n){return"number"==typeof n?n:parseFloat(n)}let Pa=(()=>{class n{constructor(){this._validator=lf}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):lf,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const uE={provide:pn,useExisting:(0,d.Gpc)(()=>Md),multi:!0};let Md=(()=>{class n extends Pa{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>Rb(t),this.createValidator=t=>function D0(n){return e=>{if(xu(e.value)||xu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[d._Bn([uE]),d.qOj]}),n})();const vf={provide:pn,useExisting:(0,d.Gpc)(()=>Rg),multi:!0};let Rg=(()=>{class n extends Pa{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>Rb(t),this.createValidator=t=>function C0(n){return e=>{if(xu(e.value)||xu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[d._Bn([vf]),d.qOj]}),n})();const c_={provide:pn,useExisting:(0,d.Gpc)(()=>Ef),multi:!0};let Ef=(()=>{class n extends Pa{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function Mb(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>T0}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([c_]),d.qOj]}),n})(),pE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[eE]]}),n})(),Pb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[pE]}),n})(),gE=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:a_,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[pE]}),n})(),sc=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let m,u=null,h=null;return null!=r&&(function Co(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,h=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,h=null!=r.asyncValidator?r.asyncValidator:null)),new s_(o,{asyncValidators:h,updateOn:m,validators:u})}control(t,r,o){return new i_(t,r,o)}array(t,r,o){const u=t.map(h=>this._createControl(h));return new wb(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return wg(t)||Ig(t)||n_(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:gE}),n})();var mE=k(4986),Or=k(5813);function Og(){return(0,Mr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Ln.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function Lb(n,e){return n===e}var Je,Do=k(2011),yE=(k(4087),k(3942)),_e=k(5861),Pu=k(9681),Pg=k(4859),ku=k(1877),Bt=k(2090),iA="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},To={},kg=kg||{},It=iA||self;function h_(){}function hs(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Fg(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Lg="closure_uid_"+(1e9*Math.random()>>>0),_E=0;function vE(n,e,t){return n.call.apply(n.bind,arguments)}function Vb(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function di(n,e,t){return(di=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vE:Vb).apply(null,arguments)}function If(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function br(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return e.prototype[o].apply(r,h)}}function Fu(){this.s=this.s,this.o=this.o}var Ub={};Fu.prototype.s=!1,Fu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function sA(n){return Object.prototype.hasOwnProperty.call(n,Lg)&&n[Lg]||(n[Lg]=++_E)}(this);delete Ub[n]}},Fu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const EE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},wE=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function IE(n){return Array.prototype.concat.apply([],arguments)}function p_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function oc(n){return/^[\s\xa0]*$/.test(n)}var xi,ac=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Si(n,e){return-1!=n.indexOf(e)}function uc(n,e){return n<e?-1:n>e?1:0}e:{var bE=It.navigator;if(bE){var Vg=bE.userAgent;if(Vg){xi=Vg;break e}}xi=""}function zs(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Rd(n){const e={};for(const t in n)e[t]=n[t];return e}var zr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Lu(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<zr.length;u++)t=zr[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Nd(n){return Nd[" "](n),n}Nd[" "]=h_;var ka,n,g_=Si(xi,"Opera"),Ao=Si(xi,"Trident")||Si(xi,"MSIE"),lc=Si(xi,"Edge"),Vu=lc||Ao,cc=Si(xi,"Gecko")&&!(Si(xi.toLowerCase(),"webkit")&&!Si(xi,"Edge"))&&!(Si(xi,"Trident")||Si(xi,"MSIE"))&&!Si(xi,"Edge"),Od=Si(xi.toLowerCase(),"webkit")&&!Si(xi,"Edge");function dc(){var n=It.document;return n?n.documentMode:void 0}e:{var Uu="",Bu=(n=xi,cc?/rv:([^\);]+)(\)|;)/.exec(n):lc?/Edge\/([\d\.]+)/.exec(n):Ao?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Od?/WebKit\/(\S+)/.exec(n):g_?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Bu&&(Uu=Bu?Bu[1]:""),Ao){var Ug=dc();if(null!=Ug&&Ug>parseFloat(Uu)){ka=String(Ug);break e}}ka=Uu}var CE={};var TE=It.document&&Ao&&(dc()||parseInt(ka,10))||void 0,AE=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{It.addEventListener("test",h_,e),It.removeEventListener("test",h_,e)}catch(t){}return n}();function Wr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Pd(n,e){if(Wr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(cc){e:{try{Nd(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:jb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Pd.Z.h.call(this)}}Wr.prototype.h=function(){this.defaultPrevented=!0},br(Pd,Wr);var jb={2:"touch",3:"pen",4:"mouse"};Pd.prototype.h=function(){Pd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var kd="closure_listenable_"+(1e6*Math.random()|0),$b=0;function Hb(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++$b,this.ca=this.fa=!1}function bf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function jg(n){this.src=n,this.g={},this.h=0}function y_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=EE(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(bf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function $g(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}jg.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var h=$g(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new Hb(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var __="closure_lm_"+(1e6*Math.random()|0),Hg={};function SE(n,e,t,r,o){if(r&&r.once)return ME(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)SE(n,e[u],t,r,o);return null}return t=v_(t),n&&n[kd]?n.N(e,t,Fg(r)?!!r.capture:!!r,o):xE(n,e,t,!1,r,o)}function xE(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var h=Fg(o)?!!o.capture:!!o,m=NE(n);if(m||(n[__]=m=new jg(n)),(t=m.add(e,t,r,h,u)).proxy)return t;if(r=function oA(){var e=aA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)AE||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(RE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ME(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)ME(n,e[u],t,r,o);return null}return t=v_(t),n&&n[kd]?n.O(e,t,Fg(r)?!!r.capture:!!r,o):xE(n,e,t,!0,r,o)}function Gg(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Gg(n,e[u],t,r,o);else r=Fg(r)?!!r.capture:!!r,t=v_(t),n&&n[kd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=$g(u=n.g[e],t,r,o))&&(bf(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=NE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=$g(e,t,r,o)),(t=-1<n?e[n]:null)&&Cf(t))}function Cf(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[kd])y_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(RE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=NE(e))?(y_(t,n),0==t.h&&(t.src=null,e[__]=null)):bf(n)}}}function RE(n){return n in Hg?Hg[n]:Hg[n]="on"+n}function aA(n,e){if(n.ca)n=!0;else{e=new Pd(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Cf(n),n=t.call(r,e)}return n}function NE(n){return(n=n[__])instanceof jg?n:null}var OE="__closure_events_fn_"+(1e9*Math.random()>>>0);function v_(n){return"function"==typeof n?n:(n[OE]||(n[OE]=function(e){return n.handleEvent(e)}),n[OE])}function Cr(){Fu.call(this),this.i=new jg(this),this.P=this,this.I=null}function hi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Wr(e,n);else if(e instanceof Wr)e.target=e.target||n;else{var o=e;Lu(e=new Wr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var h=e.g=t[u];o=qg(h,r,!0,e)&&o}if(o=qg(h=e.g=n,r,!0,e)&&o,o=qg(h,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=qg(h=e.g=t[u],r,!1,e)&&o}function qg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var h=e[u];if(h&&!h.ca&&h.capture==t){var m=h.listener,w=h.ia||h.src;h.fa&&y_(n.i,h),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}br(Cr,Fu),Cr.prototype[kd]=!0,Cr.prototype.removeEventListener=function(n,e,t,r){Gg(this,n,e,t,r)},Cr.prototype.M=function(){if(Cr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)bf(t[r]);delete n.g[e],n.h--}}this.I=null},Cr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Cr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ju=It.JSON.stringify;function Gb(){var n=LE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var zg,kE=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new FE,n=>n.reset());class FE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Zg(n){It.setTimeout(()=>{throw n},0)}function E_(n,e){zg||function qb(){var n=It.Promise.resolve(void 0);zg=function(){n.then(Zb)}}(),w_||(zg(),w_=!0),LE.add(n,e)}var w_=!1,LE=new class PE{constructor(){this.h=this.g=null}add(e,t){const r=kE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Zb(){for(var n;n=Gb();){try{n.h.call(n.g)}catch(t){Zg(t)}var e=kE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}w_=!1}function Wg(n,e){Cr.call(this),this.h=n||1,this.g=e||It,this.j=di(this.kb,this),this.l=Date.now()}function Kg(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function I_(n,e,t){if("function"==typeof n)t&&(n=di(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=di(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function b_(n){n.g=I_(()=>{n.g=null,n.i&&(n.i=!1,b_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}br(Wg,Cr),(Je=Wg.prototype).da=!1,Je.S=null,Je.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),hi(this,"tick"),this.da&&(Kg(this),this.start()))}},Je.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Je.M=function(){Wg.Z.M.call(this),Kg(this),delete this.g};class VE extends Fu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:b_(this)}M(){super.M(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hc(n){Fu.call(this),this.h=n,this.g={}}br(hc,Fu);var zb=[];function Yg(n,e,t,r){Array.isArray(t)||(t&&(zb[0]=t.toString()),t=zb);for(var o=0;o<t.length;o++){var u=SE(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function UE(n){zs(n.g,function(e,t){this.g.hasOwnProperty(t)&&Cf(e)},n),n.g={}}function C_(){this.g=!0}function $u(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Wb(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var h=1;h<o.length;h++)o[h]=""}}}return ju(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}hc.prototype.M=function(){hc.Z.M.call(this),UE(this)},hc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},C_.prototype.Aa=function(){this.g=!1},C_.prototype.info=function(){};var ia={},Tf=null;function Fd(){return Tf=Tf||new Cr}function Kb(n){Wr.call(this,ia.Ma,n)}function Af(n){const e=Fd();hi(e,new Kb(e,n))}function Qg(n,e){Wr.call(this,ia.STAT_EVENT,n),this.stat=e}function Kr(n){const e=Fd();hi(e,new Qg(e,n))}function T_(n,e){Wr.call(this,ia.Na,n),this.size=e}function Ld(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}ia.Ma="serverreachability",br(Kb,Wr),ia.STAT_EVENT="statevent",br(Qg,Wr),ia.Na="timingevent",br(T_,Wr);var Vd={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},A_={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Jg(){}function S_(){}Jg.prototype.h=null;var xf,Sf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function em(){Wr.call(this,"d")}function tm(){Wr.call(this,"c")}function Mf(){}function Rf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new hc(this),this.P=Yb,this.W=new Wg(n=Vu?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new jE}function jE(){this.i=null,this.g="",this.h=!1}br(em,Wr),br(tm,Wr),br(Mf,Jg),Mf.prototype.g=function(){return new XMLHttpRequest},Mf.prototype.i=function(){return{}},xf=new Mf;var Yb=45e3,nm={},Ud={};function Nf(n,e,t){n.K=1,n.v=om(sa(e)),n.s=t,n.U=!0,x_(n,null)}function x_(n,e){n.F=Date.now(),Bd(n),n.A=sa(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),QE(t.h,"t",r),n.C=0,t=n.l.H,n.h=new jE,n.g=z_(n.l,t?e:null,!n.s),0<n.O&&(n.L=new VE(di(n.Ia,n,n.g),n.O)),Yg(n.V,n.g,"readystatechange",n.gb),e=n.H?Rd(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Af(1),function Df(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var h="",m=u.split("&"),w=0;w<m.length;w++){var D=m[w].split("=");if(1<D.length){var M=D[0];D=D[1];var R=M.split("_");h=2<=R.length&&"type"==R[1]?h+(M+"=")+D+"&":h+(M+"=redacted&")}}else h=null;else h=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function M_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function R_(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=$E(n,t),o==Ud){4==e&&(n.o=4,Kr(14),r=!1),$u(n.j,n.m,null,"[Incomplete Response]");break}if(o==nm){n.o=4,Kr(15),$u(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}$u(n.j,n.m,o,null),O_(n,o)}M_(n)&&o!=Ud&&o!=nm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Kr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ua(e),e.L=!0,Kr(11))):($u(n.j,n.m,t,"[Invalid Chunked Response]"),fc(n),rm(n))}function $E(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ud:(t=Number(e.substring(t,r)),isNaN(t)?nm:(r+=1)+t>e.length?Ud:(e=e.substr(r,t),n.C=r+t,e))}function Bd(n){n.Y=Date.now()+n.P,N_(n,n.P)}function N_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ld(di(n.eb,n),e)}function Of(n){n.B&&(It.clearTimeout(n.B),n.B=null)}function rm(n){0==n.l.G||n.I||yc(n.l,n)}function fc(n){Of(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Kg(n.W),UE(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function O_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||am(t.i,n)))if(t.I=n.N,!n.J&&am(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(D){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Ld(di(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;gm(t),Vf(t)}pm(t),Kr(18)}if(1>=F_(t.i)&&t.ka){try{t.ka()}catch(D){}t.ka=void 0}}else Ba(t,11)}else if((n.J||t.g==n)&&gm(t),!oc(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let D=o[e];if(t.U=D[0],D=D[1],2==t.G)if("c"==D[0]){t.J=D[1],t.la=D[2];const M=D[3];null!=M&&(t.ma=M,t.h.info("VER="+t.ma));const R=D[4];null!=R&&(t.za=R,t.h.info("SVER="+t.za));const H=D[5];null!=H&&"number"==typeof H&&0<H&&(t.K=r=1.5*H,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const W=n.g;if(W){const fe=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fe){var u=r.i;!u.g&&(Si(fe,"spdy")||Si(fe,"quic")||Si(fe,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Gd(u,u.h),u.h=null))}if(r.D){const Fe=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.sa=Fe,bn(r.F,r.D,Fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=Z_(r,r.H?r.la:null,r.W),h.J){tw(r.i,h);var m=h,w=r.K;w&&m.setTimeout(w),m.B&&(Of(m),Bd(m)),r.g=h}else q_(r);0<t.l.length&&Uf(t)}else"stop"!=D[0]&&"close"!=D[0]||Ba(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Ba(t,7):hm(t):"noop"!=D[0]&&t.j&&t.j.wa(D),t.A=0)}Af(4)}catch(D){}}function P_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(hs(n)||"string"==typeof n)wE(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(hs(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function HE(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(hs(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Nn(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Nn)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function im(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];pc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)pc(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function pc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Je=Rf.prototype).setTimeout=function(n){this.P=n},Je.gb=function(n){n=n.target;const e=this.L;e&&3==Va(n)?e.l():this.Ia(n)},Je.Ia=function(n){try{if(n==this.g)e:{const M=Va(this.g);var e=this.g.Da();const R=this.g.ba();if(!(3>M)&&(3!=M||Vu||this.g&&(this.h.h||this.g.ga()||aw(this.g)))){this.I||4!=M||7==e||Af(8==e||0>=R?3:2),Of(this);var t=this.g.ba();this.N=t;t:if(M_(this)){var r=aw(this.g);n="";var o=r.length,u=4==Va(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){fc(this),rm(this);var h="";break t}this.h.i=new It.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function BE(n,e,t,r,o,u,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+h})}(this.j,this.u,this.A,this.m,this.X,M,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oc(m)){var D=m;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,Kr(12),fc(this),rm(this);break e}$u(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,O_(this,t)}this.U?(R_(this,M,h),Vu&&this.i&&3==M&&(Yg(this.V,this.W,"tick",this.fb),this.W.start())):($u(this.j,this.m,h,null),O_(this,h)),4==M&&fc(this),this.i&&!this.I&&(4==M?yc(this.l,this):(this.i=!1,Bd(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,Kr(12)):(this.o=0,Kr(13)),fc(this),rm(this)}}}catch(M){}},Je.fb=function(){if(this.g){var n=Va(this.g),e=this.g.ga();this.C<e.length&&(Of(this),R_(this,n,e),this.i&&4!=n&&Bd(this))}},Je.cancel=function(){this.I=!0,fc(this)},Je.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function D_(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Af(3),Kr(17)),fc(this),this.o=2,rm(this)):N_(this,this.Y-n)},(Je=Nn.prototype).R=function(){im(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Je.T=function(){return im(this),this.g.concat()},Je.get=function(n,e){return pc(this.h,n)?this.h[n]:e},Je.set=function(n,e){pc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Je.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var GE=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function gc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof gc){this.g=void 0!==e?e:n.g,Pf(this,n.j),this.s=n.s,Fa(this,n.i),sm(this,n.m),this.l=n.l,e=n.h;var t=new $d;t.i=e.i,e.g&&(t.g=new Nn(e.g),t.h=e.h),ZE(this,t),this.o=n.o}else n&&(t=String(n).match(GE))?(this.g=!!e,Pf(this,t[1]||"",!0),this.s=jd(t[2]||""),Fa(this,t[3]||"",!0),sm(this,t[4]),this.l=jd(t[5]||"",!0),ZE(this,t[6]||"",!0),this.o=jd(t[7]||"")):(this.g=!!e,this.h=new $d(null,this.g))}function sa(n){return new gc(n)}function Pf(n,e,t){n.j=t?jd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Fa(n,e,t){n.i=t?jd(e,!0):e}function sm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ZE(n,e,t){e instanceof $d?(n.h=e,function k_(n,e){e&&!n.j&&(La(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(KE(this,r),QE(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=mc(e,So)),n.h=new $d(e,n.g))}function bn(n,e,t){n.h.set(e,t)}function om(n){return bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function jd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function mc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,oa),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function oa(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}gc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(mc(e,WE,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(mc(e,WE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(mc(t,"/"==t.charAt(0)?aa:Qb,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",mc(t,xo)),n.join("")};var WE=/[#\/\?@]/g,Qb=/[#\?:]/g,aa=/[#\?]/g,So=/[#\?@]/g,xo=/#/g;function $d(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function La(n){n.g||(n.g=new Nn,n.h=0,n.i&&function qE(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function KE(n,e){La(n),e=Hd(n,e),pc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,pc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&im(n)))}function YE(n,e){return La(n),e=Hd(n,e),pc(n.g.h,e)}function QE(n,e,t){KE(n,e),0<t.length&&(n.i=null,n.g.set(Hd(n,e),p_(t)),n.h+=t.length)}function Hd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function JE(n){this.l=n||XE,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ea&&It.g.Ea()&&It.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Je=$d.prototype).add=function(n,e){La(this),this.i=null,n=Hd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Je.forEach=function(n,e){La(this),this.g.forEach(function(t,r){wE(t,function(o){n.call(e,o,r,this)},this)},this)},Je.T=function(){La(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Je.R=function(n){La(this);var e=[];if("string"==typeof n)YE(this,n)&&(e=IE(e,this.g.get(Hd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=IE(e,n[t])}return e},Je.set=function(n,e){return La(this),this.i=null,YE(this,n=Hd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Je.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Je.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var h=o;""!==r[u]&&(h+="="+encodeURIComponent(String(r[u]))),n.push(h)}}return this.i=n.join("&")};var XE=10;function ew(n){return!!n.h||!!n.g&&n.g.size>=n.j}function F_(n){return n.h?1:n.g?n.g.size:0}function am(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Gd(n,e){n.g?n.g.add(e):n.h=e}function tw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function L_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return p_(n.i)}function um(){}function V_(){this.g=new um}function lm(n,e,t){const r=t||"";try{P_(n,function(o,u){let h=o;Fg(o)&&(h=ju(o)),e.push(r+u+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function qd(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Zd(n){this.l=n.$b||null,this.j=n.ib||!1}function Ff(n,e){Cr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=cm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}JE.prototype.cancel=function(){if(this.i=L_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},um.prototype.stringify=function(n){return It.JSON.stringify(n,void 0)},um.prototype.parse=function(n){return It.JSON.parse(n,void 0)},br(Zd,Jg),Zd.prototype.g=function(){return new Ff(this.l,this.j)},Zd.prototype.i=function(n){return function(){return n}}({}),br(Ff,Cr);var cm=0;function B_(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function zd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Wd(n)}function Wd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Je=Ff.prototype).open=function(n,e){if(this.readyState!=cm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Wd(this)},Je.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||It).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zd(this)),this.readyState=cm},Je.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Wd(this)),this.g&&(this.readyState=3,Wd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==It.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;B_(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Je.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?zd(this):Wd(this),3==this.readyState&&B_(this)}},Je.Ua=function(n){this.g&&(this.response=this.responseText=n,zd(this))},Je.Ta=function(n){this.g&&(this.response=n,zd(this))},Je.ha=function(){this.g&&zd(this)},Je.setRequestHeader=function(n,e){this.v.append(n,e)},Je.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Je.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ff.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Jb=It.JSON.parse;function cr(n){Cr.call(this),this.headers=new Nn,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=nw,this.K=this.L=!1}br(cr,Cr);var nw="",Xb=/^https?$/i,eC=["POST","PUT"];function nC(n){return"content-type"==n.toLowerCase()}function rw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,iw(n),dm(n)}function iw(n){n.D||(n.D=!0,hi(n,"complete"),hi(n,"error"))}function sw(n){if(n.h&&void 0!==kg&&(!n.C[1]||4!=Va(n)||2!=n.ba()))if(n.v&&4==Va(n))I_(n.Fa,0,n);else if(hi(n,"readystatechange"),4==Va(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(GE)[1]||null;if(!o&&It.self&&It.self.location){var u=It.self.location.protocol;o=u.substr(0,u.length-1)}r=!Xb.test(o?o.toLowerCase():"")}t=r}if(t)hi(n,"complete"),hi(n,"success");else{n.m=6;try{var h=2<Va(n)?n.g.statusText:""}catch(w){h=""}n.j=h+" ["+n.ba()+"]",iw(n)}}finally{dm(n)}}}function dm(n,e){if(n.g){ow(n);const t=n.g,r=n.C[0]?h_:null;n.g=null,n.C=null,e||hi(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function ow(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function Va(n){return n.g?n.g.readyState:0}function aw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case nw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function j_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function rC(n){let e="";return zs(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):bn(n,e,t))}function Lf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function uw(n){this.za=0,this.l=[],this.h=new C_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Lf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Lf("baseRetryDelayMs",5e3,n),this.$a=Lf("retryDelaySeedMs",1e4,n),this.Ya=Lf("forwardChannelMaxRetries",2,n),this.ra=Lf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new JE(n&&n.concurrentRequestLimit),this.Ca=new V_,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function hm(n){if($_(n),3==n.G){var e=n.V++,t=sa(n.F);bn(t,"SID",n.J),bn(t,"RID",e),bn(t,"TYPE","terminate"),Kd(n,t),(e=new Rf(n,n.h,e,void 0)).K=2,e.v=om(sa(t)),t=!1,It.navigator&&It.navigator.sendBeacon&&(t=It.navigator.sendBeacon(e.v.toString(),"")),!t&&It.Image&&((new Image).src=e.v,t=!0),t||(e.g=z_(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Bd(e)}sC(n)}function Vf(n){n.g&&(Ua(n),n.g.cancel(),n.g=null)}function $_(n){Vf(n),n.u&&(It.clearTimeout(n.u),n.u=null),gm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function fm(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Uf(n)}function Uf(n){ew(n.i)||n.m||(n.m=!0,E_(n.Ha,n),n.C=0)}function H_(n,e){var t;t=e?e.m:n.V++;const r=sa(n.F);bn(r,"SID",n.J),bn(r,"RID",t),bn(r,"AID",n.U),Kd(n,r),n.o&&n.s&&j_(r,n.o,n.s),t=new Rf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=G_(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Gd(n.i,t),Nf(t,r,e)}function Kd(n,e){n.j&&P_({},function(t,r){bn(e,r,t)})}function G_(n,e,t){t=Math.min(n.l.length,t);var r=n.j?di(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const h=["count="+t];-1==u?0<t?(u=o[0].h,h.push("ofs="+u)):u=0:h.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let D=o[w].h;const M=o[w].g;if(D-=u,0>D)u=Math.max(0,o[w].h-100),m=!1;else try{lm(M,h,"req"+D+"_")}catch(R){r&&r(M)}}if(m){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function q_(n){n.g||n.u||(n.Y=1,E_(n.Ga,n),n.A=0)}function pm(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Ld(di(n.Ga,n),iC(n,n.A)),n.A++,0))}function Ua(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function cw(n){n.g=new Rf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=sa(n.oa);bn(e,"RID","rpc"),bn(e,"SID",n.J),bn(e,"CI",n.N?"0":"1"),bn(e,"AID",n.U),Kd(n,e),bn(e,"TYPE","xmlhttp"),n.o&&n.s&&j_(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=om(sa(e)),t.s=null,t.U=!0,x_(t,n)}function gm(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function yc(n,e){var t=null;if(n.g==e){gm(n),Ua(n),n.g=null;var r=2}else{if(!am(n.i,e))return;t=e.D,tw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;hi(r=Fd(),new T_(r,t,e,o)),Uf(n)}else q_(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function lw(n,e){return!(F_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Ld(di(n.Ha,n,e),iC(n,n.C)),n.C++,0)))}(n,e)||2==r&&pm(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Ba(n,5);break;case 4:Ba(n,10);break;case 3:Ba(n,6);break;default:Ba(n,2)}}function iC(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ba(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=di(n.jb,n);t||(t=new gc("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||Pf(t,"https"),om(t)),function U_(n,e){const t=new C_;if(It.Image){const r=new Image;r.onload=If(qd,t,r,"TestLoadImage: loaded",!0,e),r.onerror=If(qd,t,r,"TestLoadImage: error",!1,e),r.onabort=If(qd,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=If(qd,t,r,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Kr(2);n.G=0,n.j&&n.j.va(e),sC(n),$_(n)}function sC(n){n.G=0,n.I=-1,n.j&&((0!=L_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,p_(n.l),n.l.length=0),n.j.ua())}function Z_(n,e,t){let r=function zE(n){return n instanceof gc?sa(n):new gc(n,void 0)}(t);if(""!=r.i)e&&Fa(r,e+"."+r.i),sm(r,r.m);else{const o=It.location;r=function uA(n,e,t,r){var o=new gc(null,void 0);return n&&Pf(o,n),e&&Fa(o,e),t&&sm(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&zs(n.aa,function(o,u){bn(r,u,o)}),t=n.sa,(e=n.D)&&t&&bn(r,e,t),bn(r,"VER",n.ma),Kd(n,r),r}function z_(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new cr(t&&n.Ba&&!n.qa?new Zd({ib:!0}):n.qa)).L=n.H,e}function oC(){}function ct(){if(Ao&&!(10<=Number(TE)))throw Error("Environmental error: no available transport.")}function fs(n,e){Cr.call(this),this.g=new uw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!oc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!oc(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ja(this)}function dw(n){em.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function hw(){tm.call(this),this.status=1}function ja(n){this.g=n}(Je=cr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():xf.g(),this.C=function Xg(n){return n.h||(n.h=n.i())}(this.u?this.u:xf),this.g.onreadystatechange=di(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void rw(this,u)}n=t||"";const o=new Nn(this.headers);r&&P_(r,function(u,h){o.set(h,u)}),r=function Bb(n){e:{var e=nC;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=It.FormData&&n instanceof It.FormData,!(0<=EE(eC,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,h){this.g.setRequestHeader(h,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ow(this),0<this.B&&((this.K=function tC(n){return Ao&&function DE(){return function Ws(n){var e=CE;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ac(String(ka)).split("."),t=ac("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",u=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=uc(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||uc(0==o[2].length,0==u[2].length)||uc(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=di(this.pa,this)):this.A=I_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){rw(this,u)}},Je.pa=function(){void 0!==kg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hi(this,"timeout"),this.abort(8))},Je.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,hi(this,"complete"),hi(this,"abort"),dm(this))},Je.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),dm(this,!0)),cr.Z.M.call(this)},Je.Fa=function(){this.s||(this.F||this.v||this.l?sw(this):this.cb())},Je.cb=function(){sw(this)},Je.ba=function(){try{return 2<Va(this)?this.g.status:-1}catch(n){return-1}},Je.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Je.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Jb(e)}},Je.Da=function(){return this.m},Je.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Je=uw.prototype).ma=8,Je.G=1,Je.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Je.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Rf(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Rd(u),Lu(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=G_(this,o,e),bn(t=sa(this.F),"RID",n),bn(t,"CVER",22),this.D&&bn(t,"X-HTTP-Session-Id",this.D),Kd(this,t),this.o&&u&&j_(t,this.o,u),Gd(this.i,o),this.Ra&&bn(t,"TYPE","init"),this.ja?(bn(t,"$req",e),bn(t,"SID","null"),o.$=!0,Nf(o,t,null)):Nf(o,t,e),this.G=2}}else 3==this.G&&(n?H_(this,n):0==this.l.length||ew(this.i)||H_(this))},Je.Ga=function(){if(this.u=null,cw(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Ld(di(this.bb,this),n)}},Je.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Kr(10),Vf(this),cw(this))},Je.ab=function(){null!=this.v&&(this.v=null,Vf(this),pm(this),Kr(19))},Je.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Kr(2)):(this.h.info("Failed to ping google.com"),Kr(1))},(Je=oC.prototype).xa=function(){},Je.wa=function(){},Je.va=function(){},Je.ua=function(){},Je.Oa=function(){},ct.prototype.g=function(n,e){return new fs(n,e)},br(fs,Cr),fs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),E_(di(n.hb,n,e))),Kr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Z_(n,null,n.W),Uf(n)},fs.prototype.close=function(){hm(this.g)},fs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,fm(this.g,e)}else this.v?((e={}).__data__=ju(n),fm(this.g,e)):fm(this.g,n)},fs.prototype.M=function(){this.g.j=null,delete this.j,hm(this.g),delete this.g,fs.Z.M.call(this)},br(dw,em),br(hw,tm),br(ja,oC),ja.prototype.xa=function(){hi(this.g,"a")},ja.prototype.wa=function(n){hi(this.g,new dw(n))},ja.prototype.va=function(n){hi(this.g,new hw(n))},ja.prototype.ua=function(){hi(this.g,"b")},ct.prototype.createWebChannel=ct.prototype.g,fs.prototype.send=fs.prototype.u,fs.prototype.open=fs.prototype.m,fs.prototype.close=fs.prototype.close,Vd.NO_ERROR=0,Vd.TIMEOUT=8,Vd.HTTP_ERROR=6,A_.COMPLETE="complete",S_.EventType=Sf,Sf.OPEN="a",Sf.CLOSE="b",Sf.ERROR="c",Sf.MESSAGE="d",Cr.prototype.listen=Cr.prototype.N,cr.prototype.listenOnce=cr.prototype.O,cr.prototype.getLastError=cr.prototype.La,cr.prototype.getLastErrorCode=cr.prototype.Da,cr.prototype.getStatus=cr.prototype.ba,cr.prototype.getResponseJson=cr.prototype.Qa,cr.prototype.getResponseText=cr.prototype.ga,cr.prototype.send=cr.prototype.ea;var aC=To.createWebChannelTransport=function(){return new ct},mm=To.getStatEventTarget=function(){return Fd()},Yd=To.ErrorCode=Vd,Zn=To.EventType=A_,lA=To.Event=ia,W_=To.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},uC=To.FetchXmlHttpFactory=Zd,ym=To.WebChannel=S_,fw=To.XhrIo=cr;const K_="@firebase/firestore";class Pr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pr.UNAUTHENTICATED=new Pr(null),Pr.GOOGLE_CREDENTIALS=new Pr("google-credentials-uid"),Pr.FIRST_PARTY=new Pr("first-party-uid"),Pr.MOCK_USER=new Pr("mock-user");let _c="9.6.10";const Hu=new ku.Yd("@firebase/firestore");function Y_(){return Hu.logLevel}function Re(n,...e){if(Hu.logLevel<=ku.in.DEBUG){const t=e.map(Q_);Hu.debug(`Firestore (${_c}): ${n}`,...t)}}function dr(n,...e){if(Hu.logLevel<=ku.in.ERROR){const t=e.map(Q_);Hu.error(`Firestore (${_c}): ${n}`,...t)}}function Bf(n,...e){if(Hu.logLevel<=ku.in.WARN){const t=e.map(Q_);Hu.warn(`Firestore (${_c}): ${n}`,...t)}}function Q_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Qe(n="Unexpected state"){const e=`FIRESTORE (${_c}) INTERNAL ASSERTION FAILED: `+n;throw dr(e),new Error(e)}function wt(n,e){n||Qe()}function He(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Bt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class zn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class gw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pr.UNAUTHENTICATED))}shutdown(){}}class dC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mw{constructor(e){this.t=e,this.currentUser=Pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=D=>this.i!==o?(o=this.i,t(D)):Promise.resolve();let h=new zn;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new zn,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const D=h;e.enqueueRetryable((0,_e.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},w=D=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(D=>w(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?w(D):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new zn)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new gw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new Pr(e)}}class yw{constructor(e,t,r){this.type="FirstParty",this.user=Pr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class _w{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new yw(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ew{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.p;return this.p=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.p=t.token,new vw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ps{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function dA(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ps.A=-1;class hC{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=dA(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function jt(n,e){return n<e?-1:n>e?1:0}function jf(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function J_(n){return n+"\0"}class On{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Te(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new On(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new On(0,0))}static max(){return new _t(new On(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function ww(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Qd(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class $f{constructor(e,t,r){void 0===t?t=0:t>e.length&&Qe(),void 0===r?r=e.length-t:r>e.length-t&&Qe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===$f.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $f?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wt extends $f{construct(e,t,r){return new Wt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Wt(t)}static emptyPath(){return new Wt([])}}const fC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kr extends $f{construct(e,t,r){return new kr(e,t,r)}static isValidIdentifier(e){return fC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new kr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Te(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Te(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Te(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(h=!h,o++):"."!==m||h?(r+=m,o++):(u(),o++)}if(u(),h)throw new Te(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kr(t)}static emptyPath(){return new kr([])}}class Jd{constructor(e){this.fields=e,e.sort(kr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Dr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Dr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Dr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dr.EMPTY_BYTE_STRING=new Dr("");const pC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gs(n){if(wt(!!n),"string"==typeof n){let e=0;const t=pC.exec(n);if(wt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wn(n.seconds),nanos:Wn(n.nanos)}}function Wn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function qu(n){return"string"==typeof n?Dr.fromBase64String(n):Dr.fromUint8Array(n)}function X_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ev(n){const e=n.mapValue.fields.__previous_value__;return X_(e)?ev(e):e}function Hf(n){const e=gs(n.mapValue.fields.__local_write_time__.timestampValue);return new On(e.seconds,e.nanos)}class bw{constructor(e,t,r,o,u,h,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class $a{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $a("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $a&&e.projectId===this.projectId&&e.database===this.database}}function Ha(n){return null==n}function Gf(n){return 0===n&&1/n==-1/0}function tv(n){return"number"==typeof n&&Number.isInteger(n)&&!Gf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(Wt.fromString(e))}static fromName(e){return new Ue(Wt.fromString(e).popFirst(5))}static empty(){return new Ue(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new Wt(e.slice()))}}const Cw={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dw={nullValue:"NULL_VALUE"};function vc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?X_(n)?4:xw(n)?9:10:Qe()}function Ks(n,e){if(n===e)return!0;const t=vc(n);if(t!==vc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hf(n).isEqual(Hf(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=gs(r.timestampValue),h=gs(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,qu(n.bytesValue).isEqual(qu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Wn(r.geoPointValue.latitude)===Wn(o.geoPointValue.latitude)&&Wn(r.geoPointValue.longitude)===Wn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Wn(r.integerValue)===Wn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Wn(r.doubleValue),h=Wn(o.doubleValue);return u===h?Gf(u)===Gf(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return jf(n.arrayValue.values||[],e.arrayValue.values||[],Ks);case 10:return function(r,o){const u=r.mapValue.fields||{},h=o.mapValue.fields||{};if(ww(u)!==ww(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===h[m]||!Ks(u[m],h[m])))return!1;return!0}(n,e);default:return Qe()}var o}function qf(n,e){return void 0!==(n.values||[]).find(t=>Ks(t,e))}function Ga(n,e){if(n===e)return 0;const t=vc(n),r=vc(e);if(t!==r)return jt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=Wn(o.integerValue||o.doubleValue),m=Wn(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return Tw(n.timestampValue,e.timestampValue);case 4:return Tw(Hf(n),Hf(e));case 5:return jt(n.stringValue,e.stringValue);case 6:return function(o,u){const h=qu(o),m=qu(u);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),m=u.split("/");for(let w=0;w<h.length&&w<m.length;w++){const D=jt(h[w],m[w]);if(0!==D)return D}return jt(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=jt(Wn(o.latitude),Wn(u.latitude));return 0!==h?h:jt(Wn(o.longitude),Wn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const h=o.values||[],m=u.values||[];for(let w=0;w<h.length&&w<m.length;++w){const D=Ga(h[w],m[w]);if(D)return D}return jt(h.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const h=o.fields||{},m=Object.keys(h),w=u.fields||{},D=Object.keys(w);m.sort(),D.sort();for(let M=0;M<m.length&&M<D.length;++M){const R=jt(m[M],D[M]);if(0!==R)return R;const H=Ga(h[m[M]],w[D[M]]);if(0!==H)return H}return jt(m.length,D.length)}(n.mapValue,e.mapValue);default:throw Qe()}}function Tw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return jt(n,e);const t=gs(n),r=gs(e),o=jt(t.seconds,r.seconds);return 0!==o?o:jt(t.nanos,r.nanos)}function Xd(n){return nv(n)}function nv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=gs(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?qu(n.bytesValue).toBase64():"referenceValue"in n?Ue.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const h of r.values||[])u?u=!1:o+=",",o+=nv(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",h=!0;for(const m of o)h?h=!1:u+=",",u+=`${m}:${nv(r.fields[m])}`;return u+"}"}(n.mapValue):Qe();var e}function eh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function rv(n){return!!n&&"integerValue"in n}function Zf(n){return!!n&&"arrayValue"in n}function Aw(n){return!!n&&"nullValue"in n}function Sw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zf(n){return!!n&&"mapValue"in n}function th(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Gu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=th(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=th(n.arrayValue.values[t]);return e}return Object.assign({},n)}function xw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Mw(n,e){return void 0===n?e:void 0===e||Ga(n,e)>0?n:e}function iv(n,e){return void 0===n?e:void 0===e||Ga(n,e)<0?n:e}class fi{constructor(e){this.value=e}static empty(){return new fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=th(t)}setAll(e){let t=kr.emptyPath(),r={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}h?r[m.lastSegment()]=th(h):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());zf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ks(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];zf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Gu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new fi(th(this.value))}}function Rw(n){const e=[];return Gu(n.fields,(t,r)=>{const o=new kr([t]);if(zf(r)){const u=Rw(r.mapValue).fields;if(0===u.length)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new Jd(e)}class Cn{constructor(e,t,r,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Cn(e,0,_t.min(),_t.min(),fi.empty(),0)}static newFoundDocument(e,t,r){return new Cn(e,1,t,_t.min(),r,0)}static newNoDocument(e,t){return new Cn(e,2,t,_t.min(),fi.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,_t.min(),fi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class nh{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Wf(n){return n.fields.find(e=>2===e.kind)}function Ec(n){return n.fields.filter(e=>2!==e.kind)}nh.UNKNOWN_ID=-1;class rh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Kf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Kf(0,qa.min())}}function Nw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=_t.fromTimestamp(1e9===r?new On(t+1,0):new On(t,r));return new qa(o,Ue.empty(),e)}function sv(n){return new qa(n.readTime,n.key,-1)}class qa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new qa(_t.min(),Ue.empty(),-1)}static max(){return new qa(_t.max(),Ue.empty(),-1)}}function Ow(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ue.comparator(n.documentKey,e.documentKey),0!==t?t:jt(n.largestBatchId,e.largestBatchId))}class gC{constructor(e,t=null,r=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.P=null}}function ov(n,e=null,t=[],r=[],o=null,u=null,h=null){return new gC(n,e,t,r,o,u,h)}function wc(n){const e=He(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Xd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Ha(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xd(r)).join(",")),e.P=t}return e.P}function _m(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!Fw(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Ks(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Qf(n.startAt,e.startAt)&&Qf(n.endAt,e.endAt)}function vm(n){return Ue.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ic(n,e){return n.filters.filter(t=>t instanceof Yr&&t.field.isEqual(e))}class Yr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new ih(e,t,r):"array-contains"===t?new kw(e,r):"in"===t?new _C(e,r):"not-in"===t?new vC(e,r):"array-contains-any"===t?new EC(e,r):new Yr(e,t,r)}static V(e,t,r){return"in"===t?new Yf(e,r):new mC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ga(t,this.value)):null!==t&&vc(this.value)===vc(t)&&this.v(Ga(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qe()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ih extends Yr{constructor(e,t,r){super(e,t,r),this.key=Ue.fromName(r.referenceValue)}matches(e){const t=Ue.comparator(e.key,this.key);return this.v(t)}}class Yf extends Yr{constructor(e,t){super(e,"in",t),this.keys=yC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mC extends Yr{constructor(e,t){super(e,"not-in",t),this.keys=yC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yC(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ue.fromName(r.referenceValue))}class kw extends Yr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zf(t)&&qf(t.arrayValue,this.value)}}class _C extends Yr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&qf(this.value.arrayValue,t)}}class vC extends Yr{constructor(e,t){super(e,"not-in",t)}matches(e){if(qf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!qf(this.value.arrayValue,t)}}class EC extends Yr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>qf(this.value.arrayValue,r))}}class Zu{constructor(e,t){this.position=e,this.inclusive=t}}class bc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Fw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Em(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],h=n.position[o];if(r=u.field.isKeyField()?Ue.comparator(Ue.fromName(h.referenceValue),t.key):Ga(h,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Qf(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ks(n.position[t],e.position[t]))return!1;return!0}class ms{constructor(e,t=null,r=[],o=[],u=null,h="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function Lw(n,e,t,r,o,u,h,m){return new ms(n,e,t,r,o,u,h,m)}function Cc(n){return new ms(n)}function Jf(n){return!Ha(n.limit)&&"F"===n.limitType}function wm(n){return!Ha(n.limit)&&"L"===n.limitType}function av(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Xf(n){for(const e of n.filters)if(e.S())return e.field;return null}function uv(n){return null!==n.collectionGroup}function ep(n){const e=He(n);if(null===e.D){e.D=[];const t=Xf(e),r=av(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new bc(t)),e.D.push(new bc(kr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new bc(kr.keyField(),u))}}}return e.D}function Ys(n){const e=He(n);if(!e.C)if("F"===e.limitType)e.C=ov(e.path,e.collectionGroup,ep(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of ep(e))t.push(new bc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Zu(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Zu(e.startAt.position,!e.startAt.inclusive):null;e.C=ov(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function Vw(n,e,t){return new ms(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ua(n,e){return _m(Ys(n),Ys(e))&&n.limitType===e.limitType}function lv(n){return`${wc(Ys(n))}|lt:${n.limitType}`}function zu(n){return`Query(target=${function Pw(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Xd(r.value)}`;var r}).join(", ")}]`),Ha(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Xd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Xd(t)).join(",")),`Target(${e})`}(Ys(n))}; limitType=${n.limitType})`}function Uw(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ue.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,h){const m=Em(o,u,h);return o.inclusive?m<=0:m<0}(t.startAt,ep(t),r)||t.endAt&&!function(o,u,h){const m=Em(o,u,h);return o.inclusive?m>=0:m>0}(t.endAt,ep(t),r)));var t,r}function cv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Bw(n){return(e,t)=>{let r=!1;for(const o of ep(n)){const u=hA(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function hA(n,e,t){const r=n.field.isKeyField()?Ue.comparator(e.key,t.key):function(o,u,h){const m=u.data.field(o),w=h.data.field(o);return null!==m&&null!==w?Ga(m,w):Qe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Qe()}}function dv(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gf(e)?"-0":e}}function wC(n){return{integerValue:""+n}}function hv(n,e){return tv(e)?wC(e):dv(n,e)}class sh{constructor(){this._=void 0}}function IC(n,e,t){return n instanceof oh?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Dc?$w(n,e):n instanceof Tc?Hw(n,e):function(r,o){const u=jw(r,o),h=Gw(u)+Gw(r.k);return rv(u)&&rv(r.k)?wC(h):dv(r.M,h)}(n,e)}function bC(n,e,t){return n instanceof Dc?$w(n,e):n instanceof Tc?Hw(n,e):t}function jw(n,e){return n instanceof ah?rv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class oh extends sh{}class Dc extends sh{constructor(e){super(),this.elements=e}}function $w(n,e){const t=uh(e);for(const r of n.elements)t.some(o=>Ks(o,r))||t.push(r);return{arrayValue:{values:t}}}class Tc extends sh{constructor(e){super(),this.elements=e}}function Hw(n,e){let t=uh(e);for(const r of n.elements)t=t.filter(o=>!Ks(o,r));return{arrayValue:{values:t}}}class ah extends sh{constructor(e,t){super(),this.M=e,this.k=t}}function Gw(n){return Wn(n.integerValue||n.doubleValue)}function uh(n){return Zf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class lh{constructor(e,t){this.field=e,this.transform=t}}class Zw{constructor(e,t){this.version=e,this.transformResults=t}}class Xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Im{}function CC(n,e,t){n instanceof np?function(r,o,u){const h=r.value.clone(),m=bm(r.fieldTransforms,o,u.transformResults);h.setAll(m),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Mo?function(r,o,u){if(!tp(r.precondition,o))return void o.convertToUnknownDocument(u.version);const h=bm(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(Kw(r)),m.setAll(h),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function fv(n,e,t){var o;n instanceof np?function(r,o,u){if(!tp(r.precondition,o))return;const h=r.value.clone(),m=Ro(r.fieldTransforms,u,o);h.setAll(m),o.convertToFoundDocument(Ww(o),h).setHasLocalMutations()}(n,e,t):n instanceof Mo?function(r,o,u){if(!tp(r.precondition,o))return;const h=Ro(r.fieldTransforms,u,o),m=o.data;m.setAll(Kw(r)),m.setAll(h),o.convertToFoundDocument(Ww(o),m).setHasLocalMutations()}(n,e,t):tp(n.precondition,o=e)&&o.convertToNoDocument(_t.min())}function DC(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=jw(r.transform,o||null);null!=u&&(null==t&&(t=fi.empty()),t.set(r.field,u))}return t||null}function zw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&jf(t,r,(o,u)=>function qw(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Dc&&r instanceof Dc||t instanceof Tc&&r instanceof Tc?jf(t.elements,r.elements,Ks):t instanceof ah&&r instanceof ah?Ks(t.k,r.k):t instanceof oh&&r instanceof oh);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Ww(n){return n.isFoundDocument()?n.version:_t.min()}class np extends Im{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Mo extends Im{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function Kw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function bm(n,e,t){const r=new Map;wt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],h=u.transform,m=e.data.field(u.field);r.set(u.field,bC(h,m,t[o]))}return r}function Ro(n,e,t){const r=new Map;for(const o of n){const u=o.transform,h=t.data.field(o.field);r.set(o.field,IC(u,h,e))}return r}class rp extends Im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class ip extends Im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class sp{constructor(e){this.count=e}}var hr,Kt;function Yw(n){switch(n){default:return Qe();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function op(n){if(void 0===n)return dr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case hr.OK:return ae.OK;case hr.CANCELLED:return ae.CANCELLED;case hr.UNKNOWN:return ae.UNKNOWN;case hr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case hr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case hr.INTERNAL:return ae.INTERNAL;case hr.UNAVAILABLE:return ae.UNAVAILABLE;case hr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case hr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case hr.NOT_FOUND:return ae.NOT_FOUND;case hr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case hr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case hr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case hr.ABORTED:return ae.ABORTED;case hr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case hr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case hr.DATA_LOSS:return ae.DATA_LOSS;default:return Qe()}}(Kt=hr||(hr={}))[Kt.OK=0]="OK",Kt[Kt.CANCELLED=1]="CANCELLED",Kt[Kt.UNKNOWN=2]="UNKNOWN",Kt[Kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kt[Kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kt[Kt.NOT_FOUND=5]="NOT_FOUND",Kt[Kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kt[Kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kt[Kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kt[Kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kt[Kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kt[Kt.ABORTED=10]="ABORTED",Kt[Kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kt[Kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kt[Kt.INTERNAL=13]="INTERNAL",Kt[Kt.UNAVAILABLE=14]="UNAVAILABLE",Kt[Kt.DATA_LOSS=15]="DATA_LOSS";class No{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Gu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Qd(this.inner)}size(){return this.innerSize}}class er{constructor(e,t){this.comparator=e,this.root=t||Fr.EMPTY}insert(e,t){return new er(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fr.BLACK,null,null))}remove(e){return new er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cm(this.root,e,this.comparator,!0)}}class Cm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Fr.RED,this.left=null!=o?o:Fr.EMPTY,this.right=null!=u?u:Fr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Fr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Fr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Fr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qe();const e=this.left.check();if(e!==this.right.check())throw Qe();return e+(this.isRed()?0:1)}}Fr.EMPTY=null,Fr.RED=!0,Fr.BLACK=!1,Fr.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe()}get value(){throw Qe()}get color(){throw Qe()}get left(){throw Qe()}get right(){throw Qe()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Fr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gn{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dm(this.data.getIterator())}getIteratorFrom(e){return new Dm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gn(this.comparator);return t.data=e,t}}class Dm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ac(n){return n.hasNext()?n.getNext():void 0}const TC=new er(Ue.comparator);function Qs(){return TC}const fA=new er(Ue.comparator);function ap(){return fA}function Sc(){return new No(n=>n.toString(),(n,e)=>n.isEqual(e))}const Qw=new er(Ue.comparator),pv=new gn(Ue.comparator);function rn(...n){let e=pv;for(const t of n)e=e.add(t);return e}const AC=new gn(jt);function Tm(){return AC}class up{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,lp.createSynthesizedTargetChangeForCurrentChange(e,t)),new up(_t.min(),r,Tm(),Qs(),rn())}}class lp{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new lp(Dr.EMPTY_BYTE_STRING,t,rn(),rn(),rn())}}class cp{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class Am{constructor(e,t){this.targetId=e,this.$=t}}class gv{constructor(e,t,r=Dr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Jw{constructor(){this.B=0,this.L=eI(),this.U=Dr.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=rn(),t=rn(),r=rn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Qe()}}),new lp(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=eI()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class Xw{constructor(e){this.nt=e,this.st=new Map,this.it=Qs(),this.rt=mv(),this.ot=new gn(jt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Qe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(vm(u))if(0===r){const h=new Ue(u.path);this.ct(t,h,Cn.newNoDocument(h,_t.min()))}else wt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,h)=>{const m=this.wt(h);if(m){if(u.current&&vm(m.target)){const w=new Ue(m.target.path);null!==this.it.get(w)||this.It(h,w)||this.ct(h,w,Cn.newNoDocument(w,e))}u.j&&(t.set(h,u.H()),u.J())}});let r=rn();this.rt.forEach((u,h)=>{let m=!0;h.forEachWhile(w=>{const D=this.wt(w);return!D||2===D.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,h)=>h.setReadTime(e));const o=new up(e,t,this.ot,this.it,r);return this.it=Qs(),this.rt=mv(),this.ot=new gn(jt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Jw,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new gn(jt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new Jw),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function mv(){return new er(Ue.comparator)}function eI(){return new er(Ue.comparator)}const tI={asc:"ASCENDING",desc:"DESCENDING"},nI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class SC{constructor(e,t){this.databaseId=e,this.N=t}}function ch(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rI(n,e){return n.N?e.toBase64():e.toUint8Array()}function Mi(n,e){return ch(n,e.toTimestamp())}function Un(n){return wt(!!n),_t.fromTimestamp(function(e){const t=gs(e);return new On(t.seconds,t.nanos)}(n))}function yv(n,e){return(t=n,new Wt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function iI(n){const e=Wt.fromString(n);return wt(bv(e)),e}function Sm(n,e){return yv(n.databaseId,e.path)}function Zi(n,e){const t=iI(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ue(vv(t))}function _v(n,e){return yv(n.databaseId,e)}function xm(n){const e=iI(n);return 4===e.length?Wt.emptyPath():vv(e)}function dp(n){return new Wt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vv(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function sI(n,e,t){return{name:Sm(n,e),fields:t.value.mapValue.fields}}function oI(n,e,t){const r=Zi(n,e.name),o=Un(e.updateTime),u=new fi({mapValue:{fields:e.fields}}),h=Cn.newFoundDocument(r,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function dh(n,e){let t;if(e instanceof np)t={update:sI(n,e.key,e.value)};else if(e instanceof rp)t={delete:Sm(n,e.key)};else if(e instanceof Mo)t={update:sI(n,e.key,e.data),updateMask:NC(e.fieldMask)};else{if(!(e instanceof ip))return Qe();t={verify:Sm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const h=u.transform;if(h instanceof oh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Dc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Tc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof ah)return{fieldPath:u.field.canonicalString(),increment:h.k};throw Qe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Mi(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Qe()),t;var o}function hh(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Xn.updateTime(Un(o.updateTime)):void 0!==o.exists?Xn.exists(o.exists):Xn.none():Xn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,h){let m=null;"setToServerValue"in h?(wt("REQUEST_TIME"===h.setToServerValue),m=new oh):"appendMissingElements"in h?m=new Dc(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new Tc(h.removeAllFromArray.values||[]):"increment"in h?m=new ah(u,h.increment):Qe();const w=kr.fromServerFormat(h.fieldPath);return new lh(w,m)}(n,o)):[];var o;if(e.update){const o=Zi(n,e.update.name),u=new fi({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new Jd((e.updateMask.fieldPaths||[]).map(D=>kr.fromServerFormat(D)));return new Mo(o,u,h,t,r)}return new np(o,u,t,r)}if(e.delete){const o=Zi(n,e.delete);return new rp(o,t)}if(e.verify){const o=Zi(n,e.verify);return new ip(o,t)}return Qe()}function xC(n,e){return{documents:[_v(n,e.path)]}}function Iv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=_v(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=_v(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const D=w.map(M=>function(R){if("=="===R.op){if(Sw(R.value))return{unaryFilter:{field:Wu(R.field),op:"IS_NAN"}};if(Aw(R.value))return{unaryFilter:{field:Wu(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(Sw(R.value))return{unaryFilter:{field:Wu(R.field),op:"IS_NOT_NAN"}};if(Aw(R.value))return{unaryFilter:{field:Wu(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wu(R.field),op:MC(R.op),value:R.value}}}(M));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(D=>{return{field:Wu((M=D).field),direction:cI(M.dir)};var M})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=(D=e.limit,n.N||Ha(D)?D:{value:D});var D,m,w;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function uI(n){let e=xm(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){wt(1===r);const M=t.from[0];M.allDescendants?o=M.collectionId:e=e.child(M.collectionId)}let u=[];t.where&&(u=hp(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(M=>{return new bc(Ku((R=M).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let m=null;t.limit&&(m=function(M){let R;return R="object"==typeof M?M.value:M,Ha(R)?null:R}(t.limit));let w=null;var M;t.startAt&&(w=new Zu((M=t.startAt).values||[],!!M.before));let D=null;return t.endAt&&(D=function(M){return new Zu(M.values||[],!M.before)}(t.endAt)),Lw(e,o,h,u,m,"F",w,D)}function hp(n){return n?void 0!==n.unaryFilter?[RC(n)]:void 0!==n.fieldFilter?[pA(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>hp(e)).reduce((e,t)=>e.concat(t)):Qe():[]}function cI(n){return tI[n]}function MC(n){return nI[n]}function Wu(n){return{fieldPath:n.canonicalString()}}function Ku(n){return kr.fromServerFormat(n.fieldPath)}function pA(n){return Yr.create(Ku(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qe()}}(n.fieldFilter.op),n.fieldFilter.value)}function RC(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ku(n.unaryFilter.field);return Yr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ku(n.unaryFilter.field);return Yr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ku(n.unaryFilter.field);return Yr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ku(n.unaryFilter.field);return Yr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Qe()}}function NC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Tr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Cv(e)),e=OC(n.get(t),e);return Cv(e)}function OC(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Cv(n){return n+"\x01\x01"}function Js(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Wt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const h=n.indexOf("\x01",u);switch((h<0||h>t)&&Qe(),n.charAt(h+1)){case"\x01":const m=n.substring(u,h);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,h),o+="\0";break;case"\x11":o+=n.substring(u,h+1);break;default:Qe()}u=h+2}return new Wt(r)}const dI=["userId","batchId"];function Mm(n,e){return[n,Tr(e)]}function Dv(n,e,t){return[n,Tr(e),t]}const PC={},hI=["prefixPath","collectionGroup","readTime","documentId"],fI=["prefixPath","collectionGroup","documentId"],pI=["collectionGroup","readTime","prefixPath","documentId"],gI=["canonicalId","targetId"],kC=["targetId","path"],FC=["path","targetId"],gA=["collectionId","parent"],mI=["indexId","uid"],mA=["uid","sequenceNumber"],yA=["indexId","uid","arrayValue","directionalValue","documentKey"],_A=["indexId","uid","documentKey"],vA=["userId","collectionPath","documentId"],EA=["userId","collectionPath","largestBatchId"],wA=["userId","collectionGroup","largestBatchId"],LC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],IA=[...LC,"documentOverlays"],fp=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bA=[...fp,"indexConfiguration","indexState","indexEntries"],Tv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Rm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let o=0,u=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&t()},w=>r(w))}),h=!0,u===o&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(o=>o?de.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class pp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new zn,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new fh(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=xv(r.target.error);this.At.reject(new fh(e,o))}}static open(e,t,r,o){try{return new pp(t,e.transaction(o,r))}catch(u){throw new fh(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new yI(t)}}class la{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===la.Vt((0,Bt.z$)())&&dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),ph(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Bt.hl)())return!1;if(la.St())return!0;const e=(0,Bt.z$)(),t=la.Vt(e),r=0<t&&t<10,o=la.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=h=>{r(h.target.result)},u.onblocked=()=>{o(new fh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=h=>{const m=h.target.error;o("VersionError"===m.name?new Te(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Te(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new fh(e,m))},u.onupgradeneeded=h=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.Pt.kt(h.target.result,u.transaction,h.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,_e.Z)(function*(){const h="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const w=pp.open(u.db,e,h?"readonly":"readwrite",r),D=o(w).next(M=>(w.bt(),M)).catch(M=>(w.abort(M),de.reject(M))).toPromise();return D.catch(()=>{}),yield w.Rt,D}catch(w){const D="FirebaseError"!==w.name&&m<3;if(Re("SimpleDb","Transaction failed with error:",w.message,"Retrying:",D),u.close(),!D)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Av{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return ph(this.Ft.delete())}}class fh extends Te{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Yu(n){return"IndexedDbTransactionError"===n.name}class yI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ph(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),ph(this.store.add(e))}get(e){return ph(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),ph(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),ph(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Gt(o,(h,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new de((u,h)=>{o.onerror=m=>{h(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}Qt(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Gt(o,(u,h,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Gt(o,t)}zt(e){const t=this.cursor({});return new de((r,o)=>{t.onerror=u=>{const h=xv(u.target.error);o(h)},t.onsuccess=u=>{const h=u.target.result;h?e(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}Gt(e,t){const r=[];return new de((o,u)=>{e.onerror=h=>{u(h.target.error)},e.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const w=new Av(m),D=t(m.primaryKey,m.value,w);if(D instanceof de){const M=D.catch(R=>(w.done(),de.reject(R)));r.push(M)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ph(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=xv(r.target.error);t(o)}})}let Sv=!1;function xv(n){const e=la.Vt((0,Bt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Sv||(Sv=!0,setTimeout(()=>{throw r},0)),r}}return n}class Nm extends Rm{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Lr(n,e){const t=He(n);return la.xt(t.Ht,e)}class _I{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&CC(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&fv(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&fv(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(_t.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rn())}isEqual(e){return this.batchId===e.batchId&&jf(this.mutations,e.mutations,(t,r)=>zw(t,r))&&jf(this.baseMutations,e.baseMutations,(t,r)=>zw(t,r))}}class vI{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){wt(e.mutations.length===r.length);let o=Qw;const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new vI(e,t,r,o)}}class EI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Qu{constructor(e,t,r,o,u=_t.min(),h=_t.min(),m=Dr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(e){return new Qu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Qu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Qu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class wI{constructor(e){this.Jt=e}}function UC(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Om(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Sm(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:ch(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Za(e.version)};else{if(!e.isUnknownDocument())return Qe();r.unknownDocument={path:t.path.toArray(),version:Za(e.version)}}var o,u;return r}function Om(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Za(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xc(n){const e=new On(n.seconds,n.nanoseconds);return _t.fromTimestamp(e)}function pi(n,e){const t=(e.baseMutations||[]).map(u=>hh(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const h=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(h.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>hh(n.Jt,u)),o=On.fromMillis(e.localWriteTimeMs);return new _I(e.batchId,o,t,r)}function gp(n){const e=xc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?xc(n.lastLimboFreeSnapshotVersion):_t.min();let r;var o;return void 0!==n.query.documents?(wt(1===(o=n.query).documents.length),r=Ys(Cc(xm(o.documents[0])))):r=Ys(uI(n.query)),new Qu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Dr.fromBase64String(n.resumeToken))}function Pm(n,e){const t=Za(e.snapshotVersion),r=Za(e.lastLimboFreeSnapshotVersion);let o;o=vm(e.target)?xC(n.Jt,e.target):Iv(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Mv(n){const e=uI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Vw(e,e.limit,"L"):e}function Rv(n,e){return new EI(e.largestBatchId,hh(n.Jt,e.overlayMutation))}function km(n,e){const t=e.path.lastSegment();return[n,Tr(e.path.popLast()),t]}class II{getBundleMetadata(e,t){return Nv(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:xc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Nv(e).put({bundleId:(r=t).id,createTime:Za(Un(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return bI(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Mv(o.bundledQuery),readTime:xc(o.readTime)};var o})}saveNamedQuery(e,t){return bI(e).put({name:(r=t).name,readTime:Za(Un(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Nv(n){return Lr(n,"bundles")}function bI(n){return Lr(n,"namedQueries")}class Fm{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Fm(e,t.uid||"")}getOverlay(e,t){return gh(e).get(km(this.userId,t)).next(r=>r?Rv(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,h)=>{const m=new EI(t,h);o.push(this.Xt(e,m))}),de.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(h=>o.add(Tr(h.getCollectionPath())));const u=[];return o.forEach(h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(gh(e).Qt("collectionPathOverlayIndex",m))}),de.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Sc(),u=Tr(t),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return gh(e).qt("collectionPathOverlayIndex",h).next(m=>{for(const w of m){const D=Rv(this.M,w);o.set(D.getKey(),D)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Sc();let h;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return gh(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,D,M)=>{const R=Rv(this.M,D);u.size()<o||R.largestBatchId===h?(u.set(R.getKey(),R),h=R.largestBatchId):M.done()}).next(()=>u)}Xt(e,t){return gh(e).put(function(r,o,u){const[h,m,w]=km(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:dh(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function gh(n){return Lr(n,"documentOverlays")}class mh{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Wn(e.integerValue));else if("doubleValue"in e){const r=Wn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Gf(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(qu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?xw(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Qe()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Ue.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function BC(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Lm(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=BC(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}mh.fe=new mh;class Oo{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=Lm(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=Lm(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class jC{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class CA{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Vm{constructor(){this.De=new Oo,this.Ce=new jC(this.De),this.xe=new CA(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class za{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new za(this.indexId,this.documentKey,this.arrayValue,r)}}function Mc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=CI(n.arrayValue,e.arrayValue),0!==t?t:(t=CI(n.directionalValue,e.directionalValue),0!==t?t:Ue.comparator(n.documentKey,e.documentKey)))}function CI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class DI{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Wf(e);if(void 0!==t&&!this.Be(t))return!1;const r=Ec(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const h=r[o];if(!this.Le(this.Fe,h)||!this.Ue(this.Me[u++],h))return!1;++o}for(;o<r.length;++o){const h=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],h))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class $C{constructor(){this.qe=new TI}addToCollectionParentIndex(e,t){return this.qe.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getFieldIndex(e,t){return de.resolve(null)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class TI{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new gn(Wt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new gn(Wt.comparator)).toArray()}}const mp=new Uint8Array(0);class AI{constructor(e){this.user=e,this.Ge=new TI,this.Ke=new No(t=>wc(t),(t,r)=>_m(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const u={collectionId:r,parent:Tr(o)};return SI(e).put(u)}return de.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[J_(t),""],!1,!0);return SI(e).qt(o).next(u=>{for(const h of u){if(h.collectionId!==t)break;r.push(Js(h.parent))}return r})}addFieldIndex(e,t){const r=_p(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=_p(e),o=yh(e),u=yp(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=yp(e);let o=!0;const u=new Map;return de.forEach(this.Qe(t),h=>this.getFieldIndex(e,h).next(m=>{o&&(o=!!m),u.set(h,m)})).next(()=>{if(o){let h=rn();return de.forEach(u,(m,w)=>{var D;Re("IndexedDbIndexManager",`Using index ${D=m,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(dt=>`${dt.fieldPath}:${dt.kind}`).join(",")}`} to execute ${wc(t)}`);const M=function(dt,mn){const bt=Wf(mn);if(void 0===bt)return null;for(const $t of Ic(dt,bt.fieldPath))switch($t.op){case"array-contains-any":return $t.value.arrayValue.values||[];case"array-contains":return[$t.value]}return null}(w,m),R=function(dt,mn){const bt=new Map;for(const $t of Ec(mn))for(const Ht of Ic(dt,$t.fieldPath))switch(Ht.op){case"==":case"in":bt.set($t.fieldPath.canonicalString(),Ht.value);break;case"not-in":case"!=":return bt.set($t.fieldPath.canonicalString(),Ht.value),Array.from(bt.values())}return null}(w,m),H=function(dt,mn){const bt=[];let $t=!0;for(const ol of Ec(mn)){let Po,Op=!0;for(const Jr of Ic(dt,ol.fieldPath)){let tr,iy=!0;switch(Jr.op){case"<":case"<=":tr="nullValue"in(Ht=Jr.value)?Dw:"booleanValue"in Ht?{booleanValue:!1}:"integerValue"in Ht||"doubleValue"in Ht?{doubleValue:NaN}:"timestampValue"in Ht?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Ht?{stringValue:""}:"bytesValue"in Ht?{bytesValue:""}:"referenceValue"in Ht?eh($a.empty(),Ue.empty()):"geoPointValue"in Ht?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Ht?{arrayValue:{}}:"mapValue"in Ht?{mapValue:{}}:Qe();break;case"==":case"in":case">=":tr=Jr.value;break;case">":tr=Jr.value,iy=!1;break;case"!=":case"not-in":tr=Dw}Mw(Po,tr)===tr&&(Po=tr,Op=iy)}if(null!==dt.startAt)for(let Jr=0;Jr<dt.orderBy.length;++Jr)if(dt.orderBy[Jr].field.isEqual(ol.fieldPath)){const tr=dt.startAt.position[Jr];Mw(Po,tr)===tr&&(Po=tr,Op=dt.startAt.inclusive);break}if(void 0===Po)return null;bt.push(Po),$t&&($t=Op)}var Ht;return new Zu(bt,$t)}(w,m),W=function(dt,mn){const bt=[];let $t=!0;for(const ol of Ec(mn)){let Po,Op=!0;for(const Jr of Ic(dt,ol.fieldPath)){let tr,iy=!0;switch(Jr.op){case">=":case">":tr="nullValue"in(Ht=Jr.value)?{booleanValue:!1}:"booleanValue"in Ht?{doubleValue:NaN}:"integerValue"in Ht||"doubleValue"in Ht?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Ht?{stringValue:""}:"stringValue"in Ht?{bytesValue:""}:"bytesValue"in Ht?eh($a.empty(),Ue.empty()):"referenceValue"in Ht?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Ht?{arrayValue:{}}:"arrayValue"in Ht?{mapValue:{}}:"mapValue"in Ht?Cw:Qe(),iy=!1;break;case"==":case"in":case"<=":tr=Jr.value;break;case"<":tr=Jr.value,iy=!1;break;case"!=":case"not-in":tr=Cw}iv(Po,tr)===tr&&(Po=tr,Op=iy)}if(null!==dt.endAt)for(let Jr=0;Jr<dt.orderBy.length;++Jr)if(dt.orderBy[Jr].field.isEqual(ol.fieldPath)){const tr=dt.endAt.position[Jr];iv(Po,tr)===tr&&(Po=tr,Op=dt.endAt.inclusive);break}if(void 0===Po)return null;bt.push(Po),$t&&($t=Op)}var Ht;return new Zu(bt,$t)}(w,m),fe=this.je(m,w,H),Fe=this.je(m,w,W),tt=this.We(m,w,R),qt=this.ze(m.indexId,M,fe,!!H&&H.inclusive,Fe,!!W&&W.inclusive,tt);return de.forEach(qt,dt=>r.Kt(dt,t.limit).next(mn=>{mn.forEach(bt=>{h=h.add(new Ue(Js(bt.documentKey)))})}))}).next(()=>h)}return de.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,o,u,h,m){const w=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),D=w/(null!=t?t.length:1),M=[];for(let R=0;R<w;++R){const H=t?this.He(t[R/D]):mp,W=r?this.Je(e,H,r[R%D],o):this.Ye(e),fe=u?this.Xe(e,H,u[R%D],h):this.Ye(e+1);M.push(...this.createRange(W,fe,m.map(Fe=>this.Je(e,H,Fe,!0))))}return M}Je(e,t,r,o){const u=new za(e,Ue.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new za(e,Ue.empty(),t,r);return o?u.ke():u}Ye(e){return new za(e,Ue.empty(),mp,mp)}getFieldIndex(e,t){const r=new DI(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{const h=u.filter(m=>r.$e(m));return h.sort((m,w)=>w.fields.length-m.fields.length),h.length>0?h[0]:null})}Ze(e,t){const r=new Vm;for(const o of Ec(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const h=r.Ne(o.kind);mh.fe.Zt(u,h)}return r.Se()}He(e){const t=new Vm;return mh.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new Vm);let u=0;for(const h of Ec(e)){const m=r[u++];for(const w of o)if(this.tn(t,h.fieldPath)&&Zf(m))o=this.en(o,h,m);else{const D=w.Ne(h.kind);mh.fe.Zt(m,D)}}return this.nn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const o=[...e],u=[];for(const h of r.arrayValue.values||[])for(const m of o){const w=new Vm;w.seed(m.Se()),mh.fe.Zt(h,w.Ne(t.kind)),u.push(w)}return u}tn(e,t){return!!e.filters.find(r=>r instanceof Yr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=_p(e),o=yh(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const h=[];return de.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{h.push(function(D,M){const R=M?new Kf(M.sequenceNumber,new qa(xc(M.readTime),new Ue(Js(M.documentKey)),M.largestBatchId)):Kf.empty(),H=D.fields.map(([W,fe])=>new rh(kr.fromServerFormat(W),fe));return new nh(D.indexId,D.collectionGroup,H,R)}(m,w))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:jt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=_p(e),u=yh(e);return this.sn(e).next(h=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>de.forEach(m,w=>{return u.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:h,readTime:Za((H=r).readTime),documentKey:Tr(H.documentKey.path),largestBatchId:H.largestBatchId});var H})))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(o,u)=>{const h=r.get(o.collectionGroup);return(h?de.resolve(h):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),de.forEach(m,w=>this.rn(e,o,w).next(D=>{const M=this.on(u,w);return D.isEqual(M)?de.resolve():this.un(e,u,D,M)}))))})}an(e,t,r){return yp(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Tr(t.key.path)})}cn(e,t,r){return yp(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Tr(t.key.path)])}rn(e,t,r){const o=yp(e);let u=new gn(Mc);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Tr(t.path)])},(h,m)=>{u=u.add(new za(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}on(e,t){let r=new gn(Mc);const o=this.Ze(t,e);if(null==o)return r;const u=Wf(t);if(null!=u){const h=e.data.field(u.fieldPath);if(Zf(h))for(const m of h.arrayValue.values||[])r=r.add(new za(t.indexId,e.key,this.He(m),o))}else r=r.add(new za(t.indexId,e.key,mp,o));return r}un(e,t,r,o){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(h,m,w,D,M){const R=h.getIterator(),H=m.getIterator();let W=Ac(R),fe=Ac(H);for(;W||fe;){let Fe=!1,tt=!1;if(W&&fe){const qt=w(W,fe);qt<0?tt=!0:qt>0&&(Fe=!0)}else null!=W?tt=!0:Fe=!0;Fe?(D(fe),fe=Ac(H)):tt?(M(W),W=Ac(R)):(W=Ac(R),fe=Ac(H))}}(r,o,Mc,h=>{u.push(this.an(e,t,h))},h=>{u.push(this.cn(e,t,h))}),de.waitFor(u)}sn(e){let t=1;return yh(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,m)=>Mc(h,m)).filter((h,m,w)=>!m||0!==Mc(h,w[m-1]));const o=[];o.push(e);for(const h of r){const m=Mc(h,e),w=Mc(h,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(h),o.push(h.ke());else if(w>0)break}o.push(t);const u=[];for(let h=0;h<o.length;h+=2)u.push(IDBKeyRange.bound([o[h].indexId,this.uid,o[h].arrayValue,o[h].directionalValue,""],[o[h+1].indexId,this.uid,o[h+1].arrayValue,o[h+1].directionalValue,""]));return u}}function SI(n){return Lr(n,"collectionParents")}function yp(n){return Lr(n,"indexEntries")}function _p(n){return Lr(n,"indexConfiguration")}function yh(n){return Lr(n,"indexState")}const Um={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ri{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ri(e,Ri.DEFAULT_COLLECTION_PERCENTILE,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xI(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],h=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:h},(M,R,H)=>(m++,H.delete()));u.push(w.next(()=>{wt(1===m)}));const D=[];for(const M of t.mutations){const R=Dv(e,M.key.path,t.batchId);u.push(o.delete(R)),D.push(M.key)}return de.waitFor(u).next(()=>D)}function vp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Qe();e=n.noDocument}return JSON.stringify(e).length}Ri.DEFAULT_COLLECTION_PERCENTILE=10,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ri.DEFAULT=new Ri(41943040,Ri.DEFAULT_COLLECTION_PERCENTILE,Ri.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ri.DISABLED=new Ri(-1,0,0);class Bm{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.hn={}}static Yt(e,t,r,o){wt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Bm(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ju(e).Wt({index:"userMutationsIndex",range:r},(o,u,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Ep(e),h=Ju(e);return h.add({}).next(m=>{wt("number"==typeof m);const w=new _I(m,t,r,o),D=function(H,W,fe){const Fe=fe.baseMutations.map(qt=>dh(H.Jt,qt)),tt=fe.mutations.map(qt=>dh(H.Jt,qt));return{userId:W,batchId:fe.batchId,localWriteTimeMs:fe.localWriteTime.toMillis(),baseMutations:Fe,mutations:tt}}(this.M,this.userId,w),M=[];let R=new gn((H,W)=>jt(H.canonicalString(),W.canonicalString()));for(const H of o){const W=Dv(this.userId,H.key.path,m);R=R.add(H.key.path.popLast()),M.push(h.put(D)),M.push(u.put(W,PC))}return R.forEach(H=>{M.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.hn[m]=w.keys()}),de.waitFor(M).next(()=>w)})}lookupMutationBatch(e,t){return Ju(e).get(t).next(r=>r?(wt(r.userId===this.userId),pi(this.M,r)):null)}ln(e,t){return this.hn[t]?de.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.hn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Ju(e).Wt({index:"userMutationsIndex",range:o},(h,m,w)=>{m.userId===this.userId&&(wt(m.batchId>=r),u=pi(this.M,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ju(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ju(e).qt("userMutationsIndex",t).next(r=>r.map(o=>pi(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Mm(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Ep(e).Wt({range:o},(h,m,w)=>{const[D,M,R]=h,H=Js(M);if(D===this.userId&&t.path.isEqual(H))return Ju(e).get(R).next(W=>{if(!W)throw Qe();wt(W.userId===this.userId),u.push(pi(this.M,W))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gn(jt);const o=[];return t.forEach(u=>{const h=Mm(this.userId,u.path),m=IDBKeyRange.lowerBound(h),w=Ep(e).Wt({range:m},(D,M,R)=>{const[H,W,fe]=D,Fe=Js(W);H===this.userId&&u.path.isEqual(Fe)?r=r.add(fe):R.done()});o.push(w)}),de.waitFor(o).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Mm(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new gn(jt);return Ep(e).Wt({range:h},(w,D,M)=>{const[R,H,W]=w,fe=Js(H);R===this.userId&&r.isPrefixOf(fe)?fe.length===o&&(m=m.add(W)):M.done()}).next(()=>this.fn(e,m))}fn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Ju(e).get(u).next(h=>{if(null===h)throw Qe();wt(h.userId===this.userId),r.push(pi(this.M,h))}))}),de.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return xI(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),de.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Ep(e).Wt({range:r},(u,h,m)=>{if(u[0]===this.userId){const w=Js(u[1]);o.push(w)}else m.done()}).next(()=>{wt(0===o.length)})})}containsKey(e,t){return MI(e,this.userId,t)}_n(e){return HC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function MI(n,e,t){const r=Mm(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return Ep(n).Wt({range:u,jt:!0},(m,w,D)=>{const[M,R,H]=m;M===e&&R===o&&(h=!0),D.done()}).next(()=>h)}function Ju(n){return Lr(n,"mutations")}function Ep(n){return Lr(n,"documentMutations")}function HC(n){return Lr(n,"mutationQueues")}class Xu{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new Xu(0)}static gn(){return new Xu(-1)}}class GC{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new Xu(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>_t.fromTimestamp(new On(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.pn(e,o)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>_h(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return _h(e).Wt((h,m)=>{const w=gp(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>de.waitFor(u)).next(()=>o)}forEachTarget(e,t){return _h(e).Wt((r,o)=>{const u=gp(o);t(u)})}yn(e){return RI(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}pn(e,t){return RI(e).put("targetGlobalKey",t)}In(e,t){return _h(e).put(Pm(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=wc(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return _h(e).Wt({range:o,index:"queryTargetsIndex"},(h,m,w)=>{const D=gp(m);_m(t,D.target)&&(u=D,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Rc(e);return t.forEach(h=>{const m=Tr(h.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,h))}),de.waitFor(o)}removeMatchingKeys(e,t,r){const o=Rc(e);return de.forEach(t,u=>{const h=Tr(u.path);return de.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Rc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Rc(e);let u=rn();return o.Wt({range:r,jt:!0},(h,m,w)=>{const D=Js(h[1]),M=new Ue(D);u=u.add(M)}).next(()=>u)}containsKey(e,t){const r=Tr(t.path),o=IDBKeyRange.bound([r],[J_(r)],!1,!0);let u=0;return Rc(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([h,m],w,D)=>{0!==h&&(u++,D.done())}).next(()=>u>0)}Et(e,t){return _h(e).get(t).next(r=>r?gp(r):null)}}function _h(n){return Lr(n,"targets")}function RI(n){return Lr(n,"targetGlobal")}function Rc(n){return Lr(n,"targetDocuments")}function vh(n){return NI.apply(this,arguments)}function NI(){return NI=(0,_e.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==Tv)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),NI.apply(this,arguments)}function qC([n,e],[t,r]){const o=jt(n,t);return 0===o?jt(e,r):o}class DA{constructor(e){this.En=e,this.buffer=new gn(qC),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();qC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZC{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Re("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,_e.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Yu(o)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield vh(o)}yield t.vn(e)}))}}class jm{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(ps.A);const r=new DA(t);return this.Sn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Sn.Cn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(Um)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Um):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,o,u,h,m,w,D;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,h=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(D=Date.now(),Y_()<=ku.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-M}ms\n\tDetermined least recently used ${o} in `+(m-h)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${R} documents in `+(D-w)+`ms\nTotal Duration: ${D-M}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}class zC{constructor(e,t){this.db=e,this.garbageCollector=new jm(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,o)=>t(o))}addReference(e,t,r){return $m(e,r)}removeReference(e,t,r){return $m(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return $m(e,t)}Mn(e,t){return function(r,o){let u=!1;return HC(r).zt(h=>MI(r,h,o).next(m=>(m&&(u=!0),de.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.kn(e,(h,m)=>{if(m<=t){const w=this.Mn(e,h).next(D=>{if(!D)return u++,r.getEntry(e,h).next(()=>(r.removeEntry(h,_t.min()),Rc(e).delete([0,Tr(h.path)])))});o.push(w)}}).next(()=>de.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return $m(e,t)}kn(e,t){const r=Rc(e);let o,u=ps.A;return r.Wt({index:"documentTargetsIndex"},([h,m],{path:w,sequenceNumber:D})=>{0===h?(u!==ps.A&&t(new Ue(Js(o)),u),u=D,o=w):u=ps.A}).next(()=>{u!==ps.A&&t(new Ue(Js(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $m(n,e){return Rc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Tr(e.path),sequenceNumber:r}));var r}class Ov{constructor(){this.changes=new No(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Nc{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wa(e).put(r)}removeEntry(e,t,r){return Wa(e).delete(function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Om(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=Cn.newInvalidDocument(t);return Wa(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(wp(t))},(o,u)=>{r=this.Fn(t,u)}).next(()=>r)}$n(e,t){let r={size:0,document:Cn.newInvalidDocument(t)};return Wa(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(wp(t))},(o,u)=>{r={document:this.Fn(t,u),size:vp(u)}}).next(()=>r)}getEntries(e,t){let r=Qs();return this.Bn(e,t,(o,u)=>{const h=this.Fn(o,u);r=r.insert(o,h)}).next(()=>r)}Ln(e,t){let r=Qs(),o=new er(Ue.comparator);return this.Bn(e,t,(u,h)=>{const m=this.Fn(u,h);r=r.insert(u,m),o=o.insert(u,vp(h))}).next(()=>({documents:r,Un:o}))}Bn(e,t,r){if(t.isEmpty())return de.resolve();let o=new gn(qm);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(wp(o.first()),wp(o.last())),h=o.getIterator();let m=h.getNext();return Wa(e).Wt({index:"documentKeyIndex",range:u},(w,D,M)=>{const R=Ue.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;m&&qm(m,R)<0;)r(m,null),m=h.getNext();m&&m.isEqual(R)&&(r(m,D),m=h.hasNext()?h.getNext():null),m?M.Ut(wp(m)):M.done()}).next(()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Om(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wa(e).qt(IDBKeyRange.bound(o,u,!0)).next(h=>{let m=Qs();for(const w of h){const D=this.Fn(Ue.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(D.key,D)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=Qs();const h=Gm(t,r),m=Gm(t,qa.max());return Wa(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,m,!0)},(w,D,M)=>{const R=this.Fn(Ue.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(R.key,R),u.size===o&&M.done()}).next(()=>u)}newChangeBuffer(e){return new OI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Hm(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}On(e,t){return Hm(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function VC(n,e){let t;if(e.document)t=oI(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ue.fromSegments(e.noDocument.path),o=xc(e.noDocument.readTime);t=Cn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Qe();{const r=Ue.fromSegments(e.unknownDocument.path),o=xc(e.unknownDocument.version);t=Cn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new On(r[0],r[1]);return _t.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(_t.min()))return r}return Cn.newInvalidDocument(e)}}class OI extends Ov{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new No(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new gn((u,h)=>jt(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const m=this.Gn.get(u);if(t.push(this.qn.removeEntry(e,u,m.readTime)),h.isValidDocument()){const w=UC(this.qn.M,h);o=o.add(u.path.popLast()),r+=vp(w)-m.size,t.push(this.qn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=UC(this.qn.M,h.convertToNoDocument(_t.min()));t.push(this.qn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.qn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:o})=>(o.forEach((u,h)=>{this.Gn.set(u,{size:h,readTime:r.get(u).readTime})}),r))}}function Hm(n){return Lr(n,"remoteDocumentGlobal")}function Wa(n){return Lr(n,"remoteDocumentsV14")}function wp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Gm(n,e){const t=e.documentKey.path.toArray();return[n,Om(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function qm(n,e){const t=n.path.length-e.path.length;return 0!==t?t:Ue.comparator(n,e)}class Zm{constructor(e){this.M=e}kt(e,t,r,o){const u=new pp("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dI,{unique:!0}),m.createObjectStore("documentMutations"),WC(e),function(m){m.createObjectStore("remoteDocuments")}(e));let h=de.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),WC(e)),h=h.next(()=>function(m){const w=m.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",D)}(u))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(m,w){return w.store("mutations").qt().next(D=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dI,{unique:!0});const M=w.store("mutations"),R=D.map(H=>M.put(H));return de.waitFor(R)})}(e,u))),h=h.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Kn(u))),r<6&&o>=6&&(h=h.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(u)))),r<7&&o>=7&&(h=h.next(()=>this.jn(u))),r<8&&o>=8&&(h=h.next(()=>this.Wn(e,u))),r<9&&o>=9&&(h=h.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(h=h.next(()=>this.zn(u))),r<11&&o>=11&&(h=h.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(h=h.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:vA});w.createIndex("collectionPathOverlayIndex",EA,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",wA,{unique:!1})}(e)})),r<13&&o>=13&&(h=h.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:hI});w.createIndex("documentKeyIndex",fI),w.createIndex("collectionGroupIndex",pI)}(e)).next(()=>this.Hn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(h=h.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:mI}).createIndex("sequenceNumberIndex",mA,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:yA}).createIndex("documentKeyIndex",_A,{unique:!1})}(e)})),h}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=vp(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>de.forEach(o,u=>{const h=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",h).next(m=>de.forEach(m,w=>{wt(w.userId===u.userId);const D=pi(this.M,w);return xI(e,u.userId,D).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((h,m)=>{const w=new Wt(h),D=[0,Tr(w)];u.push(t.get(D).next(M=>M?de.resolve():t.put({targetId:0,path:Tr(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>de.waitFor(u))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:gA});const r=t.store("collectionParents"),o=new TI,u=h=>{if(o.add(h)){const m=h.lastSegment(),w=h.popLast();return r.put({collectionId:m,parent:Tr(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(h,m)=>{const w=new Wt(h);return u(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([h,m,w],D)=>{const M=Js(m);return u(M.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=gp(o),h=Pm(this.M,u);return t.put(h)})}Hn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,h)=>{const m=t.store("remoteDocumentsV14"),w=(D=h,D.document?new Ue(Wt.fromString(D.document.name).popFirst(5)):D.noDocument?Ue.fromSegments(D.noDocument.path):D.unknownDocument?Ue.fromSegments(D.unknownDocument.path):Qe()).path.toArray();var D;const M={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(m.put(M))}).next(()=>de.waitFor(o))}}function WC(n){n.createObjectStore("targetDocuments",{keyPath:kC}).createIndex("documentTargetsIndex",FC,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",gI,{unique:!0}),n.createObjectStore("targetGlobal")}const PI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class kI{constructor(e,t,r,o,u,h,m,w,D,M,R=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=u,this.window=h,this.document=m,this.Yn=D,this.Xn=M,this.Zn=R,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=H=>Promise.resolve(),!kI.vt())throw new Te(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zC(this,o),this.cs=t+"main",this.M=new wI(w),this.hs=new la(this.cs,this.Zn,new Zm(this.M)),this.ls=new GC(this.referenceDelegate,this.M),this.fs=new Nc(this.M),this.ds=new II,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===M&&dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Te(ae.FAILED_PRECONDITION,PI);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new ps(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,_e.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ip(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(Yu(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return zm(e).get("owner").next(t=>de.resolve(this.bs(t)))}Ps(e){return Ip(e).delete(this.clientId)}Vs(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Lr(r,"clientMetadata");return o.qt().next(u=>{const h=e.Ss(u,18e5),m=u.filter(w=>-1===h.indexOf(w));return de.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?de.resolve(!0):zm(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Te(ae.FAILED_PRECONDITION,PI);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ip(e).qt().next(r=>void 0===this.Ss(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Nm(t,ps.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>Ip(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return Bm.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new AI(e)}getDocumentOverlayCache(e){return Fm.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(h=this.Zn)?bA:13===h?fp:12===h?IA:11===h?LC:void Qe();var h;let m;return this.hs.runTransaction(e,o,u,w=>(m=new Nm(w,this.ts?this.ts.next():ps.A),"readwrite-primary"===t?this.Ts(m).next(D=>!!D||this.Es(m)).next(D=>{if(!D)throw dr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Te(ae.FAILED_PRECONDITION,Tv);return r(m)}).next(D=>this.Rs(m).next(()=>D)):this.Fs(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Fs(e){return zm(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Te(ae.FAILED_PRECONDITION,PI)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zm(e).put("owner",t)}static vt(){return la.vt()}As(e){const t=zm(e);return t.get("owner").next(r=>this.bs(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(dr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,Bt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return dr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){dr("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zm(n){return Lr(n,"owner")}function Ip(n){return Lr(n,"clientMetadata")}function Pv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class KC{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}Us(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return Ue.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Qs(e,t.path):uv(t)?this.js(e,t,r):this.Ws(e,t,r);var o}Qs(e,t){return this.Bs(e,new Ue(t)).next(r=>{let o=ap();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}js(e,t,r){const o=t.collectionGroup;let u=ap();return this.indexManager.getCollectionParents(e,o).next(h=>de.forEach(h,m=>{const w=(D=t,M=m.child(o),new ms(M,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,M;return this.Ws(e,w,r).next(D=>{D.forEach((M,R)=>{u=u.insert(M,R)})})}).next(()=>u))}Ws(e,t,r){let o;return this.fs.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const h of u)for(const m of h.mutations){const w=m.key;let D=o.get(w);null==D&&(D=Cn.newInvalidDocument(w),o=o.insert(w,D)),fv(m,D,h.localWriteTime),D.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((u,h)=>{Uw(t,h)||(o=o.remove(u))}),o))}}class kv{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=o}static Js(e,t){let r=rn(),o=rn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new kv(e,t.fromCache,r,o)}}class FI{Ys(e){this.Xs=e}Ks(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(_t.min())?this.Zs(e,t):this.Xs.qs(e,o).next(u=>{const h=this.ti(t,u);return(Jf(t)||wm(t))&&this.ei(t.limitType,h,o,r)?this.Zs(e,t):(Y_()<=ku.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zu(t)),this.Xs.Ks(e,t,Nw(r,-1)).next(m=>(h.forEach(w=>{m=m.insert(w.key,w)}),m)))});var u}ti(e,t){let r=new gn(Bw(e));return t.forEach((o,u)=>{Uw(e,u)&&(r=r.add(u))}),r}ei(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Zs(e,t){return Y_()<=ku.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",zu(t)),this.Xs.Ks(e,t,qa.min())}}class LI{constructor(e,t,r,o){this.persistence=e,this.ni=t,this.M=o,this.si=new er(jt),this.ii=new No(u=>wc(u),_m),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new KC(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function Fv(n,e,t,r){return new LI(n,e,t,r)}function Lv(n,e){return Vv.apply(this,arguments)}function Vv(){return Vv=(0,_e.Z)(function*(n,e){const t=He(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.$s.getAllMutationBatches(r).next(u=>(o=u,t.ui(e),t.$s.getAllMutationBatches(r))).next(u=>{const h=[],m=[];let w=rn();for(const D of o){h.push(D.batchId);for(const M of D.mutations)w=w.add(M.key)}for(const D of u){m.push(D.batchId);for(const M of D.mutations)w=w.add(M.key)}return t.ai.qs(r,w).next(D=>({ci:D,removedBatchIds:h,addedBatchIds:m}))})})}),Vv.apply(this,arguments)}function YC(n,e){const t=He(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.oi.newChangeBuffer({trackRemovals:!0});return function(h,m,w,D){const M=w.batch,R=M.keys();let H=de.resolve();return R.forEach(W=>{H=H.next(()=>D.getEntry(m,W)).next(fe=>{const Fe=w.docVersions.get(W);wt(null!==Fe),fe.version.compareTo(Fe)<0&&(M.applyToRemoteDocument(fe,w),fe.isValidDocument()&&(fe.setReadTime(w.commitVersion),D.addEntry(fe)))})}),H.next(()=>h.$s.removeMutationBatch(m,M))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,o))})}function Uv(n){const e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function Bv(n,e){const t=He(n),r=e.snapshotVersion;let o=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.oi.newChangeBuffer({trackRemovals:!0});o=t.si;const m=[];e.targetChanges.forEach((D,M)=>{const R=o.get(M);if(!R)return;m.push(t.ls.removeMatchingKeys(u,D.removedDocuments,M).next(()=>t.ls.addMatchingKeys(u,D.addedDocuments,M)));let H=R.withSequenceNumber(u.currentSequenceNumber);var W,fe,Fe;e.targetMismatches.has(M)?H=H.withResumeToken(Dr.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):D.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(D.resumeToken,r)),o=o.insert(M,H),fe=H,Fe=D,(0===(W=R).resumeToken.approximateByteSize()||fe.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||Fe.addedDocuments.size+Fe.modifiedDocuments.size+Fe.removedDocuments.size>0)&&m.push(t.ls.updateTargetData(u,H))});let w=Qs();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,D))}),m.push(QC(u,h,e.documentUpdates).next(D=>{w=D})),!r.isEqual(_t.min())){const D=t.ls.getLastRemoteSnapshotVersion(u).next(M=>t.ls.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(D)}return de.waitFor(m).next(()=>h.apply(u)).next(()=>t.ai.Gs(u,w)).next(()=>w)}).then(u=>(t.si=o,u))}function QC(n,e,t){let r=rn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Qs();return t.forEach((h,m)=>{const w=o.get(h);m.isNoDocument()&&m.version.isEqual(_t.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Re("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",m.version)}),u})}function VI(n,e){const t=He(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function el(n,e){const t=He(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.ls.getTargetData(r,e).next(u=>u?(o=u,de.resolve(o)):t.ls.allocateTargetId(r).next(h=>(o=new Qu(e,h,0,r.currentSequenceNumber),t.ls.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.si.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function Eh(n,e,t){return jv.apply(this,arguments)}function jv(){return jv=(0,_e.Z)(function*(n,e,t){const r=He(n),o=r.si.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Yu(h))throw h;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.si=r.si.remove(e),r.ii.delete(o.target)}),jv.apply(this,arguments)}function $v(n,e,t){const r=He(n);let o=_t.min(),u=rn();return r.persistence.runTransaction("Execute query","readonly",h=>function(m,w,D){const M=He(m),R=M.ii.get(D);return void 0!==R?de.resolve(M.si.get(R)):M.ls.getTargetData(w,D)}(r,h,Ys(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(h,m.targetId).next(w=>{u=w})}).next(()=>r.ni.Ks(h,e,t?o:_t.min(),t?u:rn())).next(m=>(UI(r,cv(e),m),{documents:m,hi:u})))}function JC(n,e){const t=He(n),r=He(t.ls),o=t.si.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(h=>h?h.target:null))}function XC(n,e){const t=He(n),r=t.ri.get(e)||_t.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.oi.getAllFromCollectionGroup(o,e,Nw(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(UI(t,e,o),o))}function UI(n,e,t){let r=_t.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ri.set(e,r)}function BI(){return BI=(0,_e.Z)(function*(n,e,t,r){const o=He(n);let u=rn(),h=Qs();for(const D of t){const M=e.li(D.metadata.name);D.document&&(u=u.add(M));const R=e.fi(D);R.setReadTime(e.di(D.metadata.readTime)),h=h.insert(M,R)}const m=o.oi.newChangeBuffer({trackRemovals:!0}),w=yield el(o,(D=r,Ys(Cc(Wt.fromString(`__bundle__/docs/${D}`)))));var D;return o.persistence.runTransaction("Apply bundle documents","readwrite",D=>QC(D,m,h).next(M=>(m.apply(D),M)).next(M=>o.ls.removeMatchingKeysForTargetId(D,w.targetId).next(()=>o.ls.addMatchingKeys(D,u,w.targetId)).next(()=>o.ai.Gs(D,M)).next(()=>M)))}),BI.apply(this,arguments)}function TA(n,e){return jI.apply(this,arguments)}function jI(){return jI=(0,_e.Z)(function*(n,e,t=rn()){const r=yield el(n,Ys(Mv(e.bundledQuery))),o=He(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const h=Un(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.ds.saveNamedQuery(u,e);const m=r.withResumeToken(Dr.EMPTY_BYTE_STRING,h);return o.si=o.si.insert(m.targetId,m),o.ls.updateTargetData(u,m).next(()=>o.ls.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.ls.addMatchingKeys(u,t,r.targetId)).next(()=>o.ds.saveNamedQuery(u,e))})}),jI.apply(this,arguments)}class AA{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return de.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Un(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:Mv(r.bundledQuery),readTime:Un(r.readTime)}),de.resolve();var r}}class SA{constructor(){this.overlays=new er(Ue.comparator),this.mi=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.mi.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.mi.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const o=Sc(),u=t.length+1,h=new Ue(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const w=m.getNext().value,D=w.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return de.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new er((D,M)=>D-M);const h=this.overlays.getIterator();for(;h.hasNext();){const D=h.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let M=u.get(D.largestBatchId);null===M&&(M=Sc(),u=u.insert(D.largestBatchId,M)),M.set(D.getKey(),D)}}const m=Sc(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((D,M)=>m.set(D,M)),!(m.size()>=o)););return de.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const h=this.mi.get(o.largestBatchId).delete(r.key);this.mi.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new EI(t,r));let u=this.mi.get(t);void 0===u&&(u=rn(),this.mi.set(t,u)),this.mi.set(t,u.add(r.key))}}class Hv{constructor(){this.gi=new gn(Qr.yi),this.pi=new gn(Qr.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new Qr(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new Qr(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new Ue(new Wt([])),r=new Qr(t,e),o=new Qr(t,e+1),u=[];return this.pi.forEachInRange([r,o],h=>{this.Ei(h),u.push(h.key)}),u}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Ue(new Wt([])),r=new Qr(t,e),o=new Qr(t,e+1);let u=rn();return this.pi.forEachInRange([r,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new Qr(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Qr{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Ue.comparator(e.key,t.key)||jt(e.Vi,t.Vi)}static Ii(e,t){return jt(e.Vi,t.Vi)||Ue.comparator(e.key,t.key)}}class xA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new gn(Qr.yi)}checkEmpty(e){return de.resolve(0===this.$s.length)}addMutationBatch(e,t,r,o){const u=this.vi;this.vi++;const h=new _I(u,t,r,o);this.$s.push(h);for(const m of o)this.Si=this.Si.add(new Qr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return de.resolve(h)}lookupMutationBatch(e,t){return de.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Ci(t+1),u=o<0?0:o;return de.resolve(this.$s.length>u?this.$s[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return de.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Qr(t,0),o=new Qr(t,Number.POSITIVE_INFINITY),u=[];return this.Si.forEachInRange([r,o],h=>{const m=this.Di(h.Vi);u.push(m)}),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gn(jt);return t.forEach(o=>{const u=new Qr(o,0),h=new Qr(o,Number.POSITIVE_INFINITY);this.Si.forEachInRange([u,h],m=>{r=r.add(m.Vi)})}),de.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ue.isDocumentKey(u)||(u=u.child(""));const h=new Qr(new Ue(u),0);let m=new gn(jt);return this.Si.forEachWhile(w=>{const D=w.key.path;return!!r.isPrefixOf(D)&&(D.length===o&&(m=m.add(w.Vi)),!0)},h),de.resolve(this.xi(m))}xi(e){const t=[];return e.forEach(r=>{const o=this.Di(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){wt(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return de.forEach(t.mutations,o=>{const u=new Qr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new Qr(t,0),o=this.Si.firstAfterOrEqual(r);return de.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return de.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class MA{constructor(e){this.ki=e,this.docs=new er(Ue.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,h=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=Qs();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Cn.newInvalidDocument(o))}),de.resolve(r)}getAllFromCollection(e,t,r){let o=Qs();const u=new Ue(t.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:w}}=h.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Ow(sv(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return de.resolve(o)}getAllFromCollectionGroup(e,t,r,o){Qe()}Mi(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new RA(this)}getSize(e){return de.resolve(this.size)}}class RA extends Ov{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.qn.addEntry(e,o)):this.qn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class i{constructor(e){this.persistence=e,this.Oi=new No(t=>wc(t),_m),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.Fi=0,this.$i=new Hv,this.targetCount=0,this.Bi=Xu.mn()}forEachTarget(e,t){return this.Oi.forEach((r,o)=>t(o)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),de.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new Xu(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.In(t),de.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Oi.forEach((h,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Oi.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),de.waitFor(u).next(()=>o)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),de.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.$i.containsKey(t))}}class s{constructor(e,t){this.Li={},this.overlays={},this.ts=new ps(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new i(this),this.indexManager=new $C,this.fs=new MA(r=>this.referenceDelegate.Ui(r)),this.M=new wI(t),this.ds=new AA(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new xA(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const o=new a(this.ts.next());return this.referenceDelegate.qi(),r(o).next(u=>this.referenceDelegate.Gi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ki(e,t){return de.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class a extends Rm{constructor(e){super(),this.currentSequenceNumber=e}}class l{constructor(e){this.persistence=e,this.Qi=new Hv,this.ji=null}static Wi(e){return new l(e)}get zi(){if(this.ji)return this.ji;throw Qe()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(o=>this.zi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.zi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.zi,r=>{const o=Ue.fromPath(r);return this.Hi(e,o).next(u=>{u||t.removeEntry(o,_t.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return de.or([()=>de.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function c(n,e){return`firestore_clients_${n}_${e}`}function p(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function _(n,e){return`firestore_targets_${n}_${e}`}class E{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let u,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(u=new Te(o.error.code,o.error.message))),h?new E(e,t,o.state,u):(dr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class I{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Te(r.error.code,r.error.message))),u?new I(e,r.state,o):(dr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class T{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Tm();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=tv(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return o?new T(e,u):(dr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class S{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new S(t.clientId,t.onlineState):(dr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class P{constructor(){this.activeTargetIds=Tm()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class V{constructor(e,t,r,o,u){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new er(jt),this.started=!1,this.ir=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=c(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new P),this.ar=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Os();for(const o of t){if(o===e.tr)continue;const u=e.getItem(c(e.persistenceKey,o));if(u){const h=T.Ji(o,u);h&&(e.sr=e.sr.insert(h.clientId,h))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(_(this.persistenceKey,e));if(r){const o=I.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const o=t.Vr(r.key,r.newValue);if(o)return t.vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(u){let h=ps.A;if(null!=u)try{const m=JSON.parse(u);wt("number"==typeof m),h=m}catch(m){dr("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(r.newValue);o!==ps.A&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new E(this.currentUser,e,t,r),u=p(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Yi())}pr(e){const t=p(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=_(this.persistenceKey,e),u=new I(e,t,r);this.setItem(o,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return T.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),o=Number(r[1]);return E.Ji(new Pr(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return I.Ji(o,t)}wr(e){return S.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),u=this.gr(r),h=[],m=[];return u.forEach(w=>{o.has(w)||h.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Or(h,m).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Tm();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class z{constructor(){this.Fr=new P,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new P,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class me{Br(e){}shutdown(){}}class Pe{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const je={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Xe{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Ie extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,u){const h=this.oo(e,t);Re("RestConnection","Sending: ",h,r);const m={};return this.uo(m,o,u),this.ao(e,h,m,r).then(w=>(Re("RestConnection","Received: ",w),w),w=>{throw Bf("RestConnection",`${e} failed with error: `,w,"url: ",h,"request:",r),w})}co(e,t,r,o,u){return this.ro(e,t,r,o,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+_c,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}oo(e,t){return`${this.so}/v1/${t}:${je[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,o){return new Promise((u,h)=>{const m=new fw;m.listenOnce(Zn.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Yd.NO_ERROR:const D=m.getResponseJson();Re("Connection","XHR received:",JSON.stringify(D)),u(D);break;case Yd.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),h(new Te(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Yd.HTTP_ERROR:const M=m.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',M,"response text:",m.getResponseText()),M>0){const R=m.getResponseJson().error;if(R&&R.status&&R.message){const H=function(W){const fe=W.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(fe)>=0?fe:ae.UNKNOWN}(R.status);h(new Te(H,R.message))}else h(new Te(ae.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Te(ae.UNAVAILABLE,"Connection failed."));break;default:Qe()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=aC(),h=mm(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new uC({})),this.uo(m.initMessageHeaders,t,r),(0,Bt.uI)()||(0,Bt.b$)()||(0,Bt.d)()||(0,Bt.w1)()||(0,Bt.Mn)()||(0,Bt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Re("Connection","Creating WebChannel: "+w,m);const D=u.createWebChannel(w,m);let M=!1,R=!1;const H=new Xe({jr:fe=>{R?Re("Connection","Not sending because WebChannel is closed:",fe):(M||(Re("Connection","Opening WebChannel transport."),D.open(),M=!0),Re("Connection","WebChannel sending:",fe),D.send(fe))},Wr:()=>D.close()}),W=(fe,Fe,tt)=>{fe.listen(Fe,qt=>{try{tt(qt)}catch(dt){setTimeout(()=>{throw dt},0)}})};return W(D,ym.EventType.OPEN,()=>{R||Re("Connection","WebChannel transport opened.")}),W(D,ym.EventType.CLOSE,()=>{R||(R=!0,Re("Connection","WebChannel transport closed"),H.eo())}),W(D,ym.EventType.ERROR,fe=>{R||(R=!0,Bf("Connection","WebChannel transport errored:",fe),H.eo(new Te(ae.UNAVAILABLE,"The operation could not be completed")))}),W(D,ym.EventType.MESSAGE,fe=>{var Fe;if(!R){const tt=fe.data[0];wt(!!tt);const qt=tt,dt=qt.error||(null===(Fe=qt[0])||void 0===Fe?void 0:Fe.error);if(dt){Re("Connection","WebChannel received error:",dt);const mn=dt.status;let bt=function(Ht){const ol=hr[Ht];if(void 0!==ol)return op(ol)}(mn),$t=dt.message;void 0===bt&&(bt=ae.INTERNAL,$t="Unknown error status: "+mn+" with message "+dt.message),R=!0,H.eo(new Te(bt,$t)),D.close()}else Re("Connection","WebChannel received:",tt),H.no(tt)}}),W(h,lA.STAT_EVENT,fe=>{fe.stat===W_.PROXY?Re("Connection","Detected buffering proxy"):fe.stat===W_.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.Zr()},0),H}}function lt(){return"undefined"!=typeof window?window:null}function kt(){return"undefined"!=typeof document?document:null}function Yt(n){return new SC(n,!0)}class Ni{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=o,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class tl{constructor(e,t,r,o,u,h,m,w){this.Jn=e,this.Ao=r,this.Ro=o,this.bo=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Ni(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,_e.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,_e.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(dr(t.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new Te(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,_e.Z)(function*(){e.state=0,e.start()}))}qo(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Gv extends tl{constructor(e,t,r,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.M=u}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function aI(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Qe(),o=e.targetChange.targetIds||[],u=function(w,D){return w.N?(wt(void 0===D||"string"==typeof D),Dr.fromBase64String(D||"")):(wt(void 0===D||D instanceof Uint8Array),Dr.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(w){const D=void 0===w.code?ae.UNKNOWN:op(w.code);return new Te(D,w.message||"")}(h);t=new gv(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Zi(n,r.document.name),u=Un(r.document.updateTime),h=new fi({mapValue:{fields:r.document.fields}}),m=Cn.newFoundDocument(o,u,h);t=new cp(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Zi(n,r.document),u=r.readTime?Un(r.readTime):_t.min(),h=Cn.newNoDocument(o,u);t=new cp([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=Zi(n,r.document);t=new cp([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Qe();{const r=e.filter,u=new sp(r.count||0);t=new Am(r.targetId,u)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return _t.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?_t.min():u.readTime?Un(u.readTime):_t.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=dp(this.M),t.addTarget=function(o,u){let h;const m=u.target;return h=vm(m)?{documents:xC(o,m)}:{query:Iv(o,m)},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?h.resumeToken=rI(o,u.resumeToken):u.snapshotVersion.compareTo(_t.min())>0&&(h.readTime=ch(o,u.snapshotVersion.toTimestamp())),h}(this.M,e);const r=function lI(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=dp(this.M),t.removeTarget=e,this.Oo(t)}}class qv extends tl{constructor(e,t,r,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.M=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function wv(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,o){let u=Un(r.updateTime?r.updateTime:o);return u.isEqual(_t.min())&&(u=Un(o)),new Zw(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Un(e.commitTime);return this.listener.Jo(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=dp(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>dh(this.M,r))};this.Oo(t)}}class Zv extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.Zo=!1}tu(){if(this.Zo)throw new Te(ae.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ro(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(ae.UNKNOWN,o.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(ae.UNKNOWN,o.toString())})}terminate(){this.Zo=!0}}class zv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(dr(t),this.su=!1):Re("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Wv{constructor(e,t,r,o,u){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(m=>{r.enqueueAndForget((0,_e.Z)(function*(){var w;wh(h)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,_e.Z)(function*(D){const M=He(D);M.lu.add(4),yield nl(M),M._u.set("Unknown"),M.lu.delete(4),yield Oc(M)}),function(D){return w.apply(this,arguments)})(h))}))}),this._u=new zv(r,o)}}function Oc(n){return bp.apply(this,arguments)}function bp(){return bp=(0,_e.Z)(function*(n){if(wh(n))for(const e of n.fu)yield e(!0)}),bp.apply(this,arguments)}function nl(n){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,_e.Z)(function*(n){for(const e of n.fu)yield e(!1)}),Cp.apply(this,arguments)}function $I(n,e){const t=He(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),rD(t)?nD(t):Km(t).Co()&&tD(t,e))}function Kv(n,e){const t=He(n),r=Km(t);t.hu.delete(e),r.Co()&&NA(t,e),0===t.hu.size&&(r.Co()?r.ko():wh(t)&&t._u.set("Unknown"))}function tD(n,e){n.wu.Z(e.targetId),Km(n).Qo(e)}function NA(n,e){n.wu.Z(e),Km(n).jo(e)}function nD(n){n.wu=new Xw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),Km(n).start(),n._u.iu()}function rD(n){return wh(n)&&!Km(n).Do()&&n.hu.size>0}function wh(n){return 0===He(n).lu.size}function OA(n){n.wu=void 0}function Vx(n){return iD.apply(this,arguments)}function iD(){return iD=(0,_e.Z)(function*(n){n.hu.forEach((e,t)=>{tD(n,e)})}),iD.apply(this,arguments)}function Ux(n,e){return sD.apply(this,arguments)}function sD(){return sD=(0,_e.Z)(function*(n,e){OA(n),rD(n)?(n._u.uu(e),nD(n)):n._u.set("Unknown")}),sD.apply(this,arguments)}function Bx(n,e,t){return oD.apply(this,arguments)}function oD(){return oD=(0,_e.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof gv&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(o,u){const h=u.cause;for(const m of u.targetIds)o.hu.has(m)&&(yield o.remoteSyncer.rejectListen(m,h),o.hu.delete(m),o.wu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield HI(n,r)}else if(e instanceof cp?n.wu.ut(e):e instanceof Am?n.wu._t(e):n.wu.ht(e),!t.isEqual(_t.min()))try{const r=yield Uv(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const h=o.wu.yt(u);return h.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const D=o.hu.get(w);D&&o.hu.set(w,D.withResumeToken(m.resumeToken,u))}}),h.targetMismatches.forEach(m=>{const w=o.hu.get(m);if(!w)return;o.hu.set(m,w.withResumeToken(Dr.EMPTY_BYTE_STRING,w.snapshotVersion)),NA(o,m);const D=new Qu(w.target,m,1,w.sequenceNumber);tD(o,D)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield HI(n,r)}var r}),oD.apply(this,arguments)}function HI(n,e,t){return aD.apply(this,arguments)}function aD(){return aD=(0,_e.Z)(function*(n,e,t){if(!Yu(e))throw e;n.lu.add(1),yield nl(n),n._u.set("Offline"),t||(t=()=>Uv(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Oc(n)}))}),aD.apply(this,arguments)}function PA(n,e){return e().catch(t=>HI(n,t,e))}function Wm(n){return uD.apply(this,arguments)}function uD(){return uD=(0,_e.Z)(function*(n){const e=He(n),t=Ih(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;jx(e);)try{const o=yield VI(e.localStore,r);if(null===o){0===e.cu.length&&t.ko();break}r=o.batchId,$x(e,o)}catch(o){yield HI(e,o)}kA(e)&&FA(e)}),uD.apply(this,arguments)}function jx(n){return wh(n)&&n.cu.length<10}function $x(n,e){n.cu.push(e);const t=Ih(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function kA(n){return wh(n)&&!Ih(n).Do()&&n.cu.length>0}function FA(n){Ih(n).start()}function Hx(n){return lD.apply(this,arguments)}function lD(){return lD=(0,_e.Z)(function*(n){Ih(n).Xo()}),lD.apply(this,arguments)}function Gx(n){return cD.apply(this,arguments)}function cD(){return cD=(0,_e.Z)(function*(n){const e=Ih(n);for(const t of n.cu)e.Ho(t.mutations)}),cD.apply(this,arguments)}function qx(n,e,t){return dD.apply(this,arguments)}function dD(){return dD=(0,_e.Z)(function*(n,e,t){const r=n.cu.shift(),o=vI.from(r,e,t);yield PA(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Wm(n)}),dD.apply(this,arguments)}function Zx(n,e){return hD.apply(this,arguments)}function hD(){return hD=(0,_e.Z)(function*(n,e){var t;e&&Ih(n).zo&&(yield(t=(0,_e.Z)(function*(r,o){if(Yw(u=o.code)&&u!==ae.ABORTED){const h=r.cu.shift();Ih(r).No(),yield PA(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield Wm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),kA(n)&&FA(n)}),hD.apply(this,arguments)}function LA(n,e){return fD.apply(this,arguments)}function fD(){return fD=(0,_e.Z)(function*(n,e){const t=He(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=wh(t);t.lu.add(3),yield nl(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Oc(t)}),fD.apply(this,arguments)}function pD(n,e){return gD.apply(this,arguments)}function gD(){return gD=(0,_e.Z)(function*(n,e){const t=He(n);e?(t.lu.delete(2),yield Oc(t)):e||(t.lu.add(2),yield nl(t),t._u.set("Unknown"))}),gD.apply(this,arguments)}function Km(n){return n.mu||(n.mu=function(e,t,r){const o=He(e);return o.tu(),new Gv(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:Vx.bind(null,n),Jr:Ux.bind(null,n),Ko:Bx.bind(null,n)}),n.fu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.mu.No(),rD(n)?nD(n):n._u.set("Unknown")):(yield n.mu.stop(),OA(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Ih(n){return n.gu||(n.gu=function(e,t,r){const o=He(e);return o.tu(),new qv(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:Hx.bind(null,n),Jr:Zx.bind(null,n),Yo:Gx.bind(null,n),Jo:qx.bind(null,n)}),n.fu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.gu.No(),yield Wm(n)):(yield n.gu.stop(),n.cu.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class mD{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,u){const h=Date.now()+r,m=new mD(e,t,h,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Te(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ym(n,e){if(dr("AsyncQueue",`${e}: ${n}`),Yu(n))return new Te(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class Qm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ue.comparator(t.key,r.key):(t,r)=>Ue.comparator(t.key,r.key),this.keyedMap=ap(),this.sortedSet=new er(this.comparator)}static emptySet(e){return new Qm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Qm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class VA{constructor(){this.yu=new er(Ue.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Qe():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Jm{constructor(e,t,r,o,u,h,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new Jm(e,t,Qm.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ua(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class zx{constructor(){this.Iu=void 0,this.listeners=[]}}class Wx{constructor(){this.queries=new No(e=>lv(e),ua),this.onlineState="Unknown",this.Tu=new Set}}function yD(n,e){return _D.apply(this,arguments)}function _D(){return _D=(0,_e.Z)(function*(n,e){const t=He(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new zx),o)try{u.Iu=yield t.onListen(r)}catch(h){const m=Ym(h,`Initialization of query '${zu(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&wD(t)}),_D.apply(this,arguments)}function vD(n,e){return ED.apply(this,arguments)}function ED(){return ED=(0,_e.Z)(function*(n,e){const t=He(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const h=u.listeners.indexOf(e);h>=0&&(u.listeners.splice(h,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),ED.apply(this,arguments)}function Kx(n,e){const t=He(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const m of h.listeners)m.Au(o)&&(r=!0);h.Iu=o}}r&&wD(t)}function Yx(n,e,t){const r=He(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function wD(n){n.Tu.forEach(e=>{e.next()})}class ID{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Jm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Jm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class Qx{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class UA{constructor(e){this.M=e}li(e){return Zi(this.M,e)}fi(e){return e.metadata.exists?oI(this.M,e.document,!1):Cn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Un(e)}}class Jx{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=BA(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Wt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new UA(this.M);for(const o of e)if(o.metadata.queries){const u=r.li(o.metadata.name);for(const h of o.metadata.queries){const m=(t.get(h)||rn()).add(u);t.set(h,m)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function eD(n,e,t,r){return BI.apply(this,arguments)}(e.localStore,new UA(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield TA(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function BA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class jA{constructor(e){this.key=e}}class $A{constructor(e){this.key=e}}class HA{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=rn(),this.mutatedKeys=rn(),this.Lu=Bw(e),this.Uu=new Qm(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new VA,o=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const w=Jf(this.query)&&o.size===this.query.limit?o.last():null,D=wm(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((M,R)=>{const H=o.get(M),W=Uw(this.query,R)?R:null,fe=!!H&&this.mutatedKeys.has(H.key),Fe=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let tt=!1;H&&W?H.data.isEqual(W.data)?fe!==Fe&&(r.track({type:3,doc:W}),tt=!0):this.Qu(H,W)||(r.track({type:2,doc:W}),tt=!0,(w&&this.Lu(W,w)>0||D&&this.Lu(W,D)<0)&&(m=!0)):!H&&W?(r.track({type:0,doc:W}),tt=!0):H&&!W&&(r.track({type:1,doc:H}),tt=!0,(w||D)&&(m=!0)),tt&&(W?(h=h.add(W),u=Fe?u.add(M):u.delete(M)):(h=h.delete(M),u=u.delete(M)))}),Jf(this.query)||wm(this.query))for(;h.size>this.query.limit;){const M=Jf(this.query)?h.last():h.first();h=h.delete(M.key),u=u.delete(M.key),r.track({type:1,doc:M})}return{Uu:h,Ku:r,ei:m,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Ku.pu();u.sort((D,M)=>function(R,H){const W=fe=>{switch(fe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe()}};return W(R)-W(H)}(D.type,M.type)||this.Lu(D.doc,M.doc)),this.ju(r);const h=t?this.Wu():[],m=0===this.Bu.size&&this.current?1:0,w=m!==this.$u;return this.$u=m,0!==u.length||w?{snapshot:new Jm(this.query,e.Uu,o,u,e.mutatedKeys,0===m,w,!1),zu:h}:{zu:h}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new VA,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=rn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new $A(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new jA(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=rn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Jm.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Xx{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class eM{constructor(e){this.key=e,this.Xu=!1}}class tM{constructor(e,t,r,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Zu={},this.ta=new No(m=>lv(m),ua),this.ea=new Map,this.na=new Set,this.sa=new er(Ue.comparator),this.ia=new Map,this.ra=new Hv,this.oa={},this.ua=new Map,this.aa=Xu.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function nM(n,e){return bD.apply(this,arguments)}function bD(){return bD=(0,_e.Z)(function*(n,e){const t=ZD(n);let r,o;const u=t.ta.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Yu();else{const h=yield el(t.localStore,Ys(e));t.isPrimaryClient&&$I(t.remoteStore,h);const m=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield CD(t,e,r,"current"===m)}return o}),bD.apply(this,arguments)}function CD(n,e,t,r){return DD.apply(this,arguments)}function DD(){return DD=(0,_e.Z)(function*(n,e,t,r){n.ha=(M,R,H)=>{return(W=(0,_e.Z)(function*(fe,Fe,tt,qt){let dt=Fe.view.Gu(tt);dt.ei&&(dt=yield $v(fe.localStore,Fe.query,!1).then(({documents:$t})=>Fe.view.Gu($t,dt)));const mn=qt&&qt.targetChanges.get(Fe.targetId),bt=Fe.view.applyChanges(dt,fe.isPrimaryClient,mn);return kD(fe,Fe.targetId,bt.zu),bt.snapshot}),function(fe,Fe,tt,qt){return W.apply(this,arguments)})(n,M,R,H);var W};const o=yield $v(n.localStore,e,!0),u=new HA(e,o.hi),h=u.Gu(o.documents),m=lp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(h,n.isPrimaryClient,m);kD(n,t,w.zu);const D=new Xx(e,t,u);return n.ta.set(e,D),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),w.snapshot}),DD.apply(this,arguments)}function rM(n,e){return TD.apply(this,arguments)}function TD(){return TD=(0,_e.Z)(function*(n,e){const t=He(n),r=t.ta.get(e),o=t.ea.get(r.targetId);if(o.length>1)return t.ea.set(r.targetId,o.filter(u=>!ua(u,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Eh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Kv(t.remoteStore,r.targetId),Xm(t,r.targetId)}).catch(vh))):(Xm(t,r.targetId),yield Eh(t.localStore,r.targetId,!0))}),TD.apply(this,arguments)}function AD(){return AD=(0,_e.Z)(function*(n,e,t){const r=zD(n);try{const o=yield function(u,h){const m=He(u),w=On.now(),D=h.reduce((R,H)=>R.add(H.key),rn());let M;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>m.ai.qs(R,D).next(H=>{M=H;const W=[];for(const fe of h){const Fe=DC(fe,M.get(fe.key));null!=Fe&&W.push(new Mo(fe.key,Fe,Rw(Fe.value.mapValue),Xn.exists(!0)))}return m.$s.addMutationBatch(R,w,W,h)})).then(R=>(R.applyToLocalDocumentSet(M),{batchId:R.batchId,changes:M}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,h,m){let w=u.oa[u.currentUser.toKey()];w||(w=new er(jt)),w=w.insert(h,m),u.oa[u.currentUser.toKey()]=w}(r,o.batchId,t),yield Pc(r,o.changes),yield Wm(r.remoteStore)}catch(o){const u=Ym(o,"Failed to persist write");t.reject(u)}}),AD.apply(this,arguments)}function GA(n,e){return SD.apply(this,arguments)}function SD(){return SD=(0,_e.Z)(function*(n,e){const t=He(n);try{const r=yield Bv(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.ia.get(u);h&&(wt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Xu=!0:o.modifiedDocuments.size>0?wt(h.Xu):o.removedDocuments.size>0&&(wt(h.Xu),h.Xu=!1))}),yield Pc(t,r,e)}catch(r){yield vh(r)}}),SD.apply(this,arguments)}function qA(n,e,t){const r=He(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ta.forEach((u,h)=>{const m=h.view.Eu(e);m.snapshot&&o.push(m.snapshot)}),function(u,h){const m=He(u);m.onlineState=h;let w=!1;m.queries.forEach((D,M)=>{for(const R of M.listeners)R.Eu(h)&&(w=!0)}),w&&wD(m)}(r.eventManager,e),o.length&&r.Zu.Ko(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function sM(n,e,t){return xD.apply(this,arguments)}function xD(){return xD=(0,_e.Z)(function*(n,e,t){const r=He(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ia.get(e),u=o&&o.key;if(u){let h=new er(Ue.comparator);h=h.insert(u,Cn.newNoDocument(u,_t.min()));const m=rn().add(u),w=new up(_t.min(),new Map,new gn(jt),h,m);yield GA(r,w),r.sa=r.sa.remove(u),r.ia.delete(e),FD(r)}else yield Eh(r.localStore,e,!1).then(()=>Xm(r,e,t)).catch(vh)}),xD.apply(this,arguments)}function oM(n,e){return MD.apply(this,arguments)}function MD(){return MD=(0,_e.Z)(function*(n,e){const t=He(n),r=e.batch.batchId;try{const o=yield YC(t.localStore,e);PD(t,r,null),OD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pc(t,o)}catch(o){yield vh(o)}}),MD.apply(this,arguments)}function aM(n,e,t){return RD.apply(this,arguments)}function RD(){return RD=(0,_e.Z)(function*(n,e,t){const r=He(n);try{const o=yield function(u,h){const m=He(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let D;return m.$s.lookupMutationBatch(w,h).next(M=>(wt(null!==M),D=M.keys(),m.$s.removeMutationBatch(w,M))).next(()=>m.$s.performConsistencyCheck(w)).next(()=>m.ai.qs(w,D))})}(r.localStore,e);PD(r,e,t),OD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pc(r,o)}catch(o){yield vh(o)}}),RD.apply(this,arguments)}function ND(){return ND=(0,_e.Z)(function*(n,e){const t=He(n);wh(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const h=He(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.$s.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.ua.get(r)||[];o.push(e),t.ua.set(r,o)}catch(r){const o=Ym(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),ND.apply(this,arguments)}function OD(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function PD(n,e,t){const r=He(n);let o=r.oa[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.oa[r.currentUser.toKey()]=o}}function Xm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||ZA(n,r)})}function ZA(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(Kv(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),FD(n))}function kD(n,e,t){for(const r of t)r instanceof jA?(n.ra.addReference(r.key,e),lM(n,r)):r instanceof $A?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||ZA(n,r.key)):Qe()}function lM(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.na.add(r),FD(n))}function FD(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new Ue(Wt.fromString(e)),r=n.aa.next();n.ia.set(r,new eM(t)),n.sa=n.sa.insert(t,r),$I(n.remoteStore,new Qu(Ys(Cc(t.path)),r,2,ps.A))}}function Pc(n,e,t){return LD.apply(this,arguments)}function LD(){return LD=(0,_e.Z)(function*(n,e,t){const r=He(n),o=[],u=[],h=[];var m;r.ta.isEmpty()||(r.ta.forEach((m,w)=>{h.push(r.ha(w,e,t).then(D=>{if(D){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,D.fromCache?"not-current":"current"),o.push(D);const M=kv.Js(w.targetId,D);u.push(M)}}))}),yield Promise.all(h),r.Zu.Ko(o),yield(m=(0,_e.Z)(function*(w,D){const M=He(w);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>de.forEach(D,H=>de.forEach(H.zs,W=>M.persistence.referenceDelegate.addReference(R,H.targetId,W)).next(()=>de.forEach(H.Hs,W=>M.persistence.referenceDelegate.removeReference(R,H.targetId,W)))))}catch(R){if(!Yu(R))throw R;Re("LocalStore","Failed to update sequence numbers: "+R)}for(const R of D){const H=R.targetId;if(!R.fromCache){const W=M.si.get(H),Fe=W.withLastLimboFreeSnapshotVersion(W.snapshotVersion);M.si=M.si.insert(H,Fe)}}}),function(w,D){return m.apply(this,arguments)})(r.localStore,u))}),LD.apply(this,arguments)}function cM(n,e){return VD.apply(this,arguments)}function VD(){return VD=(0,_e.Z)(function*(n,e){const t=He(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield Lv(t.localStore,e);t.currentUser=e,(o=t).ua.forEach(h=>{h.forEach(m=>{m.reject(new Te(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pc(t,r.ci)}var o}),VD.apply(this,arguments)}function dM(n,e){const t=He(n),r=t.ia.get(e);if(r&&r.Xu)return rn().add(r.key);{let o=rn();const u=t.ea.get(e);if(!u)return o;for(const h of u){const m=t.ta.get(h);o=o.unionWith(m.view.qu)}return o}}function hM(n,e){return UD.apply(this,arguments)}function UD(){return UD=(0,_e.Z)(function*(n,e){const t=He(n),r=yield $v(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&kD(t,e.targetId,o.zu),o}),UD.apply(this,arguments)}function fM(n,e){return BD.apply(this,arguments)}function BD(){return BD=(0,_e.Z)(function*(n,e){const t=He(n);return XC(t.localStore,e).then(r=>Pc(t,r))}),BD.apply(this,arguments)}function pM(n,e,t,r){return jD.apply(this,arguments)}function jD(){return jD=(0,_e.Z)(function*(n,e,t,r){const o=He(n),u=yield function(h,m){const w=He(h),D=He(w.$s);return w.persistence.runTransaction("Lookup mutation documents","readonly",M=>D.ln(M,m).next(R=>R?w.ai.qs(M,R):de.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Wm(o.remoteStore):"acknowledged"===t||"rejected"===t?(PD(o,e,r||null),OD(o,e),m=e,He(He(o.localStore).$s).dn(m)):Qe(),yield Pc(o,u)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),jD.apply(this,arguments)}function $D(){return $D=(0,_e.Z)(function*(n,e){const t=He(n);if(ZD(t),zD(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield zA(t,r.toArray());t.ca=!0,yield pD(t.remoteStore,!0);for(const u of o)$I(t.remoteStore,u)}else if(!1===e&&!1!==t.ca){const r=[];let o=Promise.resolve();t.ea.forEach((u,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(Xm(t,h),Eh(t.localStore,h,!0))),Kv(t.remoteStore,h)}),yield o,yield zA(t,r),function(u){const h=He(u);h.ia.forEach((m,w)=>{Kv(h.remoteStore,w)}),h.ra.bi(),h.ia=new Map,h.sa=new er(Ue.comparator)}(t),t.ca=!1,yield pD(t.remoteStore,!1)}}),$D.apply(this,arguments)}function zA(n,e,t){return HD.apply(this,arguments)}function HD(){return HD=(0,_e.Z)(function*(n,e,t){const r=He(n),o=[],u=[];for(const h of e){let m;const w=r.ea.get(h);if(w&&0!==w.length){m=yield el(r.localStore,Ys(w[0]));for(const D of w){const M=r.ta.get(D),R=yield hM(r,M);R.snapshot&&u.push(R.snapshot)}}else{const D=yield JC(r.localStore,h);m=yield el(r.localStore,D),yield CD(r,WA(D),h,!1)}o.push(m)}return r.Zu.Ko(u),o}),HD.apply(this,arguments)}function WA(n){return Lw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function mM(n){const e=He(n);return He(He(e.localStore).persistence).Os()}function yM(n,e,t,r){return GD.apply(this,arguments)}function GD(){return GD=(0,_e.Z)(function*(n,e,t,r){const o=He(n);if(o.ca)return void Re("SyncEngine","Ignoring unexpected query state notification.");const u=o.ea.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const h=yield XC(o.localStore,cv(u[0])),m=up.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Pc(o,h,m);break}case"rejected":yield Eh(o.localStore,e,!0),Xm(o,e,r);break;default:Qe()}}),GD.apply(this,arguments)}function _M(n,e,t){return qD.apply(this,arguments)}function qD(){return qD=(0,_e.Z)(function*(n,e,t){const r=ZD(n);if(r.ca){for(const o of e){if(r.ea.has(o)){Re("SyncEngine","Adding an already active target "+o);continue}const u=yield JC(r.localStore,o),h=yield el(r.localStore,u);yield CD(r,WA(u),h.targetId,!1),$I(r.remoteStore,h)}for(const o of t)r.ea.has(o)&&(yield Eh(r.localStore,o,!1).then(()=>{Kv(r.remoteStore,o),Xm(r,o)}).catch(vh))}}),qD.apply(this,arguments)}function ZD(n){const e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=GA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sM.bind(null,e),e.Zu.Ko=Kx.bind(null,e.eventManager),e.Zu.la=Yx.bind(null,e.eventManager),e}function zD(n){const e=He(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aM.bind(null,e),e}class KA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.M=Yt(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return Fv(this.persistence,new FI,e.initialUser,this.M)}_a(e){return new s(l.Wi,this.M)}da(e){return new z}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class YA extends KA{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield zD(r.ga.syncEngine),yield Wm(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return Fv(this.persistence,new FI,e.initialUser,this.M)}wa(e){return new ZC(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=Pv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ri.withCacheSize(this.cacheSizeBytes):Ri.DEFAULT;return new kI(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,lt(),kt(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new z}}class EM extends YA{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const o=r.ga.syncEngine;r.sharedClientState instanceof V&&(r.sharedClientState.syncEngine={kr:pM.bind(null,o),Mr:yM.bind(null,o),Or:_M.bind(null,o),Os:mM.bind(null,o),Nr:fM.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var u=(0,_e.Z)(function*(h){yield function gM(n,e){return $D.apply(this,arguments)}(r.ga.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return u.apply(this,arguments)}}())})()}da(e){const t=lt();if(!V.vt(t))throw new Te(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Pv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new V(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class WD{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>qA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=cM.bind(null,r.syncEngine),yield pD(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Wx}createDatastore(e){const t=Yt(e.databaseInfo.databaseId),r=new Ie(e.databaseInfo);return new Zv(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>qA(this.syncEngine,m,0),h=Pe.vt()?new Pe:new me,new Wv(t,r,o,u,h);var t,r,o,u,h}createSyncEngine(e,t){return function(r,o,u,h,m,w,D){const M=new tM(r,o,u,h,m,w);return D&&(M.ca=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=He(t);Re("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield nl(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function QA(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class GI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class wM{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new zn,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),o=Number(r);isNaN(o)&&e.Ra(`length string (${r}) is not valid number`);const u=yield e.ba(o);return new Qx(JSON.parse(u),t.length+o)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,_e.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class IM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Te(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,_e.Z)(function*(u,h){const m=He(u),w=dp(m.M)+"/documents",D={documents:h.map(W=>Sm(m.M,W))},M=yield m.co("BatchGetDocuments",w,D),R=new Map;M.forEach(W=>{const fe=function Ev(n,e){return"found"in e?function(t,r){wt(!!r.found);const o=Zi(t,r.found.name),u=Un(r.found.updateTime),h=new fi({mapValue:{fields:r.found.fields}});return Cn.newFoundDocument(o,u,h)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const o=Zi(t,r.missing),u=Un(r.readTime);return Cn.newNoDocument(o,u)}(n,e):Qe()}(m.M,W);R.set(fe.key.toString(),fe)});const H=[];return h.forEach(W=>{const fe=R.get(W.toString());wt(!!fe),H.push(fe)}),H}),function(u,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new rp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ue.fromPath(o);e.mutations.push(new ip(u,e.precondition(u)))}),yield(r=(0,_e.Z)(function*(o,u){const h=He(o),m=dp(h.M)+"/documents",w={writes:u.map(D=>dh(h.M,D))};yield h.ro("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qe();t=_t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Te(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Xn.updateTime(t):Xn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new Te(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xn.updateTime(t)}return Xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bM{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.va=5,this.So=new Ni(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,_e.Z)(function*(){const t=new IM(e.datastore),r=e.Da(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ca(u)}))}).catch(o=>{e.Ca(o)})}))}Da(e){try{const t=this.updateFunction(e);return!Ha(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Yw(t)}return!1}}class CM{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Pr.UNAUTHENTICATED,this.clientId=hC.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,_e.Z)(function*(m){Re("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(Re("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Te(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Ym(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function JA(n,e){return KD.apply(this,arguments)}function KD(){return KD=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,_e.Z)(function*(u){r.isEqual(u)||(yield Lv(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),KD.apply(this,arguments)}function XA(n,e){return YD.apply(this,arguments)}function YD(){return YD=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield QD(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>LA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>LA(e.remoteStore,u)),n.onlineComponents=e}),YD.apply(this,arguments)}function QD(n){return JD.apply(this,arguments)}function JD(){return JD=(0,_e.Z)(function*(n){return n.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),yield JA(n,new KA)),n.offlineComponents}),JD.apply(this,arguments)}function qI(n){return XD.apply(this,arguments)}function XD(){return XD=(0,_e.Z)(function*(n){return n.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),yield XA(n,new WD)),n.onlineComponents}),XD.apply(this,arguments)}function eS(n){return QD(n).then(e=>e.persistence)}function eT(n){return QD(n).then(e=>e.localStore)}function tS(n){return qI(n).then(e=>e.remoteStore)}function tT(n){return qI(n).then(e=>e.syncEngine)}function ey(n){return nT.apply(this,arguments)}function nT(){return nT=(0,_e.Z)(function*(n){const e=yield qI(n),t=e.eventManager;return t.onListen=nM.bind(null,e.syncEngine),t.onUnlisten=rM.bind(null,e.syncEngine),t}),nT.apply(this,arguments)}function nS(n,e,t={}){const r=new zn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,u,h,m,w){const D=new GI({next:R=>{u.enqueueAndForget(()=>vD(o,M));const H=R.docs.has(h);!H&&R.fromCache?w.reject(new Te(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&R.fromCache&&m&&"server"===m.source?w.reject(new Te(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(R)},error:R=>w.reject(R)}),M=new ID(Cc(h.path),D,{includeMetadataChanges:!0,Du:!0});return yD(o,M)}(yield ey(n),n.asyncQueue,e,t,r)})),r.promise}function rS(n,e,t={}){const r=new zn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(o,u,h,m,w){const D=new GI({next:R=>{u.enqueueAndForget(()=>vD(o,M)),R.fromCache&&"server"===m.source?w.reject(new Te(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(R)},error:R=>w.reject(R)}),M=new ID(h,D,{includeMetadataChanges:!0,Du:!0});return yD(o,M)}(yield ey(n),n.asyncQueue,e,t,r)})),r.promise}const iS=new Map;function rT(n,e,t){if(!t)throw new Te(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sS(n,e,t,r){if(!0===e&&!0===r)throw new Te(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oS(n){if(!Ue.isDocumentKey(n))throw new Te(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aS(n){if(Ue.isDocumentKey(n))throw new Te(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Qe()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ZI(n);throw new Te(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function uS(n,e){if(e<=0)throw new Te(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class lS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Te(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Te(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,sS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lS({}),this._settingsFrozen=!1,e instanceof $a?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Te(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $a(o.options.projectId)}(e))}get app(){if(!this._app)throw new Te(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Te(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new cC;switch(t.type){case"gapi":const r=t.client;return wt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new _w(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Te(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=iS.get(e);t&&(Re("ComponentProvider","Removing Datastore"),iS.delete(e),t.terminate())}(this),Promise.resolve()}}class Bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class zi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zi(this.firestore,e,this._query)}}class rl extends zi{constructor(e,t,r){super(e,t,Cc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new Ue(e))}withConverter(e){return new rl(this.firestore,e,this._path)}}function cS(n,e,...t){if(n=(0,Bt.m9)(n),rT("collection","path",e),n instanceof Yv){const r=Wt.fromString(e,...t);return aS(r),new rl(n,null,r)}{if(!(n instanceof Bn||n instanceof rl))throw new Te(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return aS(r),new rl(n.firestore,null,r)}}function zI(n,e,...t){if(n=(0,Bt.m9)(n),1===arguments.length&&(e=hC.R()),rT("doc","path",e),n instanceof Yv){const r=Wt.fromString(e,...t);return oS(r),new Bn(n,null,new Ue(r))}{if(!(n instanceof Bn||n instanceof rl))throw new Te(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return oS(r),new Bn(n.firestore,n instanceof rl?n.converter:null,new Ue(r))}}function dS(n,e){return n=(0,Bt.m9)(n),e=(0,Bt.m9)(e),(n instanceof Bn||n instanceof rl)&&(e instanceof Bn||e instanceof rl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function hS(n,e){return n=(0,Bt.m9)(n),e=(0,Bt.m9)(e),n instanceof zi&&e instanceof zi&&n.firestore===e.firestore&&ua(n._query,e._query)&&n.converter===e.converter}class kM{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Ni(this,"async_queue_retry"),this.Ua=()=>{const t=kt();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=kt();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=kt();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new zn;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,_e.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!Yu(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,dr("INTERNAL UNHANDLED ERROR: ",function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),h}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const o=mD.createAndSchedule(this,e,t,r,u=>this.Qa(u));return this.Oa.push(o),o}qa(){this.Fa&&Qe()}verifyOperationInProgress(){}ja(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function iT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class FM{constructor(){this._progressObserver={},this._taskCompletionResolver=new zn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kn extends Yv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new kM,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||fS(this),this._firestoreClient.terminate()}}function Vr(n){return n._firestoreClient||fS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function fS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new bw(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new CM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function pS(n,e,t){const r=new zn;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield JA(n,t),yield XA(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ae.FAILED_PRECONDITION||u.code===ae.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function gS(n){if(n._initialized||n._terminated)throw new Te(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class kc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Te(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class il{constructor(e){this._byteString=e}static fromBase64String(e){try{return new il(Dr.fromBase64String(e))}catch(t){throw new Te(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new il(Dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Dp{constructor(e){this._methodName=e}}class WI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}const ZM=/^__.*__$/;class zM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Mo(e,this.data,this.fieldMask,t,this.fieldTransforms):new np(e,this.data,t,this.fieldTransforms)}}class mS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Mo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe()}}class KI{constructor(e,t,r,o,u,h){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Ja(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new KI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.ec(e),o}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.Ja(),o}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return JI(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(yS(this.Ya)&&ZM.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class WM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Yt(e)}uc(e,t,r,o=!1){return new KI({Ya:e,methodName:t,oc:r,path:kr.emptyPath(),tc:!1,rc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Tp(n){const e=n._freezeSettings(),t=Yt(n._databaseId);return new WM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function YI(n,e,t,r,o,u={}){const h=n.uc(u.merge||u.mergeFields?2:0,e,t,o);uT("Data must be an object, but it was:",h,r);const m=ES(r,h);let w,D;if(u.merge)w=new Jd(h.fieldMask),D=h.fieldTransforms;else if(u.mergeFields){const M=[];for(const R of u.mergeFields){const H=lT(e,R,t);if(!h.contains(H))throw new Te(ae.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);IS(M,H)||M.push(H)}w=new Jd(M),D=h.fieldTransforms.filter(R=>w.covers(R.field))}else w=null,D=h.fieldTransforms;return new zM(new fi(m),w,D)}class Qv extends Dp{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qv}}function _S(n,e,t){return new KI({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class sT extends Dp{_toFieldTransform(e){return new lh(e.path,new oh)}isEqual(e){return e instanceof sT}}class KM extends Dp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=_S(this,e,!0),r=this.ac.map(u=>Ap(u,t)),o=new Dc(r);return new lh(e.path,o)}isEqual(e){return this===e}}class YM extends Dp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=_S(this,e,!0),r=this.ac.map(u=>Ap(u,t)),o=new Tc(r);return new lh(e.path,o)}isEqual(e){return this===e}}class QM extends Dp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new ah(e.M,hv(e.M,this.cc));return new lh(e.path,t)}isEqual(e){return this===e}}function oT(n,e,t,r){const o=n.uc(1,e,t);uT("Data must be an object, but it was:",o,r);const u=[],h=fi.empty();Gu(r,(w,D)=>{const M=QI(e,w,t);D=(0,Bt.m9)(D);const R=o.nc(M);if(D instanceof Qv)u.push(M);else{const H=Ap(D,R);null!=H&&(u.push(M),h.set(M,H))}});const m=new Jd(u);return new mS(h,m,o.fieldTransforms)}function aT(n,e,t,r,o,u){const h=n.uc(1,e,t),m=[lT(e,r,t)],w=[o];if(u.length%2!=0)throw new Te(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)m.push(lT(e,u[H])),w.push(u[H+1]);const D=[],M=fi.empty();for(let H=m.length-1;H>=0;--H)if(!IS(D,m[H])){const W=m[H];let fe=w[H];fe=(0,Bt.m9)(fe);const Fe=h.nc(W);if(fe instanceof Qv)D.push(W);else{const tt=Ap(fe,Fe);null!=tt&&(D.push(W),M.set(W,tt))}}const R=new Jd(D);return new mS(M,R,h.fieldTransforms)}function vS(n,e,t,r=!1){return Ap(t,n.uc(r?4:3,e))}function Ap(n,e){if(wS(n=(0,Bt.m9)(n)))return uT("Unsupported field value:",e,n),ES(n,e);if(n instanceof Dp)return function(t,r){if(!yS(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const h of t){let m=Ap(h,r.sc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Bt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return hv(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=On.fromDate(t);return{timestampValue:ch(r.M,o)}}if(t instanceof On){const o=new On(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ch(r.M,o)}}if(t instanceof WI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof il)return{bytesValue:rI(r.M,t._byteString)};if(t instanceof Bn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ic(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${ZI(t)}`)}(n,e)}function ES(n,e){const t={};return Qd(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gu(n,(r,o)=>{const u=Ap(o,e.Za(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function wS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof On||n instanceof WI||n instanceof il||n instanceof Bn||n instanceof Dp)}function uT(n,e,t){if(!wS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ZI(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function lT(n,e,t){if((e=(0,Bt.m9)(e))instanceof kc)return e._internalPath;if("string"==typeof e)return QI(n,e);throw JI("Field path arguments must be of type string or ",n,!1,void 0,t)}const JM=new RegExp("[~\\*/\\[\\]]");function QI(n,e,t){if(e.search(JM)>=0)throw JI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kc(...e.split("."))._internalPath}catch(r){throw JI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function JI(n,e,t,r,o){const u=r&&!r.isEmpty(),h=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||h)&&(w+=" (found",u&&(w+=` in field ${r}`),h&&(w+=` in document ${o}`),w+=")"),new Te(ae.INVALID_ARGUMENT,m+n+w)}function IS(n,e){return n.some(t=>t.isEqual(e))}class Jv{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new XM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(XI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class XM extends Jv{data(){return super.data()}}function XI(n,e){return"string"==typeof e?QI(n,e):e instanceof kc?e._internalPath:e._delegate._internalPath}class Sp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fc extends Jv{constructor(e,t,r,o,u,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(XI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Xv extends Fc{data(e={}){return super.data(e)}}class bh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Sp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Xv(this._firestore,this._userDataWriter,r.key,r,new Sp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new Xv(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Sp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const m=new Xv(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Sp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,D=-1;return 0!==h.type&&(w=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),1!==h.type&&(u=u.add(h.doc),D=u.indexOf(h.doc.key)),{type:e1(h.type),doc:m,oldIndex:w,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function e1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe()}}function bS(n,e){return n instanceof Fc&&e instanceof Fc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof bh&&e instanceof bh&&n._firestore===e._firestore&&hS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function CS(n){if(wm(n)&&0===n.explicitOrderBy.length)throw new Te(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class e0{}function Ch(n,...e){for(const t of e)n=t._apply(n);return n}class t1 extends e0{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=Tp(e.firestore),r=function(o,u,h,m,w,D,M){let R;if(w.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){MS(M,D);const W=[];for(const fe of M)W.push(xS(m,o,fe));R={arrayValue:{values:W}}}else R=xS(m,o,M)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||MS(M,D),R=vS(h,"where",M,"in"===D||"not-in"===D);const H=Yr.create(w,D,R);return function(W,fe){if(fe.S()){const tt=Xf(W);if(null!==tt&&!tt.isEqual(fe.field))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${tt.toString()}' and '${fe.field.toString()}'`);const qt=av(W);null!==qt&&RS(0,fe.field,qt)}const Fe=function(tt,qt){for(const dt of tt.filters)if(qt.indexOf(dt.op)>=0)return dt.op;return null}(W,function(tt){switch(tt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(fe.op));if(null!==Fe)throw new Te(ae.INVALID_ARGUMENT,Fe===fe.op?`Invalid query. You cannot use more than one '${fe.op.toString()}' filter.`:`Invalid query. You cannot use '${fe.op.toString()}' filters with '${Fe.toString()}' filters.`)}(o,H),H}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new zi(e.firestore,e.converter,function(o,u){const h=o.filters.concat([u]);return new ms(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class r1 extends e0{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Te(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Te(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new bc(o,u);return function(m,w){if(null===av(m)){const D=Xf(m);null!==D&&RS(0,D,w.field)}}(r,h),h}(e._query,this.hc,this.dc);return new zi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new ms(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class DS extends e0{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new zi(e.firestore,e.converter,Vw(e._query,this._c,this.wc))}}class TS extends e0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=SS(e,this.type,this.mc,this.gc);return new zi(e.firestore,e.converter,(o=t,new ms((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class AS extends e0{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=SS(e,this.type,this.mc,this.gc);return new zi(e.firestore,e.converter,(o=t,new ms((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function SS(n,e,t,r){if(t[0]=(0,Bt.m9)(t[0]),t[0]instanceof Jv)return function(o,u,h,m,w){if(!m)throw new Te(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const D=[];for(const M of ep(o))if(M.field.isKeyField())D.push(eh(u,m.key));else{const R=m.data.field(M.field);if(X_(R))throw new Te(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const H=M.field.canonicalString();throw new Te(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}D.push(R)}return new Zu(D,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Tp(n.firestore);return function(u,h,m,w,D,M){const R=u.explicitOrderBy;if(D.length>R.length)throw new Te(ae.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let W=0;W<D.length;W++){const fe=D[W];if(R[W].field.isKeyField()){if("string"!=typeof fe)throw new Te(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof fe}`);if(!uv(u)&&-1!==fe.indexOf("/"))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${fe}' contains a slash.`);const Fe=u.path.child(Wt.fromString(fe));if(!Ue.isDocumentKey(Fe))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const tt=new Ue(Fe);H.push(eh(h,tt))}else{const Fe=vS(m,w,fe);H.push(Fe)}}return new Zu(H,M)}(n._query,n.firestore._databaseId,o,e,t,r)}}function xS(n,e,t){if("string"==typeof(t=(0,Bt.m9)(t))){if(""===t)throw new Te(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uv(e)&&-1!==t.indexOf("/"))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Wt.fromString(t));if(!Ue.isDocumentKey(r))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eh(n,new Ue(r))}if(t instanceof Bn)return eh(n,t._key);throw new Te(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ZI(t)}.`)}function MS(n,e){if(!Array.isArray(n)||0===n.length)throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Te(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function RS(n,e,t){if(!t.isEqual(e))throw new Te(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class cT{convertValue(e,t="none"){switch(vc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qe()}}convertObject(e,t){const r={};return Gu(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new WI(Wn(e.latitude),Wn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ev(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hf(e));default:return null}}convertTimestamp(e){const t=gs(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Wt.fromString(e);wt(bv(r));const o=new $a(r.get(1),r.get(3)),u=new Ue(r.popFirst(5));return o.isEqual(t)||dr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function eb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class d1 extends cT{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}class NS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tp(e)}set(e,t,r){this._verifyNotCommitted();const o=Dh(e,this._firestore),u=eb(o.converter,t,r),h=YI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,Xn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Dh(e,this._firestore);let h;return h="string"==typeof(t=(0,Bt.m9)(t))||t instanceof kc?aT(this._dataReader,"WriteBatch.update",u._key,t,r,o):oT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,Xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Dh(e,this._firestore);return this._mutations=this._mutations.concat(new rp(t._key,Xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Dh(n,e){if((n=(0,Bt.m9)(n)).firestore!==e)throw new Te(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class xp extends cT{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}function OS(n,e,t){n=Jt(n,Bn);const r=Jt(n.firestore,Kn),o=eb(n.converter,e,t);return ty(r,[YI(Tp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Xn.none())])}function PS(n,e,t,...r){n=Jt(n,Bn);const o=Jt(n.firestore,Kn),u=Tp(o);let h;return h="string"==typeof(e=(0,Bt.m9)(e))||e instanceof kc?aT(u,"updateDoc",n._key,e,t,r):oT(u,"updateDoc",n._key,e),ty(o,[h.toMutation(n._key,Xn.exists(!0))])}function kS(n,...e){var t,r,o;n=(0,Bt.m9)(n);let u={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||iT(e[h])||(u=e[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges};if(iT(e[h])){const R=e[h];e[h]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[h+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[h+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let w,D,M;if(n instanceof Bn)D=Jt(n.firestore,Kn),M=Cc(n._key.path),w={next:R=>{e[h]&&e[h](dT(D,n,R))},error:e[h+1],complete:e[h+2]};else{const R=Jt(n,zi);D=Jt(R.firestore,Kn),M=R._query;const H=new xp(D);w={next:W=>{e[h]&&e[h](new bh(D,H,R,W))},error:e[h+1],complete:e[h+2]},CS(n._query)}return function(R,H,W,fe){const Fe=new GI(fe),tt=new ID(H,Fe,W);return R.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return yD(yield ey(R),tt)})),()=>{Fe.pa(),R.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return vD(yield ey(R),tt)}))}}(Vr(D),M,m,w)}function ty(n,e){return function(t,r){const o=new zn;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function iM(n,e,t){return AD.apply(this,arguments)}(yield tT(t),r,o)})),o.promise}(Vr(n),e)}function dT(n,e,t){const r=t.docs.get(e._key),o=new xp(n);return new Fc(n,o,e._key,r,new Sp(t.hasPendingWrites,t.fromCache),e.converter)}class w1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Tp(e)}get(e){const t=Dh(e,this._firestore),r=new d1(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Qe();const u=o[0];if(u.isFoundDocument())return new Jv(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Jv(this._firestore,r,t._key,null,t.converter);throw Qe()})}set(e,t,r){const o=Dh(e,this._firestore),u=eb(o.converter,t,r),h=YI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const u=Dh(e,this._firestore);let h;return h="string"==typeof(t=(0,Bt.m9)(t))||t instanceof kc?aT(this._dataReader,"Transaction.update",u._key,t,r,o):oT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,h),this}delete(e){const t=Dh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Dh(e,this._firestore),r=new xp(this._firestore);return super.get(e).then(o=>new Fc(this._firestore,r,t._key,o._document,new Sp(!1,!1),t.converter))}}function hT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Te("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function LS(){if("undefined"==typeof Uint8Array)throw new Te("unimplemented","Uint8Arrays are not available in this environment.")}function VS(){if(!function Iw(){return"undefined"!=typeof atob}())throw new Te("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){_c=Pu.SDK_VERSION,(0,Pu._registerComponent)(new Pg.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Kn(o,new mw(t.getProvider("auth-internal")),new Ew(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Pu.registerVersion)(K_,"3.4.7",n),(0,Pu.registerVersion)(K_,"3.4.7","esm2017")}();class t0{constructor(e){this._delegate=e}static fromBase64String(e){return VS(),new t0(il.fromBase64String(e))}static fromUint8Array(e){return LS(),new t0(il.fromUint8Array(e))}toBase64(){return VS(),this._delegate.toBase64()}toUint8Array(){return LS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fT(n){return function M1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class R1{enableIndexedDbPersistence(e,t){return function VM(n,e){gS(n=Jt(n,Kn));const t=Vr(n),r=n._freezeSettings(),o=new WD;return pS(t,o,new YA(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function UM(n){gS(n=Jt(n,Kn));const e=Vr(n),t=n._freezeSettings(),r=new WD;return pS(e,r,new EM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function BM(n){if(n._initialized&&!n._terminated)throw new Te(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new zn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!la.vt())return Promise.resolve();const o=r+"main";yield la.delete(o)}),function(r){return t.apply(this,arguments)})(Pv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class US{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof $a||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Bf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function OM(n,e,t,r={}){var o;const u=(n=Jt(n,Yv))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Bf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=Pr.MOCK_USER;else{h=(0,Bt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Te(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Pr(w)}n._authCredentials=new dC(new gw(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function $M(n){return function DM(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield eS(n),t=yield tS(n);return e.setNetworkEnabled(!0),function(r){const o=He(r);return o.lu.delete(0),Oc(o)}(t)}))}(Vr(n=Jt(n,Kn)))}(this._delegate)}disableNetwork(){return function HM(n){return function TM(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield eS(n),t=yield tS(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(o){const u=He(o);u.lu.add(0),yield nl(u),u._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Vr(n=Jt(n,Kn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,sS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function jM(n){return function(e){const t=new zn;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function uM(n,e){return ND.apply(this,arguments)}(yield tT(e),t)})),t.promise}(Vr(n=Jt(n,Kn)))}(this._delegate)}onSnapshotsInSync(e){return function E1(n,e){return function xM(n,e){const t=new GI(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield ey(n),o=t,He(r).Tu.add(o),void o.next();var r,o})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield ey(n),o=t,void He(r).Tu.delete(o);var r,o}))}}(Vr(n=Jt(n,Kn)),iT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ny(this,cS(this._delegate,e))}catch(t){throw ys(t,"collection()","Firestore.collection()")}}doc(e){try{return new ca(this,zI(this._delegate,e))}catch(t){throw ys(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _s(this,function PM(n,e){if(n=Jt(n,Yv),rT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Te(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zi(n,null,(t=e,new ms(Wt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ys(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function I1(n,e){return function MM(n,e){const t=new zn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const r=yield(o=n,qI(o).then(u=>u.datastore));var o;new bM(n.asyncQueue,r,e,t).run()})),t.promise}(Vr(n=Jt(n,Kn)),t=>e(new w1(n,t)))}(this._delegate,t=>e(new BS(this,t)))}batch(){return Vr(this._delegate),new jS(new NS(this._delegate,e=>ty(this._delegate,e)))}loadBundle(e){return function GM(n,e){const t=Vr(n=Jt(n,Kn)),r=new FM;return function RM(n,e,t,r){const o=function(u,h){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,D){if(w instanceof Uint8Array)return QA(w,D);if(w instanceof ArrayBuffer)return QA(new Uint8Array(w),D);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new wM(w,h);var w}(t,Yt(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function vM(n,e,t){const r=He(n);var o;(o=(0,_e.Z)(function*(u,h,m){try{const w=yield h.getMetadata();if(yield function(H,W){const fe=He(H),Fe=Un(W.createTime);return fe.persistence.runTransaction("hasNewerBundle","readonly",tt=>fe.ds.getBundleMetadata(tt,W.id)).then(tt=>!!tt&&tt.createTime.compareTo(Fe)>=0)}(u.localStore,w))return yield h.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=w).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(BA(w));const D=new Jx(w,u.localStore,h.M);let M=yield h.fa();for(;M;){const H=yield D.Nu(M);H&&m._updateProgress(H),M=yield h.fa()}const R=yield D.complete();return yield Pc(u,R.Ou,void 0),yield function(H,W){const fe=He(H);return fe.persistence.runTransaction("Save bundle","readwrite",Fe=>fe.ds.saveBundleMetadata(Fe,W))}(u.localStore,w),m._completeWith(R.progress),Promise.resolve(R.Mu)}catch(w){return Bf("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var H}),function(u,h,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield tT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function qM(n,e){return function NM(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const o=He(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.ds.getNamedQuery(u,r))}(yield eT(n),e)}))}(Vr(n=Jt(n,Kn)),e).then(t=>t?new zi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new _s(this,t):null)}}class tb extends cT{constructor(e){super(),this.firestore=e}convertBytes(e){return new t0(new il(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ca.forKey(t,this.firestore,null)}}class BS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new tb(e)}get(e){const t=Rp(e);return this._delegate.get(t).then(r=>new n0(this._firestore,new Fc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Rp(e);return r?(hT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Rp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Rp(e);return this._delegate.delete(t),this}}class jS{constructor(e){this._delegate=e}set(e,t,r){const o=Rp(e);return r?(hT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Rp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Rp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Mp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Xv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new r0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Mp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Mp(e,new tb(e),t),o.set(t,u)),u}}Mp.INSTANCES=new WeakMap;class ca{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ca(t,new Bn(t._delegate,r,new Ue(e)))}static forKey(e,t,r){return new ca(t,new Bn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ny(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ny(this.firestore,cS(this._delegate,e))}catch(t){throw ys(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Bt.m9)(e))instanceof Bn&&dS(this._delegate,e)}set(e,t){t=hT("DocumentReference.set",t);try{return t?OS(this._delegate,e,t):OS(this._delegate,e)}catch(r){throw ys(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?PS(this._delegate,e):PS(this._delegate,e,t,...r)}catch(o){throw ys(o,"updateDoc()","DocumentReference.update()")}}delete(){return function _1(n){return ty(Jt(n.firestore,Kn),[new rp(n._key,Xn.none())])}(this._delegate)}onSnapshot(...e){const t=$S(e),r=HS(e,o=>new n0(this.firestore,new Fc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return kS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function f1(n){n=Jt(n,Bn);const e=Jt(n.firestore,Kn),t=Vr(e),r=new xp(e);return function AM(n,e){const t=new zn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,u,h){try{const m=yield function(w,D){const M=He(w);return M.persistence.runTransaction("read document","readonly",R=>M.ai.Bs(R,D))}(o,u);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new Te(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Ym(m,`Failed to get document '${u} from cache`);h.reject(w)}}),function(o,u,h){return r.apply(this,arguments)})(yield eT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Fc(e,r,n._key,o,new Sp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function p1(n){n=Jt(n,Bn);const e=Jt(n.firestore,Kn);return nS(Vr(e),n._key,{source:"server"}).then(t=>dT(e,n,t))}(this._delegate):function h1(n){n=Jt(n,Bn);const e=Jt(n.firestore,Kn);return nS(Vr(e),n._key).then(t=>dT(e,n,t))}(this._delegate),t.then(r=>new n0(this.firestore,new Fc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ca(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}function ys(n,e,t){return n.message=n.message.replace(e,t),n}function $S(n){for(const e of n)if("object"==typeof e&&!fT(e))return e;return{}}function HS(n,e){var t,r;let o;return o=fT(n[0])?n[0]:fT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class n0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ca(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bS(this._delegate,e._delegate)}}class r0 extends n0{data(e){const t=this._delegate.data(e);return function pw(n,e){n||Qe()}(void 0!==t),t}}class _s{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tb(e)}where(e,t,r){try{return new _s(this.firestore,Ch(this._delegate,function n1(n,e,t){const r=e,o=XI("where",n);return new t1(o,r,t)}(e,t,r)))}catch(o){throw ys(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new _s(this.firestore,Ch(this._delegate,function i1(n,e="asc"){const t=e,r=XI("orderBy",n);return new r1(r,t)}(e,t)))}catch(r){throw ys(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _s(this.firestore,Ch(this._delegate,function s1(n){return uS("limit",n),new DS("limit",n,"F")}(e)))}catch(t){throw ys(t,"limit()","Query.limit()")}}limitToLast(e){try{return new _s(this.firestore,Ch(this._delegate,function o1(n){return uS("limitToLast",n),new DS("limitToLast",n,"L")}(e)))}catch(t){throw ys(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new _s(this.firestore,Ch(this._delegate,function a1(...n){return new TS("startAt",n,!0)}(...e)))}catch(t){throw ys(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new _s(this.firestore,Ch(this._delegate,function u1(...n){return new TS("startAfter",n,!1)}(...e)))}catch(t){throw ys(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new _s(this.firestore,Ch(this._delegate,function l1(...n){return new AS("endBefore",n,!1)}(...e)))}catch(t){throw ys(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new _s(this.firestore,Ch(this._delegate,function c1(...n){return new AS("endAt",n,!0)}(...e)))}catch(t){throw ys(t,"endAt()","Query.endAt()")}}isEqual(e){return hS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function m1(n){n=Jt(n,zi);const e=Jt(n.firestore,Kn),t=Vr(e),r=new xp(e);return function SM(n,e){const t=new zn;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(o,u,h){try{const m=yield $v(o,u,!0),w=new HA(u,m.hi),D=w.Gu(m.documents),M=w.applyChanges(D,!1);h.resolve(M.snapshot)}catch(m){const w=Ym(m,`Failed to execute query '${u} against cache`);h.reject(w)}}),function(o,u,h){return r.apply(this,arguments)})(yield eT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new bh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function y1(n){n=Jt(n,zi);const e=Jt(n.firestore,Kn),t=Vr(e),r=new xp(e);return rS(t,n._query,{source:"server"}).then(o=>new bh(e,r,n,o))}(this._delegate):function g1(n){n=Jt(n,zi);const e=Jt(n.firestore,Kn),t=Vr(e),r=new xp(e);return CS(n._query),rS(t,n._query).then(o=>new bh(e,r,n,o))}(this._delegate),t.then(r=>new pT(this.firestore,new bh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=$S(e),r=HS(e,o=>new pT(this.firestore,new bh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return kS(this._delegate,t,r)}withConverter(e){return new _s(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}class O1{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new r0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class pT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new _s(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new r0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new O1(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new r0(this._firestore,r))})}isEqual(e){return bS(this._delegate,e._delegate)}}class ny extends _s{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ca(this.firestore,e):null}doc(e){try{return new ca(this.firestore,void 0===e?zI(this._delegate):zI(this._delegate,e))}catch(t){throw ys(t,"doc()","CollectionReference.doc()")}}add(e){return function v1(n,e){const t=Jt(n.firestore,Kn),r=zI(n),o=eb(n.converter,e);return ty(t,[YI(Tp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Xn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ca(this.firestore,t))}isEqual(e){return dS(this._delegate,e._delegate)}withConverter(e){return new ny(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}function Rp(n){return Jt(n,Bn)}class gT{constructor(...e){this._delegate=new kc(...e)}static documentId(){return new gT(kr.keyField().canonicalString())}isEqual(e){return(e=(0,Bt.m9)(e))instanceof kc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Np{constructor(e){this._delegate=e}static serverTimestamp(){const e=function C1(){return new sT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Np(e)}static delete(){const e=function b1(){return new Qv("deleteField")}();return e._methodName="FieldValue.delete",new Np(e)}static arrayUnion(...e){const t=function D1(...n){return new KM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Np(t)}static arrayRemove(...e){const t=function T1(...n){return new YM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Np(t)}static increment(e){const t=function A1(n){return new QM("increment",n)}(e);return t._methodName="FieldValue.increment",new Np(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const P1={Firestore:US,GeoPoint:WI,Timestamp:On,Blob:t0,Transaction:BS,WriteBatch:jS,DocumentReference:ca,DocumentSnapshot:n0,Query:_s,QueryDocumentSnapshot:r0,QuerySnapshot:pT,CollectionReference:ny,FieldPath:gT,FieldValue:Np,setLogLevel:function N1(n){!function lC(n){Hu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function F1(n){(function k1(n,e){n.INTERNAL.registerComponent(new Pg.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},P1)))})(n,(e,t)=>new US(e,t,new R1)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(yE.Z);var L1=k(6451),nb=k(5363),V1=k(6063);class U1 extends lr.x{constructor(e=1/0,t=1/0,r=V1.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:h}=this;t||(r.push(e),!o&&r.push(u.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let h=0;h<u.length&&!e.closed;h+=r?1:2)e.next(u[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const h=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=h;w+=2)m=w;m&&r.splice(0,m+1)}}}var B1=k(3099);function GS(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,B1.B)({connector:()=>new U1(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function qS(n,e){return(0,Ia.m)(e)?Rn(()=>n,e):Rn(()=>n)}var mT=k(9468);k(5867);const zS=new Map,q1={activated:!1,tokenObservers:[]},Z1={initialized:!1,enabled:!1};function gi(n){return zS.get(n)||q1}function Ka(n,e){zS.set(n,e)}function ib(){return Z1}class Q1{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new Bt.BH,yield function J1(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Bt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const vs=new Bt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function KS(n){if(!gi(n).activated)throw vs.create("use-before-activation",{appName:n.name})}function ET(n,e){return wT.apply(this,arguments)}function wT(){return wT=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const R=yield o.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const u={method:"POST",body:JSON.stringify(e),headers:r};let h,m;try{h=yield fetch(n,u)}catch(R){throw vs.create("fetch-network-error",{originalErrorMessage:R.message})}if(200!==h.status)throw vs.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(R){throw vs.create("fetch-parse-error",{originalErrorMessage:R.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw vs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const D=1e3*Number(w[1]),M=Date.now();return{token:m.attestationToken,expireTimeMillis:M+D,issuedAtTimeMillis:M}}),wT.apply(this,arguments)}function rR(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const s0="firebase-app-check-store";let ab=null;function QS(){return ab||(ab=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(vs.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(s0,{keyPath:"compositeKey"})}}catch(t){e(vs.create("storage-open",{originalErrorMessage:t.message}))}}),ab)}function IT(){return IT=(0,_e.Z)(function*(n,e){const r=(yield QS()).transaction(s0,"readwrite"),u=r.objectStore(s0).put({compositeKey:n,value:e});return new Promise((h,m)=>{u.onsuccess=w=>{h()},r.onerror=w=>{var D;m(vs.create("storage-set",{originalErrorMessage:null===(D=w.target.error)||void 0===D?void 0:D.message}))}})}),IT.apply(this,arguments)}const o0=new ku.Yd("@firebase/app-check");function tx(n,e){return(0,Bt.hl)()?function aR(n,e){return function JS(n,e){return IT.apply(this,arguments)}(function ex(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{o0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function nx(){return ib().enabled}function rx(){return TT.apply(this,arguments)}function TT(){return TT=(0,_e.Z)(function*(){const n=ib();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),TT.apply(this,arguments)}const fR={error:"UNKNOWN_ERROR"};function pR(n){return Bt.US.encodeString(JSON.stringify(n),!1)}function ub(n){return AT.apply(this,arguments)}function AT(){return AT=(0,_e.Z)(function*(n,e=!1){const t=n.app;KS(t);const r=gi(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&lb(w)&&(o=w)}if(!e&&o&&lb(o))return{token:o.token};let m,h=!1;if(nx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ET(rR(t,yield rx()),n.heartbeatServiceProvider).then(D=>(r.exchangeTokenPromise=void 0,D)),h=!0);const w=yield r.exchangeTokenPromise;return yield tx(t,w),Ka(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),h=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?o0.warn(w.message):o0.error(w),u=w}return o?(m={token:o.token},Ka(t,Object.assign(Object.assign({},r),{token:o})),yield tx(t,o)):m=mR(u),h&&sx(t,m),m}),AT.apply(this,arguments)}function xT(n,e){const t=gi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ka(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function ix(n){const{app:e}=n,t=gi(e);let r=t.tokenRefresher;r||(r=function gR(n){const{app:e}=n;return new Q1((0,_e.Z)(function*(){let r;if(r=gi(e).token?yield ub(n,!0):yield ub(n),r.error)throw r.error}),()=>!0,()=>{const t=gi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ka(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function sx(n,e){const t=gi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function lb(n){return n.expireTimeMillis-Date.now()>0}function mR(n){return{token:pR(fR),error:n}}class yR{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=gi(this.app);for(const t of e)xT(this.app,t.next);return Promise.resolve()}}const fx="app-check-internal";!function RR(){(0,Pu._registerComponent)(new Pg.wA("app-check",n=>function _R(n,e){return new yR(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(fx).initialize()})),(0,Pu._registerComponent)(new Pg.wA(fx,n=>function vR(n){return{getToken:e=>ub(n,e),addTokenListener:e=>function ST(n,e,t,r){const{app:o}=n,u=gi(o),h={next:t,error:r,type:e};if(Ka(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,h]})),u.token&&lb(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),ix(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>ix(n))}(n,"INTERNAL",e),removeTokenListener:e=>xT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Pu.registerVersion)("@firebase/app-check","0.5.5")}();class OT{constructor(){return(0,Or.vb)("app-check")}}"undefined"!=typeof window&&window;var FR=k(127);const gx=new d.OlP("angularfire2.auth.use-emulator"),mx=new d.OlP("angularfire2.auth.settings"),yx=new d.OlP("angularfire2.auth.tenant-id"),_x=new d.OlP("angularfire2.auth.langugage-code"),vx=new d.OlP("angularfire2.auth.use-device-language"),Ex=new d.OlP("angularfire.auth.persistence"),wx=(n,e,t,r,o,u,h,m)=>(0,Do.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),h)for(const[D,M]of Object.entries(h))w.settings[D]=M;return m&&w.setPersistence(m),w},[t,r,o,u,h,m]);let Ix=(()=>{class n{constructor(t,r,o,u,h,m,w,D,M,R,H,W){const fe=new lr.x,Fe=pt(void 0).pipe((0,nb.Q)(h.outsideAngular),Rn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,4087)))),(0,Ot.U)(()=>(0,Do.on)(t,u,r)),(0,Ot.U)(tt=>wx(tt,u,m,D,M,R,w,H)),GS({bufferSize:1,refCount:!1}));if(ar(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=pt(null);else{Fe.pipe(Bs()).subscribe();const qt=Fe.pipe(Rn(bt=>bt.getRedirectResult().then($t=>$t,()=>null)),Or.iC,GS({bufferSize:1,refCount:!1})),dt=Fe.pipe(Rn(bt=>new qr.y($t=>({unsubscribe:u.runOutsideAngular(()=>bt.onAuthStateChanged(Ht=>$t.next(Ht),Ht=>$t.error(Ht),()=>$t.complete()))})))),mn=Fe.pipe(Rn(bt=>new qr.y($t=>({unsubscribe:u.runOutsideAngular(()=>bt.onIdTokenChanged(Ht=>$t.next(Ht),Ht=>$t.error(Ht),()=>$t.complete()))}))));this.authState=qt.pipe(qS(dt),(0,mT.R)(h.outsideAngular),(0,nb.Q)(h.insideAngular)),this.user=qt.pipe(qS(mn),(0,mT.R)(h.outsideAngular),(0,nb.Q)(h.insideAngular)),this.idToken=this.user.pipe(Rn(bt=>bt?(0,xn.D)(bt.getIdToken()):pt(null))),this.idTokenResult=this.user.pipe(Rn(bt=>bt?(0,xn.D)(bt.getIdTokenResult()):pt(null))),this.credential=(0,L1.T)(qt,fe,this.authState.pipe(os(bt=>!bt))).pipe((0,Ot.U)(bt=>(null==bt?void 0:bt.user)?bt:null),(0,mT.R)(h.outsideAngular),(0,nb.Q)(h.insideAngular))}return(0,Do.pX)(this,Fe,u,{spy:{apply:(tt,qt,dt)=>{(tt.startsWith("signIn")||tt.startsWith("createUser"))&&dt.then(mn=>fe.next(mn))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Do.Dh),d.LFG(Do.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Or.HU),d.LFG(gx,8),d.LFG(mx,8),d.LFG(yx,8),d.LFG(_x,8),d.LFG(vx,8),d.LFG(Ex,8),d.LFG(OT,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function bx(n,e){return function VR(n,e=mE.z){return new qr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function kT(n,e){return bx(n,e).pipe((0,Ot.U)(t=>({payload:t,type:"query"})))}function db(n,e){return kT(n,e).pipe(bi(void 0),Og(),(0,Ot.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,m)=>{const w=o.find(M=>M.doc.ref.isEqual(h.ref)),D=null==t?void 0:t.payload.docs.find(M=>M.ref.isEqual(h.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(h.metadata)||!w&&D&&JSON.stringify(D.metadata)===JSON.stringify(h.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),u}))}function Cx(n,e,t){return db(n,t).pipe(vr((r,o)=>function BR(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function jR(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return FT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return FT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Fb(n,e=si.y){return n=null!=n?n:Lb,(0,Mr.e)((t,r)=>{let o,u=!0;t.subscribe((0,Ln.x)(r,h=>{const m=e(h);(u||!n(o,m))&&(u=!1,o=m,r.next(h))}))})}(),(0,Ot.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function FT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function Dx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Tx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=db(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ot.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(bi(void 0),Og(),os(([r,o])=>o.length>0||!r),(0,Ot.U)(([r,o])=>o),Or.iC)}auditTrail(e){return this.stateChanges(e).pipe(vr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Dx(e);return Cx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Or.iC)}valueChanges(e={}){return kT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Or.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(Or.iC)}add(e){return this.ref.add(e)}doc(e){return new Ax(this.ref.doc(e),this.afs)}}class Ax{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=Mx(r,t);return new Tx(o,u,this.afs)}snapshotChanges(){return function UR(n,e){return bx(n,e).pipe(bi(void 0),Og(),(0,Ot.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Or.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ot.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,xn.D)(this.ref.get(e)).pipe(Or.iC)}}class $R{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?db(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),os(t=>t.length>0),Or.iC):db(this.query,this.afs.schedulers.outsideAngular).pipe(Or.iC)}auditTrail(e){return this.stateChanges(e).pipe(vr((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Dx(e);return Cx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Or.iC)}valueChanges(e={}){return kT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Or.iC)}get(e){return(0,xn.D)(this.query.get(e)).pipe(Or.iC)}}const Sx=new d.OlP("angularfire2.enableFirestorePersistence"),xx=new d.OlP("angularfire2.firestore.persistenceSettings"),HR=new d.OlP("angularfire2.firestore.settings"),GR=new d.OlP("angularfire2.firestore.use-emulator");function Mx(n,e=(t=>t)){return{query:e(n),ref:n}}let sl=(()=>{class n{constructor(t,r,o,u,h,m,w,D,M,R,H,W,fe,Fe,tt,qt,dt){this.schedulers=w;const mn=(0,Do.on)(t,m,r),bt=M;R&&wx(mn,m,H,fe,Fe,tt,W,qt),[this.firestore,this.persistenceEnabled$]=(0,Do.cc)(`${mn.name}.firestore`,"AngularFirestore",mn.name,()=>{const $t=m.runOutsideAngular(()=>mn.firestore());if(u&&$t.settings(u),bt&&$t.useEmulator(...bt),o&&!ar(h)){const Ht=()=>{try{return(0,xn.D)($t.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(ol){return"undefined"!=typeof console&&console.warn(ol),pt(!1)}};return[$t,m.runOutsideAngular(Ht)]}return[$t,pt(!1)]},[u,bt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:h}=Mx(o,r),m=this.schedulers.ngZone.run(()=>u);return new Tx(m,h,this)}collectionGroup(t,r){const o=r||(h=>h),u=this.firestore.collectionGroup(t);return new $R(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new Ax(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Do.Dh),d.LFG(Do.xv,8),d.LFG(Sx,8),d.LFG(HR,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Or.HU),d.LFG(xx,8),d.LFG(GR,8),d.LFG(Ix,8),d.LFG(gx,8),d.LFG(mx,8),d.LFG(yx,8),d.LFG(_x,8),d.LFG(vx,8),d.LFG(Ex,8),d.LFG(OT,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qR=(()=>{class n{constructor(){FR.Z.registerVersion("angularfire",Or.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Sx,useValue:!0},{provide:xx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[sl]}),n})(),ZR=(()=>{class n{constructor(t){this.firebase=t}guardarComentarioProf(t){return this.firebase.collection("comProf").add(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(sl))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ry=(()=>{class n{constructor(t,r){this.document=t,this.platformId=r,this.documentIsAccessible=function xr(n){return n===Ss}(this.platformId)}static getCookieRegExp(t){const r=t.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+r+"|;\\s*"+r+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch(r){return t}}check(t){return!!this.documentIsAccessible&&(t=encodeURIComponent(t),n.getCookieRegExp(t).test(this.document.cookie))}get(t){if(this.documentIsAccessible&&this.check(t)){t=encodeURIComponent(t);const o=n.getCookieRegExp(t).exec(this.document.cookie);return o[1]?n.safeDecodeURIComponent(o[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const t={},r=this.document;return r.cookie&&""!==r.cookie&&r.cookie.split(";").forEach(o=>{const[u,h]=o.split("=");t[n.safeDecodeURIComponent(u.replace(/^ /,""))]=n.safeDecodeURIComponent(h)}),t}set(t,r,o,u,h,m,w){if(!this.documentIsAccessible)return;if("number"==typeof o||o instanceof Date||u||h||m||w)return void this.set(t,r,{expires:o,path:u,domain:h,secure:m,sameSite:w||"Lax"});let D=encodeURIComponent(t)+"="+encodeURIComponent(r)+";";const M=o||{};M.expires&&(D+="number"==typeof M.expires?"expires="+new Date((new Date).getTime()+1e3*M.expires*60*60*24).toUTCString()+";":"expires="+M.expires.toUTCString()+";"),M.path&&(D+="path="+M.path+";"),M.domain&&(D+="domain="+M.domain+";"),!1===M.secure&&"None"===M.sameSite&&(M.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),M.secure&&(D+="secure;"),M.sameSite||(M.sameSite="Lax"),D+="sameSite="+M.sameSite+";",this.document.cookie=D}delete(t,r,o,u,h="Lax"){if(!this.documentIsAccessible)return;const m=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(t,"",{expires:m,path:r,domain:o,secure:u,sameSite:h})}deleteAll(t,r,o,u="Lax"){if(!this.documentIsAccessible)return;const h=this.getAll();for(const m in h)h.hasOwnProperty(m)&&this.delete(m,t,r,o,u)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(re),d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zR(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",4),d.NdJ("click",function(){return d.CHM(t),d.oxw().salir()}),d._uU(1,"salir"),d.qZA()}}function WR(n,e){1&n&&(d.TgZ(0,"button",7),d._uU(1,"Registrarse"),d.qZA())}function KR(n,e){if(1&n&&(d.TgZ(0,"a",5),d.YNc(1,WR,2,0,"button",6),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.mostrar_reg)}}let LT=(()=>{class n{constructor(t,r){this.Cookie=t,this.router=r,this.usuario="Visitante",this.mostrar_loggout=!1,this.mostrar_reg=!0}ngOnInit(){null!=this.Cookie.get("loggeado")&&""!=this.Cookie.get("loggeado")?(this.usuario=this.Cookie.get("loggeado"),this.mostrar_loggout=!0,this.mostrar_reg=!1):(this.usuario="Visitante",this.mostrar_loggout=!1,this.mostrar_reg=!0)}salir(){sessionStorage.clear(),localStorage.clear(),this.Cookie.deleteAll(),this.router.navigate([""])}cargar(){null!=this.Cookie.get("loggeado")?(this.usuario=this.Cookie.get("loggeado"),this.mostrar_loggout=!0):this.usuario="Visitante"}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ry),d.Y36(qn))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-bienvenido"]],decls:5,vars:3,consts:[[1,"b"],[1,"a"],["class","btn btn-success pull-left",3,"click",4,"ngIf"],["href","RegUsu",4,"ngIf"],[1,"btn","btn-success","pull-left",3,"click"],["href","RegUsu"],["class","btn btn-success pull-left",4,"ngIf"],[1,"btn","btn-success","pull-left"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"p",1),d._uU(2),d.qZA(),d.YNc(3,zR,2,0,"button",2),d.YNc(4,KR,2,1,"a",3),d.qZA()),2&t&&(d.xp6(2),d.hij("Bienvenido ",r.usuario,""),d.xp6(1),d.Q6J("ngIf",r.mostrar_loggout),d.xp6(1),d.Q6J("ngIf",r.mostrar_reg))},directives:[or],styles:[".a[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;font-weight:700}.b[_ngcontent-%COMP%]{background-color:bisque;padding:10px}"]}),n})(),YR=(()=>{class n{constructor(t){this.firebase=t}obtenerCarreras(){return this.firebase.collection("Universidades").snapshotChanges()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(sl))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function QR(n,e){if(1&n&&(d.TgZ(0,"a",4),d._uU(1),d.qZA()),2&n){const t=e.$implicit,r=d.oxw().$implicit;d.hYB("href","Pag/",r,"/",t.stringValue,"",d.LSH),d.xp6(1),d.Oqu(t.stringValue)}}function JR(n,e){if(1&n&&(d.TgZ(0,"ul",1)(1,"a",2),d._uU(2),d.qZA(),d.YNc(3,QR,2,3,"a",3),d.qZA()),2&n){const t=e.$implicit,r=d.oxw();d.xp6(2),d.hij(" ",t," "),d.xp6(1),d.Q6J("ngForOf",r.cosa[t].arrayValue.values)}}let VT=(()=>{class n{constructor(t){this._carreras=t,this.listaUniversidades=[],this.listaCarreras=[],this.diccionario={}}ngOnInit(){this.ObtenerCarrerasF()}ObtenerCarrerasF(){this._carreras.obtenerCarreras().subscribe(t=>{this.listaCarreras=[],this.listaUniversidades=[],t.forEach(r=>{this.cosa=r.payload._delegate.doc._document.data.value.mapValue.fields;for(let o in this.cosa)this.listaUniversidades.push(o),this.cosa[o].arrayValue.values.forEach(u=>{this.listaCarreras.push(u)})})})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(YR))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-navegador"]],decls:1,vars:1,consts:[["class","list-group",4,"ngFor","ngForOf"],[1,"list-group"],[1,"list-group-item","list-group-item-action","active"],["id","escondido","class","list-group-item list-group-item-action",3,"href",4,"ngFor","ngForOf"],["id","escondido",1,"list-group-item","list-group-item-action",3,"href"]],template:function(t,r){1&t&&d.YNc(0,JR,4,2,"ul",0),2&t&&d.Q6J("ngForOf",r.listaUniversidades)},directives:[An],styles:[".list-group-item[_ngcontent-%COMP%]{font-size:small}"]}),n})();function XR(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"div",20),d.NdJ("click",function(){const u=d.CHM(t).$implicit;return d.oxw().IrMat(u)}),d.TgZ(2,"p"),d._uU(3),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(3),d.Oqu(t)}}function eN(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",21)(1,"p",22),d.NdJ("click",function(){return d.CHM(t),d.oxw().cerrarpop2()}),d._uU(2,"X"),d.qZA(),d.TgZ(3,"form",14),d.NdJ("ngSubmit",function(){return d.CHM(t),d.oxw().crearMat()}),d.TgZ(4,"div",4)(5,"div",8)(6,"span",15)(7,"p",16),d._uU(8,"Nombre de la Materia"),d.qZA()(),d._UZ(9,"input",23),d.qZA()(),d.TgZ(10,"div",4)(11,"div",8)(12,"button",19),d._uU(13,"Agregar"),d.qZA()()()()()}if(2&n){const t=d.oxw();d.xp6(3),d.Q6J("formGroup",t.form)}}function tN(n,e){if(1&n&&(d.TgZ(0,"div",24)(1,"div",25)(2,"div",26)(3,"p",27),d._uU(4),d.qZA(),d.TgZ(5,"p"),d._uU(6),d.qZA()(),d._UZ(7,"hr"),d.TgZ(8,"p"),d._uU(9),d.qZA()()()),2&n){const t=e.index,r=d.oxw();d.xp6(4),d.hij("",r.listaPuntuacionComentarios[t],"/10"),d.xp6(2),d.Oqu(r.listaNombresComentarios[t]),d.xp6(3),d.Oqu(r.listaComentarios[t])}}function nN(n,e){1&n&&(d.TgZ(0,"div",28)(1,"span",29),d._uU(2,"Loading..."),d.qZA()())}let rN=(()=>{class n{constructor(t,r,o,u,h,m){this.router=t,this.route=r,this.fb=o,this._comentario=u,this.firebase=h,this.Cookie=m,this.loading=!1,this.usuario="",this.m_pop2=!1,this.listaComentarios=[],this.listaNombresComentarios=[],this.listaPuntuacionComentarios=[],this.listaProf=[],this.puntuacionAcumulada=0,this.form=this.fb.group({puntuacion:[0],comentarios:[""],materia:[""]})}ngOnInit(){this.uni=this.route.snapshot.paramMap.get("uni"),this.carr=this.route.snapshot.paramMap.get("carr"),this.prof=this.route.snapshot.paramMap.get("prof"),this.usuario=this.Cookie.get("loggeado"),(null==this.usuario||""==this.usuario)&&(this.usuario="Visitante"),this.firebase.collection("comProf").snapshotChanges().subscribe(t=>{this.listaComentarios=[],t.forEach(o=>{let u=o.payload._delegate.doc._document.data.value.mapValue.fields;u.nombre.stringValue==this.prof&&(this.listaComentarios.push(u.comentarios.stringValue),this.listaNombresComentarios.push(u.usuario.stringValue),this.listaPuntuacionComentarios.push(u.puntuacion.integerValue))});for(var r=0;r<this.listaPuntuacionComentarios.length;r++)this.puntuacionAcumulada=this.puntuacionAcumulada+Number(this.listaPuntuacionComentarios[r]);this.puntuacion=this.puntuacionAcumulada/this.listaPuntuacionComentarios.length,isNaN(this.puntuacion)&&(this.puntuacion=0)}),this.nombreP=this.uni+this.carr+"P",this.firebase.collection(this.nombreP).snapshotChanges().subscribe(t=>{this.listaProf=[],t.forEach(r=>{let o=r.payload._delegate.doc._document.data.value.mapValue.fields.Nombre.stringValue;-1==this.listaProf.indexOf(o)&&o==this.prof&&this.listaProf.push(r.payload._delegate.doc._document.data.value.mapValue.fields.Materia.stringValue)})})}crearComent(){const t={usuario:this.usuario,nombre:this.prof,materia:this.form.value.materia,puntuacion:this.form.value.puntuacion,comentarios:this.form.value.comentarios,universidad:this.uni,carrera:this.carr};this.loading=!0,this._comentario.guardarComentarioProf(t).then(()=>{this.loading=!1,console.log("todo correcto"),this.form.reset()})}crearMat(){const t={Materia:this.form.value.materia,Prof:this.prof};this.firebase.collection(this.nombreP).add(t).then(()=>{window.location.reload()})}activarForm(){this.m_pop2=!0}IrMat(t){this.router.navigate(["EMat",this.uni,this.carr,t])}cerrarpop2(){this.m_pop2=!1}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(qn),d.Y36(cs),d.Y36(sc),d.Y36(ZR),d.Y36(sl),d.Y36(ry))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-eprof-component"]],decls:57,vars:7,consts:[[1,"row"],[1,"col"],[1,"navegador"],[1,"col-lg-10"],[1,"row","mt-2"],[1,"card"],[1,"card-body"],[4,"ngFor","ngForOf"],[1,"input-group","input-group-lg","mb3"],[1,"btn","btn-success","btn-lg",3,"click"],["class","pop",4,"ngIf"],["class","a",4,"ngFor","ngForOf"],[1,"titulo1"],["class","spinner-border float-end","role","status",4,"ngIf"],[1,"formulario1",3,"formGroup","ngSubmit"],[1,"input-group-text"],[1,"spam1"],["type","number","formControlName","puntuacion","placeholder","Inserte un numero del 1 al 10","min","0","max","10",1,"form-control"],["type","text","formControlName","comentarios",1,"form-control"],["type","submit",1,"btn","btn-success","btn-lg"],["type","button",1,"a",3,"click"],[1,"pop"],["type","button",1,"cerrar",3,"click"],["type","text","formControlName","nombreP","placeholder","Nombre",1,"form-control"],[1,"a"],[1,"b"],[1,"d"],[1,"c"],["role","status",1,"spinner-border","float-end"],[1,"visually-hidden"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",0),d._UZ(3,"app-bienvenido"),d.qZA(),d.TgZ(4,"div",0)(5,"div",2),d._UZ(6,"app-navegador"),d.qZA()()(),d.TgZ(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"h1"),d._uU(12),d.qZA(),d._UZ(13,"hr"),d.TgZ(14,"h3"),d._uU(15),d.qZA()()()(),d.TgZ(16,"div",4)(17,"div",5)(18,"div",6)(19,"h1"),d._uU(20,"Materias"),d.qZA(),d._UZ(21,"hr"),d.YNc(22,XR,4,1,"div",7),d.TgZ(23,"div",8)(24,"button",9),d.NdJ("click",function(){return r.activarForm()}),d._uU(25,"Agregar Materia"),d.qZA()()()()(),d.YNc(26,eN,14,1,"div",10),d.TgZ(27,"div",4)(28,"div",5)(29,"div",6)(30,"h1"),d._uU(31,"Seccion de comentarios"),d.qZA(),d._UZ(32,"hr"),d.YNc(33,tN,10,3,"div",11),d.qZA()()(),d.TgZ(34,"div",4)(35,"div",5)(36,"div",6)(37,"h2",12),d._uU(38,"Comentario "),d.YNc(39,nN,3,0,"div",13),d.qZA(),d._UZ(40,"hr"),d.TgZ(41,"form",14),d.NdJ("ngSubmit",function(){return r.crearComent()}),d.TgZ(42,"div",4)(43,"div",8)(44,"span",15)(45,"p",16),d._uU(46,"puntuacion"),d.qZA()(),d._UZ(47,"input",17),d.qZA()(),d.TgZ(48,"div",4)(49,"div",8)(50,"span",15)(51,"p",16),d._uU(52,"comentario"),d.qZA()(),d._UZ(53,"input",18),d.qZA()(),d.TgZ(54,"div",4)(55,"button",19),d._uU(56,"Subir comentario"),d.qZA()()()()()()()()),2&t&&(d.xp6(12),d.Oqu(r.prof),d.xp6(3),d.hij("",r.puntuacion,"/10"),d.xp6(7),d.Q6J("ngForOf",r.listaProf),d.xp6(4),d.Q6J("ngIf",r.m_pop2),d.xp6(7),d.Q6J("ngForOf",r.listaComentarios),d.xp6(6),d.Q6J("ngIf",r.loading),d.xp6(2),d.Q6J("formGroup",r.form))},directives:[LT,VT,An,or,nc,Jl,Ou,Na,Dd,rc,Dg,Rg,Md],styles:[".a[_ngcontent-%COMP%]{margin:10px;padding:0 20px;background-color:#c7e4fe;border-radius:20px}.b[_ngcontent-%COMP%]{padding:10px}.c[_ngcontent-%COMP%]{float:right}.d[_ngcontent-%COMP%]{width:100%;border-color:#000}.col[_ngcontent-%COMP%]{max-width:300px}"]}),n})(),iN=(()=>{class n{constructor(t){this.firebase=t}guardarComentarioMat(t){return this.firebase.collection("comMat").add(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(sl))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sN(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"div",20),d.NdJ("click",function(){const u=d.CHM(t).$implicit;return d.oxw().IrProf(u)}),d.TgZ(2,"p"),d._uU(3),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(3),d.Oqu(t)}}function oN(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",21)(1,"p",22),d.NdJ("click",function(){return d.CHM(t),d.oxw().cerrarpop2()}),d._uU(2,"X"),d.qZA(),d.TgZ(3,"form",14),d.NdJ("ngSubmit",function(){return d.CHM(t),d.oxw().crearProf()}),d.TgZ(4,"div",4)(5,"div",8)(6,"span",15)(7,"p",16),d._uU(8,"Nombre del Profesor"),d.qZA()(),d._UZ(9,"input",23),d.qZA()(),d.TgZ(10,"div",4)(11,"div",8)(12,"button",19),d._uU(13,"Agregar"),d.qZA()()()()()}if(2&n){const t=d.oxw();d.xp6(3),d.Q6J("formGroup",t.form)}}function aN(n,e){if(1&n&&(d.TgZ(0,"div",24)(1,"div",25)(2,"div",26)(3,"p",27),d._uU(4),d.qZA(),d.TgZ(5,"p"),d._uU(6),d.qZA()(),d._UZ(7,"hr"),d.TgZ(8,"p"),d._uU(9),d.qZA()()()),2&n){const t=e.index,r=d.oxw();d.xp6(4),d.hij("",r.listaPuntuacionComentarios[t],"/10"),d.xp6(2),d.Oqu(r.listaNombresComentarios[t]),d.xp6(3),d.Oqu(r.listaComentarios[t])}}function uN(n,e){1&n&&(d.TgZ(0,"div",28)(1,"span",29),d._uU(2,"Loading..."),d.qZA()())}let lN=(()=>{class n{constructor(t,r,o,u,h,m){this.router=t,this.route=r,this.fb=o,this._comentario=u,this.firebase=h,this.Cookie=m,this.usuario="",this.loading=!1,this.m_pop2=!1,this.listaComentarios=[],this.listaNombresComentarios=[],this.listaPuntuacionComentarios=[],this.listaProf=[],this.puntuacionAcumulada=0,this.form=this.fb.group({puntuacion:[0],comentarios:[""],nombreP:[""]})}ngOnInit(){this.uni=this.route.snapshot.paramMap.get("uni"),this.carr=this.route.snapshot.paramMap.get("carr"),this.mat=this.route.snapshot.paramMap.get("mat"),this.usuario=this.Cookie.get("loggeado"),console.log("El usuario es:"),console.log(this.usuario),(null==this.usuario||""==this.usuario)&&(this.usuario="Visitante"),this.firebase.collection("comMat").snapshotChanges().subscribe(t=>{this.listaComentarios=[],t.forEach(o=>{let u=o.payload._delegate.doc._document.data.value.mapValue.fields;u.materia.stringValue==this.mat&&u.carrera.stringValue==this.carr&&u.universidad.stringValue==this.uni&&(this.listaComentarios.push(u.comentarios.stringValue),this.listaNombresComentarios.push(u.usuario.stringValue),this.listaPuntuacionComentarios.push(u.puntuacion.integerValue))}),console.log(this.listaPuntuacionComentarios.length),console.log(this.listaPuntuacionComentarios);for(var r=0;r<this.listaPuntuacionComentarios.length;r++)this.puntuacionAcumulada=this.puntuacionAcumulada+Number(this.listaPuntuacionComentarios[r]);this.puntuacion=this.puntuacionAcumulada/this.listaPuntuacionComentarios.length,isNaN(this.puntuacion)&&(this.puntuacion=0)}),this.nombreP=this.uni+this.carr+"P",this.firebase.collection(this.nombreP).snapshotChanges().subscribe(t=>{this.listaProf=[],t.forEach(r=>{let o=r.payload._delegate.doc._document.data.value.mapValue.fields.Materia.stringValue;-1==this.listaProf.indexOf(o)&&o==this.mat&&this.listaProf.push(r.payload._delegate.doc._document.data.value.mapValue.fields.Nombre.stringValue)})})}crearComent(){const t={usuario:this.usuario,materia:this.mat,puntuacion:this.form.value.puntuacion,comentarios:this.form.value.comentarios,universidad:this.uni,carrera:this.carr};this.loading=!0,this._comentario.guardarComentarioMat(t).then(()=>{this.loading=!1,window.location.reload()})}crearProf(){const t={Nombre:this.form.value.nombreP,Materia:this.mat};this.firebase.collection(this.nombreP).add(t).then(()=>{window.location.reload()})}activarForm(){this.m_pop2=!0}IrProf(t){this.router.navigate(["EProf",this.uni,this.carr,t])}cerrarpop2(){this.m_pop2=!1}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(qn),d.Y36(cs),d.Y36(sc),d.Y36(iN),d.Y36(sl),d.Y36(ry))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-emat-component"]],decls:57,vars:9,consts:[[1,"row"],[1,"col"],[1,"navegador"],[1,"col-lg-10"],[1,"row","mt-2"],[1,"card"],[1,"card-body"],[4,"ngFor","ngForOf"],[1,"input-group","input-group-lg","mb3"],[1,"btn","btn-success","btn-lg",3,"click"],["class","pop",4,"ngIf"],["class","a",4,"ngFor","ngForOf"],[1,"titulo1"],["class","spinner-border float-end","role","status",4,"ngIf"],[1,"formulario1",3,"formGroup","ngSubmit"],[1,"input-group-text"],[1,"spam1"],["type","number","formControlName","puntuacion","placeholder","Inserte un numero del 1 al 10","min","0","max","10",1,"form-control"],["type","text","formControlName","comentarios",1,"form-control"],["type","submit",1,"btn","btn-success","btn-lg"],["type","button",1,"a",3,"click"],[1,"pop"],["type","button",1,"cerrar",3,"click"],["type","text","formControlName","nombreP","placeholder","Nombre",1,"form-control"],[1,"a"],[1,"b"],[1,"d"],[1,"c"],["role","status",1,"spinner-border","float-end"],[1,"visually-hidden"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",0),d._UZ(3,"app-bienvenido"),d.qZA(),d.TgZ(4,"div",0)(5,"div",2),d._UZ(6,"app-navegador"),d.qZA()()(),d.TgZ(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"h1"),d._uU(12),d.qZA(),d._UZ(13,"hr"),d.TgZ(14,"h3"),d._uU(15),d.qZA()()()(),d.TgZ(16,"div",4)(17,"div",5)(18,"div",6)(19,"h1"),d._uU(20,"Profesores"),d.qZA(),d._UZ(21,"hr"),d.YNc(22,sN,4,1,"div",7),d.TgZ(23,"div",8)(24,"button",9),d.NdJ("click",function(){return r.activarForm()}),d._uU(25,"Agregar Profesor"),d.qZA()()()()(),d.YNc(26,oN,14,1,"div",10),d.TgZ(27,"div",4)(28,"div",5)(29,"div",6)(30,"h1"),d._uU(31,"Seccion de comentarios"),d.qZA(),d._UZ(32,"hr"),d.YNc(33,aN,10,3,"div",11),d.qZA()()(),d.TgZ(34,"div",4)(35,"div",5)(36,"div",6)(37,"h2",12),d._uU(38,"Comentario "),d.YNc(39,uN,3,0,"div",13),d.qZA(),d._UZ(40,"hr"),d.TgZ(41,"form",14),d.NdJ("ngSubmit",function(){return r.crearComent()}),d.TgZ(42,"div",4)(43,"div",8)(44,"span",15)(45,"p",16),d._uU(46,"puntuacion"),d.qZA()(),d._UZ(47,"input",17),d.qZA()(),d.TgZ(48,"div",4)(49,"div",8)(50,"span",15)(51,"p",16),d._uU(52,"comentario"),d.qZA()(),d._UZ(53,"input",18),d.qZA()(),d.TgZ(54,"div",4)(55,"button",19),d._uU(56,"Subir comentario"),d.qZA()()()()()()()()),2&t&&(d.xp6(12),d.Oqu(r.mat),d.xp6(3),d.lnq("",r.carr," (",r.uni,") ",r.puntuacion,"/10"),d.xp6(7),d.Q6J("ngForOf",r.listaProf),d.xp6(4),d.Q6J("ngIf",r.m_pop2),d.xp6(7),d.Q6J("ngForOf",r.listaComentarios),d.xp6(6),d.Q6J("ngIf",r.loading),d.xp6(2),d.Q6J("formGroup",r.form))},directives:[LT,VT,An,or,nc,Jl,Ou,Na,Dd,rc,Dg,Rg,Md],styles:[".a[_ngcontent-%COMP%]{margin:10px;padding:0 20px;background-color:#c7e4fe;border-radius:20px}.b[_ngcontent-%COMP%]{padding:10px}.c[_ngcontent-%COMP%]{float:right}.d[_ngcontent-%COMP%]{width:100%;border-color:#000}.col[_ngcontent-%COMP%]{max-width:300px}"]}),n})(),cN=(()=>{class n{constructor(t){this.firebase=t}guardarUsuario(t){return this.firebase.collection("usuarios").add(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(sl))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dN(n,e){1&n&&(d.TgZ(0,"div",16)(1,"span",17),d._uU(2,"Loading..."),d.qZA()())}function hN(n,e){1&n&&(d.TgZ(0,"div",6)(1,"span",7)(2,"p",8),d._uU(3,"Carrera"),d.qZA()(),d._UZ(4,"input",18),d.qZA())}function fN(n,e){if(1&n&&(d.TgZ(0,"ul",19)(1,"li",20),d._uU(2),d.qZA()()),2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t)}}let Rx=(()=>{class n{constructor(t,r,o,u,h){this.router=t,this.fb=r,this._Usuario=o,this.firebase=u,this.Cookie=h,this.loading=!1,this.repetido=!1,this.mostrarC=!1,this.listaCarreras=[],this.listaUsuario=[],this.form=this.fb.group({correo:[""],Nombre:[""],contrase\u00f1a:[""],universidad:[""],carrera:[""]})}ngOnInit(){this.CargarUSu()}crearUsu(){if(this.repetido=this.ComprobarUsu(),console.log(this.repetido),console.log("has salido de comprobar Usu"),this.repetido)alert("Correo ya existente, introduzca otro");else if("UC3M"!=this.form.value.universidad&&"UPM"!=this.form.value.universidad&&"UCM"!=this.form.value.universidad&&"Rey Juan Carlos"!=this.form.value.universidad)alert("Inserte una universidad valida");else{const t={nombre:this.form.value.Nombre,contrase\u00f1a:this.form.value.contrase\u00f1a,correo:this.form.value.correo,universidad:this.form.value.universidad,carrera:this.form.value.carrera};this.loading=!0,this._Usuario.guardarUsuario(t).then(()=>{this.loading=!1,console.log("todo correcto"),this.form.reset(),this.Cookie.set("loggeado",this.form.value.correo)}),this.router.navigate(["Pag"])}}ActualizarCheckBox(){console.log("cambio"),this.mostrarC=!0,this.ObtenerCarrerasF()}CargarUSu(){console.log("cargado usuarios"),this.firebase.collection("usuarios").snapshotChanges().subscribe(t=>{t.forEach(r=>{this.listaUsuario.push(r.payload._delegate.doc._document.data.value.mapValue.fields.correo.stringValue)})})}ComprobarUsu(){return console.log("Has entrado"),console.log(this.listaUsuario),console.log(this.form.value.correo),-1!=this.listaUsuario.indexOf(this.form.value.correo)}ObtenerCarrerasF(){"UC3M"!=this.form.value.universidad&&"UPM"!=this.form.value.universidad&&"UCM"!=this.form.value.universidad&&"Rey Juan Carlos"!=this.form.value.universidad?this.listaCarreras.push("Escriba una carrera valida"):this.firebase.collection("Universidades").snapshotChanges().subscribe(t=>{this.listaCarreras=[],t.forEach(r=>{let o=r.payload._delegate.doc._document.data.value.mapValue.fields;for(let u in o)u==this.form.value.universidad&&o[u].arrayValue.values.forEach(h=>{this.listaCarreras.push(h.stringValue)})})})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(qn),d.Y36(sc),d.Y36(cN),d.Y36(sl),d.Y36(ry))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-reg-usu"]],decls:37,vars:4,consts:[[1,"row","mt-4"],[1,"card"],[1,"card-body"],[1,"titulo1"],["class","spinner-border float-end","role","status",4,"ngIf"],[1,"formulario1",3,"formGroup","ngSubmit"],[1,"input-group","input-group-lg","mb3"],[1,"input-group-text"],[1,"spam1"],["type","text","formControlName","universidad","placeholder","Rey Juan Carlos/UC3M/UCM/UPM","required","",1,"form-control",3,"focusout"],["class","input-group input-group-lg mb3",4,"ngIf"],["class","list-group",4,"ngFor","ngForOf"],["type","email","formControlName","Correo","placeholder","Correo","required","",1,"form-control"],["type","text","formControlName","Nombre","placeholder","Nombre de usuario","required","",1,"form-control"],["type","password","formControlName","contrase\xf1a","placeholder","Contrase\xf1a","required","",1,"form-control"],["type","submit",1,"btn","btn-success","btn-lg"],["role","status",1,"spinner-border","float-end"],[1,"visually-hidden"],["type","text","formControlName","carrera","placeholder","escriba una de las opciones de abajo","required","",1,"form-control"],[1,"list-group"],[1,"extra"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),d._uU(4,"Unete "),d.YNc(5,dN,3,0,"div",4),d.qZA(),d.TgZ(6,"form",5),d.NdJ("ngSubmit",function(){return r.crearUsu()}),d.TgZ(7,"div",0)(8,"div",6)(9,"span",7)(10,"p",8),d._uU(11,"Universidad"),d.qZA()(),d.TgZ(12,"input",9),d.NdJ("focusout",function(){return r.ActualizarCheckBox()}),d.qZA()()(),d.TgZ(13,"div",0),d.YNc(14,hN,5,0,"div",10),d.qZA(),d.YNc(15,fN,3,1,"ul",11),d.TgZ(16,"div",0)(17,"div",6)(18,"span",7)(19,"p",8),d._uU(20,"Correo-electronico"),d.qZA()(),d._UZ(21,"input",12),d.qZA()(),d.TgZ(22,"div",0)(23,"div",6)(24,"span",7)(25,"p",8),d._uU(26,"Nombre usuario"),d.qZA()(),d._UZ(27,"input",13),d.qZA()(),d.TgZ(28,"div",0)(29,"div",6)(30,"span",7)(31,"p",8),d._uU(32,"Contrase\xf1a"),d.qZA()(),d._UZ(33,"input",14),d.qZA()(),d.TgZ(34,"div",0)(35,"button",15),d._uU(36,"Registrarse"),d.qZA()()()()()()),2&t&&(d.xp6(5),d.Q6J("ngIf",r.loading),d.xp6(1),d.Q6J("formGroup",r.form),d.xp6(8),d.Q6J("ngIf",r.mostrarC),d.xp6(1),d.Q6J("ngForOf",r.listaCarreras))},directives:[or,nc,Jl,Ou,Na,Dd,rc,Ef,An],styles:[".titulo1[_ngcontent-%COMP%]{text-align:center;font-family:Rubik Bubbles,cursive}.spam1[_ngcontent-%COMP%]{width:180px}.spinner-border[_ngcontent-%COMP%]{height:1,5em;width:1,5em}.extra[_ngcontent-%COMP%]{list-style:none}"]}),n})(),pN=(()=>{class n{constructor(t,r,o,u){this.router=t,this.fb=r,this.firebase=o,this.Cookie=u,this.repetido=!1,this.Existe=!1,this.listaUsuario=[],this.form=this.fb.group({correo:[""],contrase\u00f1a:[""]})}ngOnInit(){this.CargarUSu()}viajarSinRegistrarse(){this.router.navigate(["Pag"])}checkUsu(){this.ObtenerUsuario(),this.repetido=this.ComprobarUsu(),console.log(this.repetido),console.log(this.Existe),this.repetido?(alert("Usuario no existente"),console.log(this.listaUsuario)):(this.router.navigate(["Pag"]),this.Cookie.set("loggeado",this.form.value.correo))}CargarUSu(){console.log("cargado usuarios"),this.firebase.collection("usuarios").snapshotChanges().subscribe(t=>{t.forEach(r=>{this.listaUsuario.push(r.payload._delegate.doc._document.data.value.mapValue.fields.correo.stringValue)})})}ComprobarUsu(){return console.log("Has entrado"),console.log(this.listaUsuario),console.log(this.form.value.correo),!this.listaUsuario.includes(this.form.value.correo)}ObtenerUsuario(){this.repetido=this.ComprobarUsu(),this.firebase.collection("usuarios").snapshotChanges().subscribe(t=>{t.forEach(r=>{let o=r.payload._delegate.doc._document.data.value.mapValue.fields;console.log(o.correo),o.correo.stringValue==this.form.value.correo&&o.contrase\u00f1a.stringValue==this.form.value.contrase\u00f1a&&(this.Existe=!0)})})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(qn),d.Y36(sc),d.Y36(sl),d.Y36(ry))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home-component"]],decls:42,vars:1,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-lg-8","offset-lg-2"],[1,"card"],[1,"card-body"],[1,"titulo1"],[1,"row","mt-4"],[1,"col-lg-6"],[1,"formulario1",3,"formGroup","ngSubmit"],[1,"input-group","input-group-lg","mb3"],[1,"input-group-text"],[1,"spam1"],["type","email","formControlName","correo","placeholder","Escriba su Correo",1,"form-control"],["type","password","formControlName","contrase\xf1a","placeholder","Escriba su contrase\xf1a",1,"form-control"],["type","submit",1,"btn","btn-success","btn-lg"],[1,"btn","btn-success","btn-lg",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),d._uU(6,"Bienvenido"),d.qZA()()()()(),d.TgZ(7,"div",6)(8,"div",7),d._UZ(9,"app-reg-usu"),d.qZA(),d.TgZ(10,"div",7)(11,"div",6)(12,"div",3)(13,"div",4)(14,"h2",5),d._uU(15,"\xbfYa tienes una cuenta?"),d.qZA(),d.TgZ(16,"form",8),d.NdJ("ngSubmit",function(){return r.checkUsu()}),d.TgZ(17,"div",6)(18,"div",9)(19,"span",10)(20,"p",11),d._uU(21,"Correo-electronico"),d.qZA()(),d._UZ(22,"input",12),d.qZA()(),d.TgZ(23,"div",6)(24,"div",9)(25,"span",10)(26,"p",11),d._uU(27,"Contrase\xf1a"),d.qZA()(),d._UZ(28,"input",13),d.qZA()(),d.TgZ(29,"div",6)(30,"button",14),d._uU(31,"Iniciar sesion"),d.qZA()()()()()(),d.TgZ(32,"div",6)(33,"div",3)(34,"div",4)(35,"div",1)(36,"h2",5),d._uU(37,"Explorar el modo sin iniciar sesion"),d.qZA(),d.TgZ(38,"p",5),d._uU(39,"Algunas funciones estaran restringidas"),d.qZA(),d.TgZ(40,"button",15),d.NdJ("click",function(){return r.viajarSinRegistrarse()}),d._uU(41,"Seguir sin registrarse"),d.qZA()()()()()()()()),2&t&&(d.xp6(16),d.Q6J("formGroup",r.form))},directives:[Rx,nc,Jl,Ou,Na,Dd,rc],styles:[".titulo1[_ngcontent-%COMP%]{text-align:center;font-family:Rubik Bubbles,cursive}.spam1[_ngcontent-%COMP%]{width:180px}"]}),n})();const Nx_firebase={apiKey:"AIzaSyDAzfCuUDkz3Qw9ZFqfiNiYyuIYlE8p5Po",authDomain:"sistemas-interactivos-a2594.firebaseapp.com",projectId:"sistemas-interactivos-a2594",storageBucket:"sistemas-interactivos-a2594.appspot.com",messagingSenderId:"207168807617",appId:"1:207168807617:web:6c7a7ace4ca148d5b1ea40"};function gN(n,e){1&n&&(d.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"h1"),d._uU(5,"Empieza eligiendo una materia"),d.qZA()()()()())}function mN(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",9)(1,"div",10)(2,"a",11),d.NdJ("click",function(){const u=d.CHM(t).$implicit;return d.oxw(2).ComentarMat(u)}),d._uU(3),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(3),d.hij(" ",t," ")}}function yN(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",13)(1,"p",14),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).cerrarpop()}),d._uU(2,"X"),d.qZA(),d.TgZ(3,"form",15),d.NdJ("ngSubmit",function(){return d.CHM(t),d.oxw(2).crearMat()}),d.TgZ(4,"div",16)(5,"div",17)(6,"span",18)(7,"p",19),d._uU(8,"Nombre del Profesor"),d.qZA()(),d._UZ(9,"input",20),d.qZA(),d.TgZ(10,"div",17)(11,"span",18)(12,"p",19),d._uU(13,"Nombre de la materia"),d.qZA()(),d._UZ(14,"input",21),d.qZA()(),d.TgZ(15,"div",16)(16,"div",17)(17,"button",22),d._uU(18,"Registrarse"),d.qZA()()()()()}if(2&n){const t=d.oxw(2);d.xp6(3),d.Q6J("formGroup",t.form)}}function _N(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",9)(1,"div",10)(2,"a",11),d.NdJ("click",function(){const u=d.CHM(t).$implicit;return d.oxw(2).ComentarProf(u)}),d._uU(3),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(3),d.hij(" ",t," ")}}function vN(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",13)(1,"p",14),d.NdJ("click",function(){return d.CHM(t),d.oxw(2).cerrarpop2()}),d._uU(2,"X"),d.qZA(),d.TgZ(3,"form",15),d.NdJ("ngSubmit",function(){return d.CHM(t),d.oxw(2).crearProf()}),d.TgZ(4,"div",16)(5,"div",17)(6,"span",18)(7,"p",19),d._uU(8,"Nombre del Profesor"),d.qZA()(),d._UZ(9,"input",23),d.qZA(),d.TgZ(10,"div",17)(11,"span",18)(12,"p",19),d._uU(13,"Nombre de la materia"),d.qZA()(),d._UZ(14,"input",24),d.qZA()(),d.TgZ(15,"div",16)(16,"div",17)(17,"button",22),d._uU(18,"Registrarse"),d.qZA()()()()()}if(2&n){const t=d.oxw(2);d.xp6(3),d.Q6J("formGroup",t.form)}}function EN(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"h1"),d._uU(5),d.qZA()()()(),d.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"h2"),d._uU(10,"Materias"),d.qZA(),d._UZ(11,"hr"),d.YNc(12,mN,4,1,"div",8),d.TgZ(13,"div",9)(14,"div",10)(15,"a",11),d.NdJ("click",function(){return d.CHM(t),d.oxw().activarpop()}),d._uU(16,"Agregar Materia"),d.qZA()()(),d.YNc(17,yN,19,1,"div",12),d.qZA(),d.TgZ(18,"div",5)(19,"h2"),d._uU(20,"Profesores"),d.qZA(),d._UZ(21,"hr"),d.YNc(22,_N,4,1,"div",8),d.TgZ(23,"div",9)(24,"div",10)(25,"a",11),d.NdJ("click",function(){return d.CHM(t),d.oxw().activarpop2()}),d._uU(26,"Agregar Profesor"),d.qZA()()(),d.YNc(27,vN,19,1,"div",12),d.qZA()()()()}if(2&n){const t=d.oxw();d.xp6(5),d.AsE("",t.carr,"(",t.uni,")"),d.xp6(7),d.Q6J("ngForOf",t.listaMaterias),d.xp6(5),d.Q6J("ngIf",t.m_pop),d.xp6(5),d.Q6J("ngForOf",t.listaProf),d.xp6(5),d.Q6J("ngIf",t.m_pop2)}}let Ox=(()=>{class n{constructor(t,r,o,u){this.router=t,this.firebase=r,this.route=o,this.fb=u,this.m_pop=!1,this.m_pop2=!1,this.m_nuevo=!1,this.m_nuevon=!0,this.listaMaterias=[],this.listaProf=[],this.form=this.fb.group({nombreP:[""],materiaP:[""],nombreM:[""],materiaM:[""]})}ngOnInit(){this.uni=this.route.snapshot.paramMap.get("uni"),this.carr=this.route.snapshot.paramMap.get("carr"),null==this.uni&&(this.m_nuevo=!0,this.m_nuevon=!1),this.nombreP=String(this.uni)+String(this.carr)+"P",this.firebase.collection(this.nombreP).snapshotChanges().subscribe(t=>{this.listaProf=[],t.forEach(r=>{let o=r.payload._delegate.doc._document.data.value.mapValue.fields.Nombre.stringValue;-1==this.listaProf.indexOf(o)&&this.listaProf.push(o),-1==this.listaMaterias.indexOf(r.payload._delegate.doc._document.data.value.mapValue.fields.Materia.stringValue)&&this.listaMaterias.push(r.payload._delegate.doc._document.data.value.mapValue.fields.Materia.stringValue)})})}activarpop(){this.m_pop=!0}cerrarpop(){this.m_pop=!1}activarpop2(){this.m_pop2=!0}cerrarpop2(){this.m_pop2=!1}crearMat(){const t={Nombre:this.form.value.nombreM,Materia:this.form.value.materiaM};this.firebase.collection(this.nombreP).add(t).then(()=>{console.log("todo correcto"),window.location.reload()})}crearProf(){const t={Nombre:this.form.value.nombreP,Materia:this.form.value.materiaP};this.firebase.collection(this.nombreP).add(t).then(()=>{console.log("todo correcto"),window.location.reload()})}ComentarProf(t){this.router.navigate(["EProf",this.uni,this.carr,t])}ComentarMat(t){this.router.navigate(["EMat",this.uni,this.carr,t])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(qn),d.Y36(sl),d.Y36(cs),d.Y36(sc))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-visitar-pagina"]],decls:9,vars:2,consts:[[1,"row"],[1,"col"],[1,"navegador"],["class","col-lg-10",4,"ngIf"],[1,"col-lg-10"],[1,"row","mt-2"],[1,"card"],[1,"card-body"],["class","contenedor",4,"ngFor","ngForOf"],[1,"contenedor"],[1,"Contenedor2"],["role","button",3,"click"],["class","pop",4,"ngIf"],[1,"pop"],["type","button",1,"cerrar",3,"click"],[1,"formulario1",3,"formGroup","ngSubmit"],[1,"row","mt-4"],[1,"input-group","input-group-lg","mb3"],[1,"input-group-text"],[1,"spam1"],["type","text","formControlName","nombreM","placeholder","Hola",1,"form-control"],["type","text","formControlName","materiaM","placeholder","Hola",1,"form-control"],["type","submit",1,"btn","btn-success","btn-lg"],["type","text","formControlName","nombreP","placeholder","Nombre Materia",1,"form-control"],["type","text","formControlName","materiaP","placeholder","Nombre Profesor",1,"form-control"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",0),d._UZ(3,"app-bienvenido"),d.qZA(),d.TgZ(4,"div",0)(5,"div",2),d._UZ(6,"app-navegador"),d.qZA()()(),d.YNc(7,gN,6,0,"div",3),d.YNc(8,EN,28,6,"div",3),d.qZA()),2&t&&(d.xp6(7),d.Q6J("ngIf",r.m_nuevo),d.xp6(1),d.Q6J("ngIf",r.m_nuevon))},directives:[LT,VT,or,An,nc,Jl,Ou,Na,Dd,rc],encapsulation:2}),n})();const wN=[{path:"",component:pN},{path:"Pag/:uni/:carr",component:Ox},{path:"Pag",component:Ox},{path:"EMat/:uni/:carr/:mat",component:lN},{path:"EProf/:uni/:carr/:prof",component:rN},{path:"RegUsu",component:Rx}];let IN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[gb]}),n.\u0275inj=d.cJS({providers:[ry],imports:[[Ea,gE,uf.forRoot(wN),Do.hO.initializeApp(Nx_firebase),qR,Pb],uf]}),n})();(0,d.G48)(),yl().bootstrapModule(IN).catch(n=>console.error(n))},5867:(rt,De,k)=>{k.d(De,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=k(9681);(0,d.registerVersion)("firebase","9.6.10","app")},127:(rt,De,k)=>{k.d(De,{Z:()=>d.Z});var d=k(3942);d.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(rt,De,k)=>{k.r(De);var d=k(5861),K=k(3942),O=k(2090),oe=k(9681),J=k(655),pe=k(1877),re=k(4859);const Ne=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ke=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new pe.Yd("@firebase/auth");function qe(y,...f){Ye.logLevel<=pe.in.ERROR&&Ye.error(`Auth (${oe.SDK_VERSION}): ${y}`,...f)}function be(y,...f){throw Be(y,...f)}function ye(y,...f){return Be(y,...f)}function ve(y,f,g){const v=Object.assign(Object.assign({},ke()),{[f]:g});return new O.LL("auth","Firebase",v).create(f,{appName:y.name})}function $e(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&be(y,"argument-error"),ve(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...f){if("string"!=typeof y){const g=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return he.create(y,...f)}function ee(y,f,...g){if(!y)throw Be(f,...g)}function q(y){const f="INTERNAL ASSERTION FAILED: "+y;throw qe(f),new Error(f)}function te(y,f){y||q(f)}const ge=new Map;function ne(y){te(y instanceof Function,"Expected a class definition");let f=ge.get(y);return f?(te(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,ge.set(y,f),f)}function vt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Zt(){return"http:"===Dn()||"https:"===Dn()}function Dn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class sn{constructor(f,g){this.shortDelay=f,this.longDelay=g,te(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function it(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Zt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function on(y,f){te(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class mi{static initialize(f,g,v){this.fetchImpl=f,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void q("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void q("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void q("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Wi=new sn(3e4,6e4);function zt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Lt(y,f,g,v){return nr.apply(this,arguments)}function nr(){return(nr=(0,d.Z)(function*(y,f,g,v,A={}){return Xr(y,A,(0,d.Z)(function*(){let N={},G={};v&&("GET"===f?G=v:N={body:JSON.stringify(v)});const ie=(0,O.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/json",y.languageCode&&(Ve["X-Firebase-Locale"]=y.languageCode),mi.fetch()(Sr(y,y.config.apiHost,g,ie),Object.assign({method:f,headers:Ve,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Xr(y,f,g){return Es.apply(this,arguments)}function Es(){return(Es=(0,d.Z)(function*(y,f,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Xt),f);try{const A=new Ki(y),N=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const G=yield N.json();if("needConfirmation"in G)throw Yi(y,"account-exists-with-different-credential",G);if(N.ok&&!("errorMessage"in G))return G;{const ie=N.ok?G.errorMessage:G.error.message,[Ve,Ke]=ie.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Yi(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Ve)throw Yi(y,"email-already-in-use",G);const gt=v[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw ve(y,gt,Ke);be(y,gt)}}catch(A){if(A instanceof O.ZR)throw A;be(y,"network-request-failed")}})).apply(this,arguments)}function Ar(y,f,g,v){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,d.Z)(function*(y,f,g,v,A={}){const N=yield Lt(y,f,g,v,A);return"mfaPendingCredential"in N&&be(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Sr(y,f,g,v){const A=`${f}${g}?${v}`;return y.config.emulator?on(y.config,A):`${y.config.apiScheme}://${A}`}class Ki{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(ye(this.auth,"network-request-failed")),Wi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yi(y,f,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const A=ye(y,f,v);return A.customData._tokenResponse=g,A}function Ur(){return(Ur=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Yn(y,f){return jn.apply(this,arguments)}function jn(){return(jn=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ei(y,f){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function dn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function da(){return(da=(0,d.Z)(function*(y,f=!1){const g=(0,O.m9)(y),v=yield g.getIdToken(f),A=et(v);ee(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const N="object"==typeof A.firebase?A.firebase:void 0,G=null==N?void 0:N.sign_in_provider;return{claims:A,token:v,authTime:dn(Vt(A.auth_time)),issuedAtTime:dn(Vt(A.iat)),expirationTime:dn(Vt(A.exp)),signInProvider:G||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Vt(y){return 1e3*Number(y)}function et(y){const[f,g,v]=y.split(".");if(void 0===f||void 0===g||void 0===v)return qe("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,O.tV)(g);return A?JSON.parse(A):(qe("Failed to decode base64 JWT payload"),null)}catch(A){return qe("Caught error parsing JWT payload as JSON",A),null}}function rr(y,f){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,d.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(v){throw v instanceof O.ZR&&Ft(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Ft({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class eo{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield g.iteration()}),v)}iteration(){var f=this;return(0,d.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class fr{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=dn(this.lastLoginAt),this.creationTime=dn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ir(y){return ot.apply(this,arguments)}function ot(){return(ot=(0,d.Z)(function*(y){var f;const g=y.auth,v=yield y.getIdToken(),A=yield rr(y,ei(g,{idToken:v}));ee(null==A?void 0:A.users.length,g,"internal-error");const N=A.users[0];y._notifyReloadListener(N);const G=(null===(f=N.providerUserInfo)||void 0===f?void 0:f.length)?Ce(N.providerUserInfo):[],ie=Ze(y.providerData,G),gt=!!y.isAnonymous&&!(y.email&&N.passwordHash||(null==ie?void 0:ie.length)),nt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ie,metadata:new fr(N.createdAt,N.lastLoginAt),isAnonymous:gt};Object.assign(y,nt)})).apply(this,arguments)}function Nt(){return(Nt=(0,d.Z)(function*(y){const f=(0,O.m9)(y);yield ir(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ze(y,f){return[...y.filter(v=>!f.some(A=>A.providerId===v.providerId)),...f]}function Ce(y){return y.map(f=>{var{providerId:g}=f,v=(0,J._T)(f,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function at(){return(at=(0,d.Z)(function*(y,f){const g=yield Xr(y,{},(0,d.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:N}=y.config,G=Sr(y,A,"/v1/token",`key=${N}`),ie=yield y._getAdditionalHeaders();return ie["Content-Type"]="application/x-www-form-urlencoded",mi.fetch()(G,{method:"POST",headers:ie,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Pt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ee(f.idToken,"internal-error"),ee(void 0!==f.idToken,"internal-error"),ee(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function mt(y){const f=et(y);return ee(f,"internal-error"),ee(void 0!==f.exp,"internal-error"),ee(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var v=this;return(0,d.Z)(function*(){return ee(!v.accessToken||v.refreshToken,f,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var v=this;return(0,d.Z)(function*(){const{accessToken:A,refreshToken:N,expiresIn:G}=yield function We(y,f){return at.apply(this,arguments)}(f,g);v.updateTokensAndExpiration(A,N,Number(G))})()}updateTokensAndExpiration(f,g,v){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,g){const{refreshToken:v,accessToken:A,expirationTime:N}=g,G=new Pt;return v&&(ee("string"==typeof v,"internal-error",{appName:f}),G.refreshToken=v),A&&(ee("string"==typeof A,"internal-error",{appName:f}),G.accessToken=A),N&&(ee("number"==typeof N,"internal-error",{appName:f}),G.expirationTime=N),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Pt,this.toJSON())}_performRefresh(){return q("not implemented")}}function Mt(y,f){ee("string"==typeof y||void 0===y,"internal-error",{appName:f})}class U{constructor(f){var{uid:g,auth:v,stsTokenManager:A}=f,N=(0,J._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new fr(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,d.Z)(function*(){const v=yield rr(g,g.stsTokenManager.getToken(g.auth,f));return ee(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(f){return function ws(y){return da.apply(this,arguments)}(this,f)}reload(){return function pr(y){return Nt.apply(this,arguments)}(this)}_assign(f){this!==f&&(ee(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new U(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var v=this;return(0,d.Z)(function*(){let A=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),A=!0),g&&(yield ir(v)),yield v.auth._persistUserIfCurrent(v),A&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,d.Z)(function*(){const g=yield f.getIdToken();return yield rr(f,function st(y,f){return Ur.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var v,A,N,G,ie,Ve,Ke,gt;const nt=null!==(v=g.displayName)&&void 0!==v?v:void 0,In=null!==(A=g.email)&&void 0!==A?A:void 0,Hi=null!==(N=g.phoneNumber)&&void 0!==N?N:void 0,Kl=null!==(G=g.photoURL)&&void 0!==G?G:void 0,Au=null!==(ie=g.tenantId)&&void 0!==ie?ie:void 0,Su=null!==(Ve=g._redirectEventId)&&void 0!==Ve?Ve:void 0,sf=null!==(Ke=g.createdAt)&&void 0!==Ke?Ke:void 0,Py=null!==(gt=g.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:ta,emailVerified:Ed,isAnonymous:wd,providerData:of,stsTokenManager:Id}=g;ee(ta&&Id,f,"internal-error");const qn=Pt.fromJSON(this.name,Id);ee("string"==typeof ta,f,"internal-error"),Mt(nt,f.name),Mt(In,f.name),ee("boolean"==typeof Ed,f,"internal-error"),ee("boolean"==typeof wd,f,"internal-error"),Mt(Hi,f.name),Mt(Kl,f.name),Mt(Au,f.name),Mt(Su,f.name),Mt(sf,f.name),Mt(Py,f.name);const af=new U({uid:ta,auth:f,email:In,emailVerified:Ed,displayName:nt,isAnonymous:wd,photoURL:Kl,phoneNumber:Hi,tenantId:Au,stsTokenManager:qn,createdAt:sf,lastLoginAt:Py});return of&&Array.isArray(of)&&(af.providerData=of.map(og=>Object.assign({},og))),Su&&(af._redirectEventId=Su),af}static _fromIdTokenResponse(f,g,v=!1){return(0,d.Z)(function*(){const A=new Pt;A.updateFromServerResponse(g);const N=new U({uid:g.localId,auth:f,stsTokenManager:A,isAnonymous:v});return yield ir(N),N})()}}const $=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(g,v){var A=this;return(0,d.Z)(function*(){A.storage[g]=v})()}_get(g){var v=this;return(0,d.Z)(function*(){const A=v.storage[g];return void 0===A?null:A})()}_remove(g){var v=this;return(0,d.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function le(y,f,g){return`firebase:${y}:${f}:${g}`}class Y{constructor(f,g,v){this.persistence=f,this.auth=g,this.userKey=v;const{config:A,name:N}=this.auth;this.fullUserKey=le(this.userKey,A.apiKey,N),this.fullPersistenceKey=le("persistence",A.apiKey,N),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?U._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,d.Z)(function*(){if(g.persistence===f)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,v="authUser"){return(0,d.Z)(function*(){if(!g.length)return new Y(ne($),f,v);const A=(yield Promise.all(g.map(function(){var Ke=(0,d.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let N=A[0]||ne($);const G=le(v,f.config.apiKey,f.name);let ie=null;for(const Ke of g)try{const gt=yield Ke._get(G);if(gt){const nt=U._fromJSON(f,gt);Ke!==N&&(ie=nt),N=Ke;break}}catch(gt){}const Ve=A.filter(Ke=>Ke._shouldAllowMigration);return N._shouldAllowMigration&&Ve.length?(N=Ve[0],ie&&(yield N._set(G,ie.toJSON())),yield Promise.all(g.map(function(){var Ke=(0,d.Z)(function*(gt){if(gt!==N)try{yield gt._remove(G)}catch(nt){}});return function(gt){return Ke.apply(this,arguments)}}())),new Y(N,f,v)):new Y(N,f,v)})()}}function Le(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Ut(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(ft(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Tt(f))return"Blackberry";if(an(f))return"Webos";if(Gt(f))return"Safari";if((f.includes("chrome/")||gr(f))&&!f.includes("edge/"))return"Chrome";if(yn(f))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function ft(y=(0,O.z$)()){return/firefox\//i.test(y)}function Gt(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function gr(y=(0,O.z$)()){return/crios\//i.test(y)}function Ut(y=(0,O.z$)()){return/iemobile/i.test(y)}function yn(y=(0,O.z$)()){return/android/i.test(y)}function Tt(y=(0,O.z$)()){return/blackberry/i.test(y)}function an(y=(0,O.z$)()){return/webos/i.test(y)}function Jn(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function Qi(y=(0,O.z$)()){return Jn(y)||yn(y)||an(y)||Tt(y)||/windows phone/i.test(y)||Ut(y)}function fa(y,f=[]){let g;switch(y){case"Browser":g=Le((0,O.z$)());break;case"Worker":g=`${Le((0,O.z$)())}-${y}`;break;default:g=y}const v=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${oe.SDK_VERSION}/${v}`}class ti{constructor(f,g,v){this.app=f,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new St(this),this.idTokenSubscription=new St(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(f,g){var v=this;return g&&(this._popupRedirectResolver=ne(g)),this._initializationPromise=this.queue((0,d.Z)(function*(){var A,N;if(!v._deleted&&(v.persistenceManager=yield Y.create(v,f),!v._deleted)){if(null===(A=v._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(G){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(N=v.currentUser)||void 0===N?void 0:N.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,d.Z)(function*(){var v;let A=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const N=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,G=null==A?void 0:A._redirectEventId,ie=yield g.tryRedirectSignIn(f);(!N||N===G)&&(null==ie?void 0:ie.user)&&(A=ie.user)}return A?A._redirectEventId?(ee(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===A._redirectEventId?g.directlySetCurrentUser(A):g.reloadAndSetCurrentUserOrClear(A)):g.reloadAndSetCurrentUserOrClear(A):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,d.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(A){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,d.Z)(function*(){try{yield ir(f)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function ht(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,d.Z)(function*(){const v=f?(0,O.m9)(f):null;return v&&ee(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,d.Z)(function*(){if(!g._deleted)return f&&ee(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,d.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,d.Z)(function*(){yield g.assertedPersistence.setPersistence(ne(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,g,v){return this.registerStateListener(this.authStateSubscription,f,g,v)}onIdTokenChanged(f,g,v){return this.registerStateListener(this.idTokenSubscription,f,g,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var v=this;return(0,d.Z)(function*(){const A=yield v.getOrInitRedirectPersistenceManager(g);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,d.Z)(function*(){if(!g.redirectPersistenceManager){const v=f&&ne(f)||g._popupRedirectResolver;ee(v,g,"argument-error"),g.redirectPersistenceManager=yield Y.create(g,[ne(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,d.Z)(function*(){var v,A;return g._isInitialized&&(yield g.queue((0,d.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===f?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,d.Z)(function*(){if(f===g.currentUser)return g.queue((0,d.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,v,A){if(this._deleted)return()=>{};const N="function"==typeof g?g:g.next.bind(g),G=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(G,this,"internal-error"),G.then(()=>N(this.currentUser)),"function"==typeof g?f.addObserver(g,v,A):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,d.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=fa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var g;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(v["X-Firebase-Client"]=A),v})()}}function Oe(y){return(0,O.m9)(y)}class St{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function sr(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Pn(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class en{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return q("not implemented")}_getIdTokenResponse(f){return q("not implemented")}_linkToIdToken(f,g){return q("not implemented")}_getReauthenticationResolver(f){return q("not implemented")}}function Tn(y,f){return bs.apply(this,arguments)}function bs(){return(bs=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:resetPassword",zt(y,f))})).apply(this,arguments)}function Ct(y,f){return ko.apply(this,arguments)}function ko(){return(ko=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function no(y,f){return pa.apply(this,arguments)}function pa(){return(pa=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",zt(y,f))})).apply(this,arguments)}function An(){return(An=(0,d.Z)(function*(y,f){return Ar(y,"POST","/v1/accounts:signInWithPassword",zt(y,f))})).apply(this,arguments)}function Ji(y,f){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:sendOobCode",zt(y,f))})).apply(this,arguments)}function or(y,f){return tn.apply(this,arguments)}function tn(){return(tn=(0,d.Z)(function*(y,f){return Ji(y,f)})).apply(this,arguments)}function Qa(y,f){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,d.Z)(function*(y,f){return Ji(y,f)})).apply(this,arguments)}function yi(y,f){return ni.apply(this,arguments)}function ni(){return(ni=(0,d.Z)(function*(y,f){return Ji(y,f)})).apply(this,arguments)}function Lc(y,f){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,d.Z)(function*(y,f){return Ji(y,f)})).apply(this,arguments)}function Br(){return(Br=(0,d.Z)(function*(y,f){return Ar(y,"POST","/v1/accounts:signInWithEmailLink",zt(y,f))})).apply(this,arguments)}function Vc(){return(Vc=(0,d.Z)(function*(y,f){return Ar(y,"POST","/v1/accounts:signInWithEmailLink",zt(y,f))})).apply(this,arguments)}class eu extends en{constructor(f,g,v,A=null){super("password",v),this._email=f,this._password=g,this._tenantId=A}static _fromEmailAndPassword(f,g){return new eu(f,g,"password")}static _fromEmailAndCode(f,g,v=null){return new eu(f,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,d.Z)(function*(){switch(g.signInMethod){case"password":return function Cs(y,f){return An.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Xa(y,f){return Br.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:be(f,"internal-error")}})()}_linkToIdToken(f,g){var v=this;return(0,d.Z)(function*(){switch(v.signInMethod){case"password":return Ct(f,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Th(y,f){return Vc.apply(this,arguments)}(f,{idToken:g,email:v._email,oobCode:v._password});default:be(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function kn(y,f){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,d.Z)(function*(y,f){return Ar(y,"POST","/v1/accounts:signInWithIdp",zt(y,f))})).apply(this,arguments)}class es extends en{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new es(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):be("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:A}=g,N=(0,J._T)(g,["providerId","signInMethod"]);if(!v||!A)return null;const G=new es(v,A);return G.idToken=N.idToken||void 0,G.accessToken=N.accessToken||void 0,G.secret=N.secret,G.nonce=N.nonce,G.pendingToken=N.pendingToken||null,G}_getIdTokenResponse(f){return kn(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,kn(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,kn(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,O.xO)(g)}return f}}function kp(y,f){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:sendVerificationCode",zt(y,f))})).apply(this,arguments)}function Ts(){return(Ts=(0,d.Z)(function*(y,f){return Ar(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,f))})).apply(this,arguments)}function jc(){return(jc=(0,d.Z)(function*(y,f){const g=yield Ar(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,f));if(g.temporaryProof)throw Yi(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Lp={USER_NOT_FOUND:"user-not-found"};function $c(){return($c=(0,d.Z)(function*(y,f){return Ar(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Lp)})).apply(this,arguments)}class Fo extends en{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Fo({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Fo({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function al(y,f){return Ts.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Fp(y,f){return jc.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Vp(y,f){return $c.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:v,verificationCode:A}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:v,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:v,phoneNumber:A,temporaryProof:N}=f;return v||g||A||N?new Fo({verificationId:g,verificationCode:v,phoneNumber:A,temporaryProof:N}):null}}class ro{constructor(f){var g,v,A,N,G,ie;const Ve=(0,O.zd)((0,O.pd)(f)),Ke=null!==(g=Ve.apiKey)&&void 0!==g?g:null,gt=null!==(v=Ve.oobCode)&&void 0!==v?v:null,nt=function sy(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ve.mode)&&void 0!==A?A:null);ee(Ke&&gt&&nt,"argument-error"),this.apiKey=Ke,this.operation=nt,this.code=gt,this.continueUrl=null!==(N=Ve.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(G=Ve.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ie=Ve.tenantId)&&void 0!==ie?ie:null}static parseLink(f){const g=function tu(y){const f=(0,O.zd)((0,O.pd)(y)).link,g=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||g||f||y}(f);try{return new ro(g)}catch(v){return null}}}let ul=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return eu._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const A=ro.parseLink(v);return ee(A,"argument-error"),eu._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class As{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class jr extends As{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Lo extends jr{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return ee("providerId"in g&&"signInMethod"in g,"argument-error"),es._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ee(f.idToken||f.accessToken,"argument-error"),es._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Lo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Lo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:A,pendingToken:N,nonce:G,providerId:ie}=f;if(!v&&!A&&!g&&!N||!ie)return null;try{return new Lo(ie)._credential({idToken:g,accessToken:v,nonce:G,pendingToken:N})}catch(Ve){return null}}}let io=(()=>{class y extends jr{constructor(){super("facebook.com")}static credential(g){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ga=(()=>{class y extends jr{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:A}=g;if(!v&&!A)return null;try{return y.credential(v,A)}catch(N){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Hc=(()=>{class y extends jr{constructor(){super("github.com")}static credential(g){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Vo extends en{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return kn(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,kn(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,kn(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:A,pendingToken:N}=g;return v&&A&&N&&v===A?new Vo(v,N):null}static _create(f,g){return new Vo(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ri extends As{constructor(f){ee(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ri.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ri.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Vo.fromJSON(f);return ee(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:v}=f;if(!g||!v)return null;try{return Vo._create(v,g)}catch(A){return null}}}let nu=(()=>{class y extends jr{constructor(){super("twitter.com")}static credential(g,v){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:A}=g;if(!v||!A)return null;try{return y.credential(v,A)}catch(N){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function ru(y,f){return xr.apply(this,arguments)}function xr(){return(xr=(0,d.Z)(function*(y,f){return Ar(y,"POST","/v1/accounts:signUp",zt(y,f))})).apply(this,arguments)}class ar{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,v,A=!1){return(0,d.Z)(function*(){const N=yield U._fromIdTokenResponse(f,v,A),G=Sh(v);return new ar({user:N,providerId:G,_tokenResponse:v,operationType:g})})()}static _forOperation(f,g,v){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const A=Sh(v);return new ar({user:f,providerId:A,_tokenResponse:v,operationType:g})})()}}function Sh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Gc(){return(Gc=(0,d.Z)(function*(y){var f;const g=Oe(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new ar({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield ru(g,{returnSecureToken:!0}),A=yield ar._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class su extends O.ZR{constructor(f,g,v,A){var N;super(g.code,g.message),this.operationType=v,this.user=A,Object.setPrototypeOf(this,su.prototype),this.customData={appName:f.name,tenantId:null!==(N=f.tenantId)&&void 0!==N?N:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,g,v,A){return new su(f,g,v,A)}}function ou(y,f,g,v){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?su._fromErrorAndOperation(y,N,f,v):N})}function ts(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function ll(){return(ll=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y);yield xs(!0,g,f);const{providerUserInfo:v}=yield Yn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),A=ts(v||[]);return g.providerData=g.providerData.filter(N=>A.has(N.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function cn(y,f){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,d.Z)(function*(y,f,g=!1){const v=yield rr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return ar._forOperation(y,"link",v)})).apply(this,arguments)}function xs(y,f,g){return nn.apply(this,arguments)}function nn(){return(nn=(0,d.Z)(function*(y,f,g){yield ir(f);const A=!1===y?"provider-already-linked":"no-such-provider";ee(ts(f.providerData).has(g)===y,f.auth,A)})).apply(this,arguments)}function qc(y,f){return so.apply(this,arguments)}function so(){return(so=(0,d.Z)(function*(y,f,g=!1){const{auth:v}=y,A="reauthenticate";try{const N=yield rr(y,ou(v,A,f,y),g);ee(N.idToken,v,"internal-error");const G=et(N.idToken);ee(G,v,"internal-error");const{sub:ie}=G;return ee(y.uid===ie,v,"user-mismatch"),ar._forOperation(y,A,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&be(v,"user-mismatch"),N}})).apply(this,arguments)}function oo(y,f){return mr.apply(this,arguments)}function mr(){return(mr=(0,d.Z)(function*(y,f,g=!1){const v="signIn",A=yield ou(y,v,f),N=yield ar._fromIdTokenResponse(y,v,A);return g||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Sn(y,f){return ya.apply(this,arguments)}function ya(){return(ya=(0,d.Z)(function*(y,f){return oo(Oe(y),f)})).apply(this,arguments)}function _i(y,f){return yr.apply(this,arguments)}function yr(){return(yr=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y);return yield xs(!1,g,f.providerId),cn(g,f)})).apply(this,arguments)}function Ms(y,f){return ns.apply(this,arguments)}function ns(){return(ns=(0,d.Z)(function*(y,f){return qc((0,O.m9)(y),f)})).apply(this,arguments)}function au(y,f){return $r.apply(this,arguments)}function $r(){return($r=(0,d.Z)(function*(y,f){return Ar(y,"POST","/v1/accounts:signInWithCustomToken",zt(y,f))})).apply(this,arguments)}function Ns(){return(Ns=(0,d.Z)(function*(y,f){const g=Oe(y),v=yield au(g,{token:f,returnSecureToken:!0}),A=yield ar._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class ut{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?uu._fromServerResponse(f,g):be(f,"internal-error")}}class uu extends ut{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new uu(g)}}function _a(y,f,g){var v;ee((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),ee(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(ee(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(ee(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function cu(){return(cu=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:f};g&&_a(v,A,g),yield Qa(v,A)})).apply(this,arguments)}function cl(){return(cl=(0,d.Z)(function*(y,f,g){yield Tn((0,O.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function we(){return(we=(0,d.Z)(function*(y,f){yield no((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function Rt(y,f){return hl.apply(this,arguments)}function hl(){return(hl=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y),v=yield Tn(g,{oobCode:f}),A=v.requestType;switch(ee(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(v.mfaInfo,g,"internal-error");default:ee(v.email,g,"internal-error")}let N=null;return v.mfaInfo&&(N=ut._fromServerResponse(Oe(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:N},operation:A}})).apply(this,arguments)}function Bo(){return(Bo=(0,d.Z)(function*(y,f){const{data:g}=yield Rt((0,O.m9)(y),f);return g.email})).apply(this,arguments)}function Hr(){return(Hr=(0,d.Z)(function*(y,f,g){const v=Oe(y),A=yield ru(v,{returnSecureToken:!0,email:f,password:g}),N=yield ar._fromIdTokenResponse(v,"signIn",A);return yield v._updateCurrentUser(N.user),N})).apply(this,arguments)}function Zc(){return(Zc=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:f};ee(g.handleCodeInApp,v,"argument-error"),g&&_a(v,A,g),yield yi(v,A)})).apply(this,arguments)}function Os(){return(Os=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y),A=ul.credentialWithLink(f,g||vt());return ee(A._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Sn(v,A)})).apply(this,arguments)}function ur(y,f){return ii.apply(this,arguments)}function ii(){return(ii=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:createAuthUri",zt(y,f))})).apply(this,arguments)}function Ps(){return(Ps=(0,d.Z)(function*(y,f){const v={identifier:f,continueUri:Zt()?vt():"http://localhost"},{signinMethods:A}=yield ur((0,O.m9)(y),v);return A||[]})).apply(this,arguments)}function ml(){return(ml=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&_a(g.auth,A,f);const{email:N}=yield or(g.auth,A);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function gu(){return(gu=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&_a(v.auth,N,g);const{email:G}=yield Lc(v.auth,N);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function yl(y,f){return va.apply(this,arguments)}function va(){return(va=(0,d.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function _l(){return(_l=(0,d.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const v=(0,O.m9)(y),N={idToken:yield v.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},G=yield rr(v,yl(v.auth,N));v.displayName=G.displayName||null,v.photoURL=G.photoUrl||null;const ie=v.providerData.find(({providerId:Ve})=>"password"===Ve);ie&&(ie.displayName=v.displayName,ie.photoURL=v.photoURL),yield v._updateTokensIfNecessary(G)})).apply(this,arguments)}function El(y,f,g){return ao.apply(this,arguments)}function ao(){return(ao=(0,d.Z)(function*(y,f,g){const{auth:v}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(N.email=f),g&&(N.password=g);const G=yield rr(y,Ct(v,N));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class uo{constructor(f,g,v={}){this.isNewUser=f,this.providerId=g,this.profile=v}}class Kc extends uo{constructor(f,g,v,A){super(f,g,v),this.username=A}}class Yc extends uo{constructor(f,g){super(f,"facebook.com",g)}}class lo extends Kc{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class ks extends uo{constructor(f,g){super(f,"google.com",g)}}class wl extends Kc{constructor(f,g,v){super(f,"twitter.com",g,v)}}function _r(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Wc(y){var f,g;if(!y)return null;const{providerId:v}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const G=null===(g=null===(f=et(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(G)return new uo(N,"anonymous"!==G&&"custom"!==G?G:null)}if(!v)return null;switch(v){case"facebook.com":return new Yc(N,A);case"github.com":return new lo(N,A);case"google.com":return new ks(N,A);case"twitter.com":return new wl(N,A,y.screenName||null);case"custom":case"anonymous":return new uo(N,null);default:return new uo(N,v,A)}}(g)}class rs{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new rs("enroll",f)}static _fromMfaPendingCredential(f){return new rs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,v;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return rs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(v=f.multiFactorSession)||void 0===v?void 0:v.idToken)return rs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class wa{constructor(f,g,v){this.session=f,this.hints=g,this.signInResolver=v}static _fromError(f,g){const v=Oe(f),A=g.customData._serverResponse,N=(A.mfaInfo||[]).map(ie=>ut._fromServerResponse(v,ie));ee(A.mfaPendingCredential,v,"internal-error");const G=rs._fromMfaPendingCredential(A.mfaPendingCredential);return new wa(G,N,function(){var ie=(0,d.Z)(function*(Ve){const Ke=yield Ve._process(v,G);delete A.mfaInfo,delete A.mfaPendingCredential;const gt=Object.assign(Object.assign({},A),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(g.operationType){case"signIn":const nt=yield ar._fromIdTokenResponse(v,g.operationType,gt);return yield v._updateCurrentUser(nt.user),nt;case"reauthenticate":return ee(g.user,v,"internal-error"),ar._forOperation(g.user,g.operationType,gt);default:be(v,"internal-error")}});return function(Ve){return ie.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,d.Z)(function*(){return g.signInResolver(f)})()}}function Fn(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:start",zt(y,f))}class is{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>ut._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new is(f)}getSession(){var f=this;return(0,d.Z)(function*(){return rs._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var v=this;return(0,d.Z)(function*(){const A=f,N=yield v.getSession(),G=yield rr(v.user,A._process(v.user.auth,N,g));return yield v.user._updateTokensIfNecessary(G),v.user.reload()})()}unenroll(f){var g=this;return(0,d.Z)(function*(){const v="string"==typeof f?f:f.uid,A=yield g.user.getIdToken(),N=yield rr(g.user,function Bp(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(y,f))}(g.user.auth,{idToken:A,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:G})=>G!==v),yield g.user._updateTokensIfNecessary(N);try{yield g.user.reload()}catch(G){if("auth/user-token-expired"!==G.code)throw G}})()}}const $o=new WeakMap,Cl="__sak";class co{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Cl,"1"),this.storage.removeItem(Cl),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Mn=(()=>{class y extends co{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Xc(){const y=(0,O.z$)();return Gt(y)||Jn(y)}()&&function $n(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Qi(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const A=this.storage.getItem(v),N=this.localCache[v];A!==N&&g(v,N,A)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((ie,Ve,Ke)=>{this.notifyListeners(ie,Ke)});const A=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ie=this.storage.getItem(A);if(g.newValue!==ie)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!v)return}const N=()=>{const ie=this.storage.getItem(A);!v&&this.localCache[A]===ie||this.notifyListeners(A,ie)},G=this.storage.getItem(A);!function ha(){return(0,O.w1)()&&10===document.documentMode}()||G===g.newValue||g.newValue===g.oldValue?N():setTimeout(N,10)}notifyListeners(g,v){this.localCache[g]=v;const A=this.listeners[g];if(A)for(const N of Array.from(A))N(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var A=()=>super._set,N=this;return(0,d.Z)(function*(){yield A().call(N,g,v),N.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,A=this;return(0,d.Z)(function*(){const N=yield v().call(A,g);return A.localCache[g]=JSON.stringify(N),N})()}_remove(g){var v=()=>super._remove,A=this;return(0,d.Z)(function*(){yield v().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),lr=(()=>{class y extends co{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let qr=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(N=>N.isListeningto(g));if(v)return v;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,d.Z)(function*(){const A=g,{eventId:N,eventType:G,data:ie}=A.data,Ve=v.handlersMap[G];if(!(null==Ve?void 0:Ve.size))return;A.ports[0].postMessage({status:"ack",eventId:N,eventType:G});const Ke=Array.from(Ve).map(function(){var nt=(0,d.Z)(function*(In){return In(A.origin,ie)});return function(In){return nt.apply(this,arguments)}}()),gt=yield function Gr(y){return Promise.all(y.map(function(){var f=(0,d.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return f.apply(this,arguments)}}()))}(Ke);A.ports[0].postMessage({status:"done",eventId:N,eventType:G,response:gt})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ho(y="",f=10){let g="";for(let v=0;v<f;v++)g+=Math.floor(10*Math.random());return y+g}class ed{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,v=50){var A=this;return(0,d.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let G,ie;return new Promise((Ve,Ke)=>{const gt=Ho("",20);N.port1.start();const nt=setTimeout(()=>{Ke(new Error("unsupported_event"))},v);ie={messageChannel:N,onMessage(In){const Hi=In;if(Hi.data.eventId===gt)switch(Hi.data.status){case"ack":clearTimeout(nt),G=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Ve(Hi.data.response);break;default:clearTimeout(nt),clearTimeout(G),Ke(new Error("invalid_response"))}}},A.handlers.add(ie),N.port1.addEventListener("message",ie.onMessage),A.target.postMessage({eventType:f,eventId:gt,data:g},[N.port2])}).finally(()=>{ie&&A.removeMessageHandler(ie)})})()}}function ln(){return window}function Ei(){return void 0!==ln().WorkerGlobalScope&&"function"==typeof ln().importScripts}function si(){return(si=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Dl="firebaseLocalStorageDb",ho="firebaseLocalStorage",Ln="fbase_key";class ss{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Go(y,f){return y.transaction([ho],f?"readwrite":"readonly").objectStore(ho)}function Ls(){const y=indexedDB.open(Dl,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(ho,{keyPath:Ln})}catch(A){g(A)}}),y.addEventListener("success",(0,d.Z)(function*(){const v=y.result;v.objectStoreNames.contains(ho)?f(v):(v.close(),yield function oi(){const y=indexedDB.deleteDatabase(Dl);return new ss(y).toPromise()}(),f(yield Ls()))}))})}function Ia(y,f,g){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,d.Z)(function*(y,f,g){const v=Go(y,!0).put({[Ln]:f,value:g});return new ss(v).toPromise()})).apply(this,arguments)}function Vs(){return(Vs=(0,d.Z)(function*(y,f){const g=Go(y,!1).get(f),v=yield new ss(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Li(y,f){const g=Go(y,!0).delete(f);return new ss(g).toPromise()}const wi=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,d.Z)(function*(){return g.db||(g.db=yield Ls()),g.db})()}_withRetries(g){var v=this;return(0,d.Z)(function*(){let A=0;for(;;)try{const N=yield v._openDb();return yield g(N)}catch(N){if(A++>3)throw N;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,d.Z)(function*(){return Ei()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,d.Z)(function*(){g.receiver=qr._getInstance(function td(){return Ei()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,d.Z)(function*(A,N){return{keyProcessed:(yield g._poll()).includes(N.key)}});return function(A,N){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,d.Z)(function*(A,N){return["keyChanged"]});return function(A,N){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,d.Z)(function*(){var v,A;if(g.activeServiceWorker=yield function yu(){return si.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new ed(g.activeServiceWorker);const N=yield g.sender._send("ping",{},800);!N||(null===(v=N[0])||void 0===v?void 0:v.fulfilled)&&(null===(A=N[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,d.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Ot(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Ls();return yield Ia(g,Cl,"1"),yield Li(g,Cl),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,d.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var A=this;return(0,d.Z)(function*(){return A._withPendingWrite((0,d.Z)(function*(){return yield A._withRetries(N=>Ia(N,g,v)),A.localCache[g]=v,A.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,d.Z)(function*(){const A=yield v._withRetries(N=>function Tl(y,f){return Vs.apply(this,arguments)}(N,g));return v.localCache[g]=A,A})()}_remove(g){var v=this;return(0,d.Z)(function*(){return v._withPendingWrite((0,d.Z)(function*(){return yield v._withRetries(A=>Li(A,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,d.Z)(function*(){const v=yield g._withRetries(G=>{const ie=Go(G,!1).getAll();return new ss(ie).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const A=[],N=new Set;for(const{fbase_key:G,value:ie}of v)N.add(G),JSON.stringify(g.localCache[G])!==JSON.stringify(ie)&&(g.notifyListeners(G,ie),A.push(G));for(const G of Object.keys(g.localCache))g.localCache[G]&&!N.has(G)&&(g.notifyListeners(G,null),A.push(G));return A})()}notifyListeners(g,v){this.localCache[g]=v;const A=this.listeners[g];if(A)for(const N of Array.from(A))N(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Zo(y,f){return Lt(y,"POST","/v2/accounts/mfaSignIn:start",zt(y,f))}function Ii(){return(Ii=(0,d.Z)(function*(y){return(yield Lt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Rn(y){return new Promise((f,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=f,v.onerror=A=>{const N=ye("internal-error");N.customData=A,g(N)},v.type="text/javascript",v.charset="UTF-8",function id(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(v)})}function zo(y){return`__${y}${Math.floor(1e6*Math.random())}`}const vr=1e12;class os{constructor(f){this.auth=f,this.counter=vr,this._widgets=new Map}render(f,g){const v=this.counter;return this._widgets.set(v,new Vi(f,this.auth.name,g||{})),this.counter++,v}reset(f){var g;const v=f||vr;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(f){var g;return(null===(g=this._widgets.get(f||vr))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,d.Z)(function*(){var v;return null===(v=g._widgets.get(f||vr))||void 0===v||v.execute(),""})()}}class Vi{constructor(f,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;ee(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function vn(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Us=zo("rcb"),sd=new sn(3e4,6e4);class $p{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ln().grecaptcha}load(f,g=""){return ee(function Hp(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(ln().grecaptcha):new Promise((v,A)=>{const N=ln().setTimeout(()=>{A(ye(f,"network-request-failed"))},sd.get());ln()[Us]=()=>{ln().clearTimeout(N),delete ln()[Us];const ie=ln().grecaptcha;if(!ie)return void A(ye(f,"internal-error"));const Ve=ie.render;ie.render=(Ke,gt)=>{const nt=Ve(Ke,gt);return this.counter++,nt},this.hostLanguage=g,v(ie)},Rn(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Us,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(N),A(ye(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!ln().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Gp{load(f){return(0,d.Z)(function*(){return new os(f)})()}clearedOneInstance(){}}const Bs="recaptcha",Zr={theme:"light",type:"image"};class qp{constructor(f,g=Object.assign({},Zr),v){this.parameters=g,this.type=Bs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Oe(v),this.isInvisible="invisible"===this.parameters.size,ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;ee(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Gp:new $p,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(g)||new Promise(N=>{const G=ie=>{!ie||(f.tokenChangeListeners.delete(G),N(ie))};f.tokenChangeListeners.add(G),f.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof f)f(g);else if("string"==typeof f){const v=ln()[f];"function"==typeof v&&v(g)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){ee(Zt()&&!Ei(),f.auth,"internal-error"),yield function js(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Mr(y){return Ii.apply(this,arguments)}(f.auth);ee(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class as{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Fo._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function fn(){return(fn=(0,d.Z)(function*(y,f,g){const v=Oe(y),A=yield Er(v,f,(0,O.m9)(g));return new as(A,N=>Sn(v,N))})).apply(this,arguments)}function Ko(){return(Ko=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y);yield xs(!1,v,"phone");const A=yield Er(v.auth,f,(0,O.m9)(g));return new as(A,N=>_i(v,N))})).apply(this,arguments)}function xl(){return(xl=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y),A=yield Er(v.auth,f,(0,O.m9)(g));return new as(A,N=>Ms(v,N))})).apply(this,arguments)}function Er(y,f,g){return ai.apply(this,arguments)}function ai(){return(ai=(0,d.Z)(function*(y,f,g){var v;const A=yield g.verify();try{let N;if(ee("string"==typeof A,y,"argument-error"),ee(g.type===Bs,y,"argument-error"),N="string"==typeof f?{phoneNumber:f}:f,"session"in N){const G=N.session;if("phoneNumber"in N)return ee("enroll"===G.type,y,"internal-error"),(yield Fn(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{ee("signin"===G.type,y,"internal-error");const ie=(null===(v=N.multiFactorHint)||void 0===v?void 0:v.uid)||N.multiFactorUid;return ee(ie,y,"missing-multi-factor-info"),(yield Zo(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:ie,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield kp(y,{phoneNumber:N.phoneNumber,recaptchaToken:A});return G}}finally{g._reset()}})).apply(this,arguments)}function us(){return(us=(0,d.Z)(function*(y,f){yield cn((0,O.m9)(y),f)})).apply(this,arguments)}let Ci=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Oe(g)}verifyPhoneNumber(g,v){return Er(this.auth,g,(0,O.m9)(v))}static credential(g,v){return Fo._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:A}=g;return v&&A?Fo._fromTokenResponse(v,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ui(y,f){return f?ne(f):(ee(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ca extends en{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return kn(f,this._buildIdpRequest())}_linkToIdToken(f,g){return kn(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return kn(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Rl(y){return oo(y.auth,new Ca(y),y.bypassAuthState)}function Nl(y){const{auth:f,user:g}=y;return ee(g,f,"internal-error"),qc(g,new Ca(y),y.bypassAuthState)}function xt(y){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,d.Z)(function*(y){const{auth:f,user:g}=y;return ee(g,f,"internal-error"),cn(g,new Ca(y),y.bypassAuthState)})).apply(this,arguments)}class Hn{constructor(f,g,v,A,N=!1){this.auth=f,this.resolver=v,this.user=A,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,d.Z)(function*(v,A){f.pendingPromise={resolve:v,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(N){f.reject(N)}});return function(v,A){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,d.Z)(function*(){const{urlResponse:v,sessionId:A,postBody:N,tenantId:G,error:ie,type:Ve}=f;if(ie)return void g.reject(ie);const Ke={auth:g.auth,requestUri:v,sessionId:A,tenantId:G||void 0,postBody:N||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ve)(Ke))}catch(gt){g.reject(gt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Rl;case"linkViaPopup":case"linkViaRedirect":return xt;case"reauthViaPopup":case"reauthViaRedirect":return Nl;default:be(this.auth,"internal-error")}}resolve(f){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Pl=new sn(2e3,1e4);function od(){return(od=(0,d.Z)(function*(y,f,g){const v=Oe(y);$e(y,f,As);const A=Ui(v,g);return new ji(v,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function vu(){return(vu=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y);$e(v.auth,f,As);const A=Ui(v.auth,g);return new ji(v.auth,"reauthViaPopup",f,A,v).executeNotNull()})).apply(this,arguments)}function Eu(){return(Eu=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y);$e(v.auth,f,As);const A=Ui(v.auth,g);return new ji(v.auth,"linkViaPopup",f,A,v).executeNotNull()})).apply(this,arguments)}let ji=(()=>{class y extends Hn{constructor(g,v,A,N,G){super(g,v,N,G),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,d.Z)(function*(){const v=yield g.execute();return ee(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,d.Z)(function*(){te(1===g.filter.length,"Popup operations only handle one event");const v=Ho();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(ye(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,A;this.pollId=(null===(A=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Pl.get())};g()}}return y.currentPopupAction=null,y})();const $i=new Map;class Gn extends Hn{constructor(f,g,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,d.Z)(function*(){let v=$i.get(g.auth._key());if(!v){try{const N=(yield function ui(y,f){return kl.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;v=()=>Promise.resolve(N)}catch(A){v=()=>Promise.reject(A)}$i.set(g.auth._key(),v)}return g.bypassAuthState||$i.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,v=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(v,f);if("unknown"!==f.type){if(f.eventId){const A=yield v.auth._redirectUserForId(f.eventId);if(A)return v.user=A,g().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function kl(){return(kl=(0,d.Z)(function*(y,f){const g=C(f),v=b(y);if(!(yield v._isAvailable()))return!1;const A="true"===(yield v._get(g));return yield v._remove(g),A})).apply(this,arguments)}function po(y,f){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,d.Z)(function*(y,f){return b(y)._set(C(f),"true")})).apply(this,arguments)}function b(y){return ne(y._redirectPersistence)}function C(y){return le("pendingRedirect",y.config.apiKey,y.name)}function Z(){return(Z=(0,d.Z)(function*(y,f,g){const v=Oe(y);$e(y,f,As);const A=Ui(v,g);return yield po(A,v),A._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function xe(){return(xe=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y);$e(v.auth,f,As);const A=Ui(v.auth,g);yield po(A,v.auth);const N=yield go(v);return A._openRedirect(v.auth,f,"reauthViaRedirect",N)})).apply(this,arguments)}function At(){return(At=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y);$e(v.auth,f,As);const A=Ui(v.auth,g);yield xs(!1,v,f.providerId),yield po(A,v.auth);const N=yield go(v);return A._openRedirect(v.auth,f,"linkViaRedirect",N)})).apply(this,arguments)}function Vn(){return(Vn=(0,d.Z)(function*(y,f){return yield Oe(y)._initializationPromise,wn(y,f,!1)})).apply(this,arguments)}function wn(y,f){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,d.Z)(function*(y,f,g=!1){const v=Oe(y),A=Ui(v,f),G=yield new Gn(v,A,g).execute();return G&&!g&&(delete G.user._redirectEventId,yield v._persistUserIfCurrent(G.user),yield v._setRedirectUser(null,f)),G})).apply(this,arguments)}function go(y){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,d.Z)(function*(y){const f=Ho(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Di{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(g=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Fl(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ud(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var v;if(f.error&&!ud(f)){const A=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(ye(this.auth,A))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const v=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(mo(f))}saveEventToCache(f){this.cachedEventUids.add(mo(f)),this.lastProcessedEventTime=Date.now()}}function mo(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function ud({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Ll(y){return Da.apply(this,arguments)}function Da(){return(Da=(0,d.Z)(function*(y,f={}){return Lt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const zp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ay=/^https?/;function ls(){return(ls=(0,d.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Ll(y);for(const g of f)try{if(Vl(g))return}catch(v){}be(y,"unauthorized-domain")})).apply(this,arguments)}function Vl(y){const f=vt(),{protocol:g,hostname:v}=new URL(f);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&G.hostname===v}if(!ay.test(g))return!1;if(zp.test(y))return v===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(v)}const ly=new sn(3e4,6e4);function cy(){const y=ln().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let ld=null;function dy(y){return ld=ld||function Wp(y){return new Promise((f,g)=>{var v,A,N;function G(){cy(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{cy(),g(ye(y,"network-request-failed"))},timeout:ly.get()})}if(null===(A=null===(v=ln().gapi)||void 0===v?void 0:v.iframes)||void 0===A?void 0:A.Iframe)f(gapi.iframes.getContext());else{if(!(null===(N=ln().gapi)||void 0===N?void 0:N.load)){const ie=zo("iframefcb");return ln()[ie]=()=>{gapi.load?G():g(ye(y,"network-request-failed"))},Rn(`https://apis.google.com/js/api.js?onload=${ie}`).catch(Ve=>g(Ve))}G()}}).catch(f=>{throw ld=null,f})}(y),ld}const Nh=new sn(5e3,15e3),_o={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ta(y){const f=y.config;ee(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?on(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:f.apiKey,appName:y.name,v:oe.SDK_VERSION},A=cd.get(y.config.apiHost);A&&(v.eid=A);const N=y._getFrameworks();return N.length&&(v.fw=N.join(",")),`${g}?${(0,O.xO)(v).slice(1)}`}function cs(){return cs=(0,d.Z)(function*(y){const f=yield dy(y),g=ln().gapi;return ee(g,y,"internal-error"),f.open({where:document.body,url:Ta(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_o,dontclear:!0},v=>new Promise(function(){var A=(0,d.Z)(function*(N,G){yield v.restyle({setHideOnLeave:!1});const ie=ye(y,"network-request-failed"),Ve=ln().setTimeout(()=>{G(ie)},Nh.get());function Ke(){ln().clearTimeout(Ve),N(v)}v.ping(Ke).then(Ke,()=>{G(ie)})});return function(N,G){return A.apply(this,arguments)}}()))}),cs.apply(this,arguments)}const fy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fd{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Fh(y,f,g,v,A,N){ee(y.config.authDomain,y,"auth-domain-config-required"),ee(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:oe.SDK_VERSION,eventId:A};if(f instanceof As){f.setDefaultLanguage(y.languageCode),G.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(G.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ve,Ke]of Object.entries(N||{}))G[Ve]=Ke}if(f instanceof jr){const Ve=f.getScopes().filter(Ke=>""!==Ke);Ve.length>0&&(G.scopes=Ve.join(","))}y.tenantId&&(G.tid=y.tenantId);const ie=G;for(const Ve of Object.keys(ie))void 0===ie[Ve]&&delete ie[Ve];return`${function gy({config:y}){return y.emulator?on(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ie).slice(1)}`}const Hs="webStorageSupport";class Lh extends class Kp{constructor(f){this.factorId=f}_process(f,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,v);case"signin":return this._finalizeSignIn(f,g.credential);default:return q("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Lh(f)}_finalizeEnroll(f,g,v){return function Qc(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:finalize",zt(y,f))}(f,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function ba(y,f){return Lt(y,"POST","/v2/accounts/mfaSignIn:finalize",zt(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let my=(()=>{class y{constructor(){}static assertion(g){return Lh._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var yy="@firebase/auth",Vh="0.19.11";class Yp{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,d.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(v=>{var A;f((null===(A=v)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Gs(){return window}function Cu(){return(Cu=(0,d.Z)(function*(y,f,g){var v;const{BuildInfo:A}=Gs();te(f.sessionId,"AuthEvent did not contain a session ID");const N=yield Aa(f.sessionId),G={};return Jn()?G.ibi=A.packageName:yn()?G.apn=A.packageName:be(y,"operation-not-supported-in-this-environment"),A.displayName&&(G.appDisplayName=A.displayName),G.sessionId=N,Fh(y,g,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,G)})).apply(this,arguments)}function Ti(){return(Ti=(0,d.Z)(function*(y){const{BuildInfo:f}=Gs(),g={};Jn()?g.iosBundleId=f.packageName:yn()?g.androidPackageName=f.packageName:be(y,"operation-not-supported-in-this-environment"),yield Ll(y,g)})).apply(this,arguments)}function gd(){return(gd=(0,d.Z)(function*(y,f,g){const{cordova:v}=Gs();let A=()=>{};try{yield new Promise((N,G)=>{let ie=null;function Ve(){var nt;N();const In=null===(nt=v.plugins.browsertab)||void 0===nt?void 0:nt.close;"function"==typeof In&&In(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ke(){ie||(ie=window.setTimeout(()=>{G(ye(y,"redirect-cancelled-by-user"))},2e3))}function gt(){"visible"===(null==document?void 0:document.visibilityState)&&Ke()}f.addPassiveListener(Ve),document.addEventListener("resume",Ke,!1),yn()&&document.addEventListener("visibilitychange",gt,!1),A=()=>{f.removePassiveListener(Ve),document.removeEventListener("resume",Ke,!1),document.removeEventListener("visibilitychange",gt,!1),ie&&window.clearTimeout(ie)}})}finally{A()}})).apply(this,arguments)}function Aa(y){return Jp.apply(this,arguments)}function Jp(){return(Jp=(0,d.Z)(function*(y){const f=Du(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Du(y){if(te(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}!function vy(y){(0,oe._registerComponent)(new re.wA("auth",(f,{options:g})=>{const v=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:N,authDomain:G}=v.options;return((ie,Ve)=>{ee(N&&!N.includes(":"),"invalid-api-key",{appName:ie.name}),ee(!(null==G?void 0:G.includes(":")),"argument-error",{appName:ie.name});const Ke={apiKey:N,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fa(y)},gt=new ti(ie,Ve,Ke);return function se(y,f){const g=(null==f?void 0:f.persistence)||[],v=(Array.isArray(g)?g:[g]).map(ne);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(v,null==f?void 0:f.popupRedirectResolver)}(gt,g),gt})(v,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,v)=>{f.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new re.wA("auth-internal",f=>{const g=Oe(f.getProvider("auth").getImmediate());return new Yp(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(yy,Vh,function _y(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(yy,Vh,"esm2017")}("Browser");class $h extends Di{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function jl(y){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,d.Z)(function*(y){const f=yield Hl()._get(Gh(y));return f&&(yield Hl()._remove(Gh(y))),f})).apply(this,arguments)}function $l(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*f.length);y.push(f.charAt(v))}return y.join("")}function Hl(){return ne(Mn)}function Gh(y){return le("authEvent",y.config.apiKey,y.name)}function yd(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function Wh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}function _d(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function eg(y=(0,O.z$)()){return!("file:"!==_d()&&"ionic:"!==_d()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function wr(){try{const y=self.localStorage,f=Ho();if(y)return y.setItem(f,"1"),y.removeItem(f),!function ea(y=(0,O.z$)()){return function Cy(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Dy(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return vo()&&(0,O.hl)()}return!1}function vo(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Zl(){return(function by(){return"http:"===_d()||"https:"===_d()}()||(0,O.ru)()||eg())&&!function vd(){return(0,O.b$)()||(0,O.UG)()}()&&wr()&&!vo()}function Kh(){return eg()&&"undefined"!=typeof document}function Sa(){return(Sa=(0,d.Z)(function*(){return!!Kh()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Ai={LOCAL:"local",NONE:"none",SESSION:"session"},xa=ee,Qh="persistence";function Ma(y){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,d.Z)(function*(y){yield y._initializationPromise;const f=zl(),g=le(Qh,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function zl(){var y;try{return(null===(y=function Yh(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const Ty=ee;class ci{constructor(){this.browserResolver=ne(class Jo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lr,this._completeRedirectFn=wn}_openPopup(f,g,v,A){var N=this;return(0,d.Z)(function*(){var G;te(null===(G=N.eventManagers[f._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ie=Fh(f,g,v,vt(),A);return function pd(y,f,g,v=500,A=600){const N=Math.max((window.screen.availHeight-A)/2,0).toString(),G=Math.max((window.screen.availWidth-v)/2,0).toString();let ie="";const Ve=Object.assign(Object.assign({},fy),{width:v.toString(),height:A.toString(),top:N,left:G}),Ke=(0,O.z$)().toLowerCase();g&&(ie=gr(Ke)?"_blank":g),ft(Ke)&&(f=f||"http://localhost",Ve.scrollbars="yes");const gt=Object.entries(Ve).reduce((In,[Hi,Kl])=>`${In}${Hi}=${Kl},`,"");if(function Ya(y=(0,O.z$)()){var f;return Jn(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Ke)&&"_self"!==ie)return function kh(y,f){const g=document.createElement("a");g.href=y,g.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(f||"",ie),new fd(null);const nt=window.open(f||"",ie,gt);ee(nt,y,"popup-blocked");try{nt.focus()}catch(In){}return new fd(nt)}(f,ie,Ho())})()}_openRedirect(f,g,v,A){var N=this;return(0,d.Z)(function*(){return yield N._originValidation(f),function Rh(y){ln().location.href=y}(Fh(f,g,v,vt(),A)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:A,promise:N}=this.eventManagers[g];return A?Promise.resolve(A):(te(N,"If manager is not set, promise should be"),N)}const v=this.initAndGetManager(f);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(f){var g=this;return(0,d.Z)(function*(){const v=yield function hy(y){return cs.apply(this,arguments)}(f),A=new Di(f);return v.register("authEvent",N=>(ee(null==N?void 0:N.authEvent,f,"invalid-auth-event"),{status:A.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:A},g.iframes[f._key()]=v,A})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Hs,{type:Hs},A=>{var N;const G=null===(N=null==A?void 0:A[0])||void 0===N?void 0:N[Hs];void 0!==G&&g(!!G),be(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function uy(y){return ls.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Qi()||Gt()||Jn()}}),this.cordovaResolver=ne(class zh{constructor(){this._redirectPersistence=lr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wn}_initialize(f){var g=this;return(0,d.Z)(function*(){const v=f._key();let A=g.eventManagers.get(v);return A||(A=new $h(f),g.eventManagers.set(v,A),g.attachCallbackListeners(f,A)),A})()}_openPopup(f){be(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,v,A){var N=this;return(0,d.Z)(function*(){!function md(y){var f,g,v,A,N,G,ie,Ve,Ke,gt;const nt=Gs();ee("function"==typeof(null===(f=null==nt?void 0:nt.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(void 0!==(null===(g=null==nt?void 0:nt.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee("function"==typeof(null===(N=null===(A=null===(v=null==nt?void 0:nt.cordova)||void 0===v?void 0:v.plugins)||void 0===A?void 0:A.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(Ve=null===(ie=null===(G=null==nt?void 0:nt.cordova)||void 0===G?void 0:G.plugins)||void 0===ie?void 0:ie.browsertab)||void 0===Ve?void 0:Ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(gt=null===(Ke=null==nt?void 0:nt.cordova)||void 0===Ke?void 0:Ke.InAppBrowser)||void 0===gt?void 0:gt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const G=yield N._initialize(f);yield G.initialized(),G.resetRedirect(),function wu(){$i.clear()}(),yield N._originValidation(f);const ie=function Hh(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:$l(),postBody:null,tenantId:y.tenantId,error:ye(y,"no-auth-event")}}(f,v,A);yield function c0(y,f){return Hl()._set(Gh(y),f)}(f,ie);const Ve=yield function Uh(y,f,g){return Cu.apply(this,arguments)}(f,ie,g),Ke=yield function Bl(y){const{cordova:f}=Gs();return new Promise(g=>{f.plugins.browsertab.isAvailable(v=>{let A=null;v?f.plugins.browsertab.openUrl(y):A=f.InAppBrowser.open(y,function to(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(Ve);return function Qp(y,f,g){return gd.apply(this,arguments)}(f,G,Ke)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Bh(y){return Ti.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:v,handleOpenURL:A,BuildInfo:N}=Gs(),G=setTimeout((0,d.Z)(function*(){yield jl(f),g.onEvent(Wh())}),500),ie=function(){var gt=(0,d.Z)(function*(nt){clearTimeout(G);const In=yield jl(f);let Hi=null;In&&(null==nt?void 0:nt.url)&&(Hi=function wy(y,f){var g,v;const A=function Gl(y){const f=yd(y),g=f.link?decodeURIComponent(f.link):void 0,v=yd(g).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return yd(A).link||A||v||g||y}(f);if(A.includes("/__/auth/callback")){const N=yd(A),G=N.firebaseError?function qh(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(N.firebaseError)):null,ie=null===(v=null===(g=null==G?void 0:G.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Ve=ie?ye(ie):null;return Ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(In,nt.url)),g.onEvent(Hi||Wh())});return function(In){return gt.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,ie);const Ve=A,Ke=`${N.packageName.toLowerCase()}://`;Gs().handleOpenURL=function(){var gt=(0,d.Z)(function*(nt){if(nt.toLowerCase().startsWith(Ke)&&ie({url:nt}),"function"==typeof Ve)try{Ve(nt)}catch(In){console.error(In)}});return function(nt){return gt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=lr,this._completeRedirectFn=wn}_initialize(f){var g=this;return(0,d.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,v,A){var N=this;return(0,d.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(f,g,v,A)})()}_openRedirect(f,g,v,A){var N=this;return(0,d.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(f,g,v,A)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Kh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ty(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Nr(){return Sa.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function rg(y){return y.unwrap()}function Ra(y){return ig(y)}function ig(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ci.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=ga;break;case"facebook.com":v=io;break;case"github.com":v=Hc;break;case"twitter.com":v=nu;break;default:const{oauthIdToken:A,oauthAccessToken:N,oauthTokenSecret:G,pendingToken:ie,nonce:Ve}=f;return N||G||A||ie?ie?g.startsWith("saml.")?Vo._create(g,ie):es._fromParams({providerId:g,signInMethod:g,pendingToken:ie,idToken:A,accessToken:N}):new Lo(g).credential({idToken:A,accessToken:N,rawNonce:Ve}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function Ir(y,f){return f.catch(g=>{throw g instanceof O.ZR&&function Sy(y,f){var g;const v=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new xy(y,function mu(y,f){var g;const v=(0,O.m9)(y),A=f;return ee(f.customData.operationType,v,"argument-error"),ee(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),wa._fromError(v,A)}(y,f));else if(v){const A=ig(f),N=f;A&&(N.credential=A,N.tenantId=v.tenantId||void 0,N.email=v.email||void 0,N.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:Ra(g),additionalUserInfo:_r(g),user:Eo.getOrCreate(A)}})}function Xh(y,f){return ef.apply(this,arguments)}function ef(){return(ef=(0,d.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:v=>Ir(y,g.confirm(v))}})).apply(this,arguments)}class xy{constructor(f,g){this.resolver=g,this.auth=function Ay(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Ir(rg(this.auth),this.resolver.resolveSignIn(f))}}class Eo{constructor(f){this._delegate=f,this.multiFactor=function Jc(y){const f=(0,O.m9)(y);return $o.has(f)||$o.set(f,is._fromUser(f)),$o.get(f)}(f)}static getOrCreate(f){return Eo.USER_MAP.has(f)||Eo.USER_MAP.set(f,new Eo(f)),Eo.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,d.Z)(function*(){return Ir(g.auth,_i(g._delegate,f))})()}linkWithPhoneNumber(f,g){var v=this;return(0,d.Z)(function*(){return Xh(v.auth,function Sl(y,f,g){return Ko.apply(this,arguments)}(v._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,d.Z)(function*(){return Ir(g.auth,function Bi(y,f,g){return Eu.apply(this,arguments)}(g._delegate,f,ci))})()}linkWithRedirect(f){var g=this;return(0,d.Z)(function*(){return yield Ma(Oe(g.auth)),function ze(y,f,g){return function yt(y,f,g){return At.apply(this,arguments)}(y,f,g)}(g._delegate,f,ci)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,d.Z)(function*(){return Ir(g.auth,Ms(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Xh(this.auth,function Zp(y,f,g){return xl.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Ir(this.auth,function fo(y,f,g){return vu.apply(this,arguments)}(this._delegate,f,ci))}reauthenticateWithRedirect(f){var g=this;return(0,d.Z)(function*(){return yield Ma(Oe(g.auth)),function X(y,f,g){return function Se(y,f,g){return xe.apply(this,arguments)}(y,f,g)}(g._delegate,f,ci)})()}sendEmailVerification(f){return function vi(y,f){return ml.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,d.Z)(function*(){return yield function ma(y,f){return ll.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function vl(y,f){return El((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function zc(y,f){return El((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Ml(y,f){return us.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Ea(y,f){return _l.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function pu(y,f,g){return gu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Eo.USER_MAP=new WeakMap;const Wl=ee;let tf=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;Wl(A,"invalid-api-key",{appName:g.name}),Wl(A,"invalid-api-key",{appName:g.name});const N="undefined"!=typeof window?ci:void 0;this._delegate=v.initialize({options:{persistence:My(A,g.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Eo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function un(y,f,g){const v=Oe(y);ee(v._canInitEmulator,v,"emulator-config-failed"),ee(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const A=!!(null==g?void 0:g.disableWarnings),N=sr(f),{host:G,port:ie}=function Is(y){const f=sr(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(v);if(A){const N=A[1];return{host:N,port:Pn(v.substr(N.length+1))}}{const[N,G]=v.split(":");return{host:N,port:Pn(G)}}}(f);v.config.emulator={url:`${N}//${G}${null===ie?"":`:${ie}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:G,port:ie,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function ki(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function dl(y,f){return we.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Rt(this._delegate,g)}confirmPasswordReset(g,v){return function du(y,f,g){return cl.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var A=this;return(0,d.Z)(function*(){return Ir(A._delegate,function jo(y,f,g){return Hr.apply(this,arguments)}(A._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function fu(y,f){return Ps.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function gl(y,f){const g=ro.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,d.Z)(function*(){Wl(Zl(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function Et(y,f){return Vn.apply(this,arguments)}(g._delegate,ci);return v?Ir(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Xp(y,f){Oe(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,v,A){const{next:N,error:G,complete:ie}=nf(g,v,A);return this._delegate.onAuthStateChanged(N,G,ie)}onIdTokenChanged(g,v,A){const{next:N,error:G,complete:ie}=nf(g,v,A);return this._delegate.onIdTokenChanged(N,G,ie)}sendSignInLinkToEmail(g,v){return function pl(y,f,g){return Zc.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function lu(y,f,g){return cu.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,d.Z)(function*(){let A;switch(function tg(y,f){xa(Object.values(Ai).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?xa(f!==Ai.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?xa(f===Ai.NONE,y,"unsupported-persistence-type"):vo()?xa(f===Ai.NONE||f===Ai.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):xa(f===Ai.NONE||wr(),y,"unsupported-persistence-type")}(v._delegate,g),g){case Ai.SESSION:A=lr;break;case Ai.LOCAL:A=(yield ne(wi)._isAvailable())?wi:Mn;break;case Ai.NONE:A=$;break;default:return be("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Ir(this._delegate,function iu(y){return Gc.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Ir(this._delegate,Sn(this._delegate,g))}signInWithCustomToken(g){return Ir(this._delegate,function Rs(y,f){return Ns.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return Ir(this._delegate,function fl(y,f,g){return Sn((0,O.m9)(y),ul.credential(f,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return Ir(this._delegate,function hu(y,f,g){return Os.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Xh(this._delegate,function _u(y,f,g){return fn.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,d.Z)(function*(){return Wl(Zl(),v._delegate,"operation-not-supported-in-this-environment"),Ir(v._delegate,function $s(y,f,g){return od.apply(this,arguments)}(v._delegate,g,ci))})()}signInWithRedirect(g){var v=this;return(0,d.Z)(function*(){return Wl(Zl(),v._delegate,"operation-not-supported-in-this-environment"),yield Ma(v._delegate),function x(y,f,g){return function F(y,f,g){return Z.apply(this,arguments)}(y,f,g)}(v._delegate,g,ci)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function hn(y,f){return Bo.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ai,y})();function nf(y,f,g){let v=y;"function"!=typeof y&&({next:v,error:f,complete:g}=y);const A=v;return{next:G=>A(G&&Eo.getOrCreate(G)),error:f,complete:g}}function My(y,f){const g=function ng(y,f){const g=zl();if(!g)return[];const v=le(Qh,y,f);switch(g.getItem(v)){case Ai.NONE:return[$];case Ai.LOCAL:return[wi,lr];case Ai.SESSION:return[lr];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(wi)&&g.push(wi),"undefined"!=typeof window)for(const v of[Mn,lr])g.includes(v)||g.push(v);return g.includes($)||g.push($),g}class rf{constructor(){this.providerId="phone",this._delegate=new Ci(rg(K.Z.auth()))}static credential(f,g){return Ci.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}rf.PHONE_SIGN_IN_METHOD=Ci.PHONE_SIGN_IN_METHOD,rf.PROVIDER_ID=Ci.PROVIDER_ID;const Ry=ee;class Ny{constructor(f,g,v=K.Z.app()){var A;Ry(null===(A=v.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new qp(f,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function sg(y){y.INTERNAL.registerComponent(new re.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new tf(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ul,FacebookAuthProvider:io,GithubAuthProvider:Hc,GoogleAuthProvider:ga,OAuthProvider:Lo,SAMLAuthProvider:ri,PhoneAuthProvider:rf,PhoneMultiFactorGenerator:my,RecaptchaVerifier:Ny,TwitterAuthProvider:nu,Auth:tf,AuthCredential:en,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(K.Z)},8306:(rt,De,k)=>{k.d(De,{y:()=>B});var d=k(2961),K=k(727),O=k(8822),oe=k(4671);var re=k(2416),ce=k(576),ue=k(2806);let B=(()=>{class Ae{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const he=new Ae;return he.source=this,he.operator=ke,he}subscribe(ke,he,Ee){const Ye=function Ge(Ae){return Ae&&Ae instanceof d.Lv||function Q(Ae){return Ae&&(0,ce.m)(Ae.next)&&(0,ce.m)(Ae.error)&&(0,ce.m)(Ae.complete)}(Ae)&&(0,K.Nn)(Ae)}(ke)?ke:new d.Hp(ke,he,Ee);return(0,ue.x)(()=>{const{operator:qe,source:be}=this;Ye.add(qe?qe.call(Ye,be):be?this._subscribe(Ye):this._trySubscribe(Ye))}),Ye}_trySubscribe(ke){try{return this._subscribe(ke)}catch(he){ke.error(he)}}forEach(ke,he){return new(he=j(he))((Ee,Ye)=>{const qe=new d.Hp({next:be=>{try{ke(be)}catch(ye){Ye(ye),qe.unsubscribe()}},error:Ye,complete:Ee});this.subscribe(qe)})}_subscribe(ke){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(ke)}[O.L](){return this}pipe(...ke){return function pe(Ae){return 0===Ae.length?oe.y:1===Ae.length?Ae[0]:function(ke){return Ae.reduce((he,Ee)=>Ee(he),ke)}}(ke)(this)}toPromise(ke){return new(ke=j(ke))((he,Ee)=>{let Ye;this.subscribe(qe=>Ye=qe,qe=>Ee(qe),()=>he(Ye))})}}return Ae.create=Ne=>new Ae(Ne),Ae})();function j(Ae){var Ne;return null!==(Ne=null!=Ae?Ae:re.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(rt,De,k)=>{k.d(De,{x:()=>re});var d=k(8306),K=k(727);const oe=(0,k(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var J=k(8737),pe=k(2806);let re=(()=>{class ue extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Q=new ce(this,this);return Q.operator=j,Q}_throwIfClosed(){if(this.closed)throw new oe}next(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(j)}})}error(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Q}=this;for(;Q.length;)Q.shift().error(j)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Q,isStopped:Ge,observers:Ae}=this;return Q||Ge?K.Lc:(this.currentObservers=null,Ae.push(j),new K.w0(()=>{this.currentObservers=null,(0,J.P)(Ae,j)}))}_checkFinalizedStatuses(j){const{hasError:Q,thrownError:Ge,isStopped:Ae}=this;Q?j.error(Ge):Ae&&j.complete()}asObservable(){const j=new d.y;return j.source=this,j}}return ue.create=(B,j)=>new ce(B,j),ue})();class ce extends re{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Q||Q.call(j,B)}error(B){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Q||Q.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,Q;return null!==(Q=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==Q?Q:K.Lc}}},2961:(rt,De,k)=>{k.d(De,{Hp:()=>ke,Lv:()=>Q});var d=k(576),K=k(727),O=k(2416),oe=k(7849);function J(){}const pe=ue("C",void 0,void 0);function ue(be,ye,ve){return{kind:be,value:ye,error:ve}}var B=k(3410),j=k(2806);class Q extends K.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,K.Nn)(ye)&&ye.add(this)):this.destination=qe}static create(ye,ve,$e){return new ke(ye,ve,$e)}next(ye){this.isStopped?Ye(function ce(be){return ue("N",be,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?Ye(function re(be){return ue("E",void 0,be)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?Ye(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Ae(be,ye){return Ge.call(be,ye)}class Ne{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:ve}=this;if(ve.next)try{ve.next(ye)}catch($e){he($e)}}error(ye){const{partialObserver:ve}=this;if(ve.error)try{ve.error(ye)}catch($e){he($e)}else he(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(ve){he(ve)}}}class ke extends Q{constructor(ye,ve,$e){let Be;if(super(),(0,d.m)(ye)||!ye)Be={next:null!=ye?ye:void 0,error:null!=ve?ve:void 0,complete:null!=$e?$e:void 0};else{let ee;this&&O.v.useDeprecatedNextContext?(ee=Object.create(ye),ee.unsubscribe=()=>this.unsubscribe(),Be={next:ye.next&&Ae(ye.next,ee),error:ye.error&&Ae(ye.error,ee),complete:ye.complete&&Ae(ye.complete,ee)}):Be=ye}this.destination=new Ne(Be)}}function he(be){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(be):(0,oe.h)(be)}function Ye(be,ye){const{onStoppedNotification:ve}=O.v;ve&&B.z.setTimeout(()=>ve(be,ye))}const qe={closed:!0,next:J,error:function Ee(be){throw be},complete:J}},727:(rt,De,k)=>{k.d(De,{Lc:()=>pe,w0:()=>J,Nn:()=>re});var d=k(576);const O=(0,k(3888).d)(ue=>function(j){ue(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Q,Ge)=>`${Ge+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var oe=k(8737);class J{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Ae of j)Ae.remove(this);else j.remove(this);const{initialTeardown:Q}=this;if((0,d.m)(Q))try{Q()}catch(Ae){B=Ae instanceof O?Ae.errors:[Ae]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Ae of Ge)try{ce(Ae)}catch(Ne){B=null!=B?B:[],Ne instanceof O?B=[...B,...Ne.errors]:B.push(Ne)}}if(B)throw new O(B)}}add(B){var j;if(B&&B!==this)if(this.closed)ce(B);else{if(B instanceof J){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,oe.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,oe.P)(j,B),B instanceof J&&B._removeParent(this)}}J.EMPTY=(()=>{const ue=new J;return ue.closed=!0,ue})();const pe=J.EMPTY;function re(ue){return ue instanceof J||ue&&"closed"in ue&&(0,d.m)(ue.remove)&&(0,d.m)(ue.add)&&(0,d.m)(ue.unsubscribe)}function ce(ue){(0,d.m)(ue)?ue():ue.unsubscribe()}},2416:(rt,De,k)=>{k.d(De,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(rt,De,k)=>{k.d(De,{E:()=>K});const K=new(k(8306).y)(J=>J.complete())},8996:(rt,De,k)=>{k.d(De,{D:()=>ye});var d=k(8421),K=k(5363),O=k(9468),pe=k(8306),ce=k(2202),ue=k(576),B=k(9672);function Q(ve,$e){if(!ve)throw new Error("Iterable cannot be null");return new pe.y(Be=>{(0,B.f)(Be,$e,()=>{const ee=ve[Symbol.asyncIterator]();(0,B.f)(Be,$e,()=>{ee.next().then(q=>{q.done?Be.complete():Be.next(q.value)})},0,!0)})})}var Ge=k(3670),Ae=k(8239),Ne=k(1144),ke=k(6495),he=k(2206),Ee=k(4532),Ye=k(3260);function ye(ve,$e){return $e?function be(ve,$e){if(null!=ve){if((0,Ge.c)(ve))return function oe(ve,$e){return(0,d.Xf)(ve).pipe((0,O.R)($e),(0,K.Q)($e))}(ve,$e);if((0,Ne.z)(ve))return function re(ve,$e){return new pe.y(Be=>{let ee=0;return $e.schedule(function(){ee===ve.length?Be.complete():(Be.next(ve[ee++]),Be.closed||this.schedule())})})}(ve,$e);if((0,Ae.t)(ve))return function J(ve,$e){return(0,d.Xf)(ve).pipe((0,O.R)($e),(0,K.Q)($e))}(ve,$e);if((0,he.D)(ve))return Q(ve,$e);if((0,ke.T)(ve))return function j(ve,$e){return new pe.y(Be=>{let ee;return(0,B.f)(Be,$e,()=>{ee=ve[ce.h](),(0,B.f)(Be,$e,()=>{let q,te;try{({value:q,done:te}=ee.next())}catch(ge){return void Be.error(ge)}te?Be.complete():Be.next(q)},0,!0)}),()=>(0,ue.m)(null==ee?void 0:ee.return)&&ee.return()})}(ve,$e);if((0,Ye.L)(ve))return function qe(ve,$e){return Q((0,Ye.Q)(ve),$e)}(ve,$e)}throw(0,Ee.z)(ve)}(ve,$e):(0,d.Xf)(ve)}},8421:(rt,De,k)=>{k.d(De,{Xf:()=>Ge});var d=k(655),K=k(1144),O=k(8239),oe=k(8306),J=k(3670),pe=k(2206),re=k(4532),ce=k(6495),ue=k(3260),B=k(576),j=k(7849),Q=k(8822);function Ge(be){if(be instanceof oe.y)return be;if(null!=be){if((0,J.c)(be))return function Ae(be){return new oe.y(ye=>{const ve=be[Q.L]();if((0,B.m)(ve.subscribe))return ve.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(be);if((0,K.z)(be))return function Ne(be){return new oe.y(ye=>{for(let ve=0;ve<be.length&&!ye.closed;ve++)ye.next(be[ve]);ye.complete()})}(be);if((0,O.t)(be))return function ke(be){return new oe.y(ye=>{be.then(ve=>{ye.closed||(ye.next(ve),ye.complete())},ve=>ye.error(ve)).then(null,j.h)})}(be);if((0,pe.D)(be))return Ee(be);if((0,ce.T)(be))return function he(be){return new oe.y(ye=>{for(const ve of be)if(ye.next(ve),ye.closed)return;ye.complete()})}(be);if((0,ue.L)(be))return function Ye(be){return Ee((0,ue.Q)(be))}(be)}throw(0,re.z)(be)}function Ee(be){return new oe.y(ye=>{(function qe(be,ye){var ve,$e,Be,ee;return(0,d.mG)(this,void 0,void 0,function*(){try{for(ve=(0,d.KL)(be);!($e=yield ve.next()).done;)if(ye.next($e.value),ye.closed)return}catch(q){Be={error:q}}finally{try{$e&&!$e.done&&(ee=ve.return)&&(yield ee.call(ve))}finally{if(Be)throw Be.error}}ye.complete()})})(be,ye).catch(ve=>ye.error(ve))})}},6451:(rt,De,k)=>{k.d(De,{T:()=>pe});var d=k(8189),K=k(8421),O=k(515),oe=k(7669),J=k(8996);function pe(...re){const ce=(0,oe.yG)(re),ue=(0,oe._6)(re,1/0),B=re;return B.length?1===B.length?(0,K.Xf)(B[0]):(0,d.J)(ue)((0,J.D)(B,ce)):O.E}},5403:(rt,De,k)=>{k.d(De,{x:()=>K});var d=k(2961);function K(oe,J,pe,re,ce){return new O(oe,J,pe,re,ce)}class O extends d.Lv{constructor(J,pe,re,ce,ue,B){super(J),this.onFinalize=ue,this.shouldUnsubscribe=B,this._next=pe?function(j){try{pe(j)}catch(Q){J.error(Q)}}:super._next,this._error=ce?function(j){try{ce(j)}catch(Q){J.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch(j){J.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var J;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(J=this.onFinalize)||void 0===J||J.call(this))}}}},4004:(rt,De,k)=>{k.d(De,{U:()=>O});var d=k(4482),K=k(5403);function O(oe,J){return(0,d.e)((pe,re)=>{let ce=0;pe.subscribe((0,K.x)(re,ue=>{re.next(oe.call(J,ue,ce++))}))})}},8189:(rt,De,k)=>{k.d(De,{J:()=>O});var d=k(5577),K=k(4671);function O(oe=1/0){return(0,d.z)(K.y,oe)}},5577:(rt,De,k)=>{k.d(De,{z:()=>ce});var d=k(4004),K=k(8421),O=k(4482),oe=k(9672),J=k(5403),re=k(576);function ce(ue,B,j=1/0){return(0,re.m)(B)?ce((Q,Ge)=>(0,d.U)((Ae,Ne)=>B(Q,Ae,Ge,Ne))((0,K.Xf)(ue(Q,Ge))),j):("number"==typeof B&&(j=B),(0,O.e)((Q,Ge)=>function pe(ue,B,j,Q,Ge,Ae,Ne,ke){const he=[];let Ee=0,Ye=0,qe=!1;const be=()=>{qe&&!he.length&&!Ee&&B.complete()},ye=$e=>Ee<Q?ve($e):he.push($e),ve=$e=>{Ae&&B.next($e),Ee++;let Be=!1;(0,K.Xf)(j($e,Ye++)).subscribe((0,J.x)(B,ee=>{null==Ge||Ge(ee),Ae?ye(ee):B.next(ee)},()=>{Be=!0},void 0,()=>{if(Be)try{for(Ee--;he.length&&Ee<Q;){const ee=he.shift();Ne?(0,oe.f)(B,Ne,()=>ve(ee)):ve(ee)}be()}catch(ee){B.error(ee)}}))};return ue.subscribe((0,J.x)(B,ye,()=>{qe=!0,be()})),()=>{null==ke||ke()}}(Q,Ge,ue,j)))}},5363:(rt,De,k)=>{k.d(De,{Q:()=>oe});var d=k(9672),K=k(4482),O=k(5403);function oe(J,pe=0){return(0,K.e)((re,ce)=>{re.subscribe((0,O.x)(ce,ue=>(0,d.f)(ce,J,()=>ce.next(ue),pe),()=>(0,d.f)(ce,J,()=>ce.complete(),pe),ue=>(0,d.f)(ce,J,()=>ce.error(ue),pe)))})}},3099:(rt,De,k)=>{k.d(De,{B:()=>pe});var d=k(8996),K=k(5698),O=k(7579),oe=k(2961),J=k(4482);function pe(ce={}){const{connector:ue=(()=>new O.x),resetOnError:B=!0,resetOnComplete:j=!0,resetOnRefCountZero:Q=!0}=ce;return Ge=>{let Ae=null,Ne=null,ke=null,he=0,Ee=!1,Ye=!1;const qe=()=>{null==Ne||Ne.unsubscribe(),Ne=null},be=()=>{qe(),Ae=ke=null,Ee=Ye=!1},ye=()=>{const ve=Ae;be(),null==ve||ve.unsubscribe()};return(0,J.e)((ve,$e)=>{he++,!Ye&&!Ee&&qe();const Be=ke=null!=ke?ke:ue();$e.add(()=>{he--,0===he&&!Ye&&!Ee&&(Ne=re(ye,Q))}),Be.subscribe($e),Ae||(Ae=new oe.Hp({next:ee=>Be.next(ee),error:ee=>{Ye=!0,qe(),Ne=re(be,B,ee),Be.error(ee)},complete:()=>{Ee=!0,qe(),Ne=re(be,j),Be.complete()}}),(0,d.D)(ve).subscribe(Ae))})(Ge)}}function re(ce,ue,...B){return!0===ue?(ce(),null):!1===ue?null:ue(...B).pipe((0,K.q)(1)).subscribe(()=>ce())}},9468:(rt,De,k)=>{k.d(De,{R:()=>K});var d=k(4482);function K(O,oe=0){return(0,d.e)((J,pe)=>{pe.add(O.schedule(()=>J.subscribe(pe),oe))})}},5698:(rt,De,k)=>{k.d(De,{q:()=>oe});var d=k(515),K=k(4482),O=k(5403);function oe(J){return J<=0?()=>d.E:(0,K.e)((pe,re)=>{let ce=0;pe.subscribe((0,O.x)(re,ue=>{++ce<=J&&(re.next(ue),J<=ce&&re.complete())}))})}},8505:(rt,De,k)=>{k.d(De,{b:()=>J});var d=k(576),K=k(4482),O=k(5403),oe=k(4671);function J(pe,re,ce){const ue=(0,d.m)(pe)||re||ce?{next:pe,error:re,complete:ce}:pe;return ue?(0,K.e)((B,j)=>{var Q;null===(Q=ue.subscribe)||void 0===Q||Q.call(ue);let Ge=!0;B.subscribe((0,O.x)(j,Ae=>{var Ne;null===(Ne=ue.next)||void 0===Ne||Ne.call(ue,Ae),j.next(Ae)},()=>{var Ae;Ge=!1,null===(Ae=ue.complete)||void 0===Ae||Ae.call(ue),j.complete()},Ae=>{var Ne;Ge=!1,null===(Ne=ue.error)||void 0===Ne||Ne.call(ue,Ae),j.error(Ae)},()=>{var Ae,Ne;Ge&&(null===(Ae=ue.unsubscribe)||void 0===Ae||Ae.call(ue)),null===(Ne=ue.finalize)||void 0===Ne||Ne.call(ue)}))}):oe.y}},4408:(rt,De,k)=>{k.d(De,{o:()=>J});var d=k(727);class K extends d.w0{constructor(re,ce){super()}schedule(re,ce=0){return this}}const O={setInterval(pe,re,...ce){const{delegate:ue}=O;return(null==ue?void 0:ue.setInterval)?ue.setInterval(pe,re,...ce):setInterval(pe,re,...ce)},clearInterval(pe){const{delegate:re}=O;return((null==re?void 0:re.clearInterval)||clearInterval)(pe)},delegate:void 0};var oe=k(8737);class J extends K{constructor(re,ce){super(re,ce),this.scheduler=re,this.work=ce,this.pending=!1}schedule(re,ce=0){if(this.closed)return this;this.state=re;const ue=this.id,B=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(B,ue,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId(B,this.id,ce),this}requestAsyncId(re,ce,ue=0){return O.setInterval(re.flush.bind(re,this),ue)}recycleAsyncId(re,ce,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return ce;O.clearInterval(ce)}execute(re,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(re,ce);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,ce){let B,ue=!1;try{this.work(re)}catch(j){ue=!0,B=j||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:re,scheduler:ce}=this,{actions:ue}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ue,this),null!=re&&(this.id=this.recycleAsyncId(ce,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(rt,De,k)=>{k.d(De,{v:()=>O});var d=k(6063);class K{constructor(J,pe=K.now){this.schedulerActionCtor=J,this.now=pe}schedule(J,pe=0,re){return new this.schedulerActionCtor(this,J).schedule(re,pe)}}K.now=d.l.now;class O extends K{constructor(J,pe=K.now){super(J,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(J){const{actions:pe}=this;if(this._active)return void pe.push(J);let re;this._active=!0;do{if(re=J.execute(J.state,J.delay))break}while(J=pe.shift());if(this._active=!1,re){for(;J=pe.shift();)J.unsubscribe();throw re}}}},4986:(rt,De,k)=>{k.d(De,{z:()=>O});var d=k(4408);const O=new(k(7565).v)(d.o)},6063:(rt,De,k)=>{k.d(De,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(rt,De,k)=>{k.d(De,{z:()=>d});const d={setTimeout(K,O,...oe){const{delegate:J}=d;return(null==J?void 0:J.setTimeout)?J.setTimeout(K,O,...oe):setTimeout(K,O,...oe)},clearTimeout(K){const{delegate:O}=d;return((null==O?void 0:O.clearTimeout)||clearTimeout)(K)},delegate:void 0}},2202:(rt,De,k)=>{k.d(De,{h:()=>K});const K=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(rt,De,k)=>{k.d(De,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(rt,De,k)=>{k.d(De,{_6:()=>pe,jO:()=>oe,yG:()=>J});var d=k(576);function O(re){return re[re.length-1]}function oe(re){return(0,d.m)(O(re))?re.pop():void 0}function J(re){return function K(re){return re&&(0,d.m)(re.schedule)}(O(re))?re.pop():void 0}function pe(re,ce){return"number"==typeof O(re)?re.pop():ce}},8737:(rt,De,k)=>{function d(K,O){if(K){const oe=K.indexOf(O);0<=oe&&K.splice(oe,1)}}k.d(De,{P:()=>d})},3888:(rt,De,k)=>{function d(K){const oe=K(J=>{Error.call(J),J.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}k.d(De,{d:()=>d})},2806:(rt,De,k)=>{k.d(De,{O:()=>oe,x:()=>O});var d=k(2416);let K=null;function O(J){if(d.v.useDeprecatedSynchronousErrorHandling){const pe=!K;if(pe&&(K={errorThrown:!1,error:null}),J(),pe){const{errorThrown:re,error:ce}=K;if(K=null,re)throw ce}}else J()}function oe(J){d.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=J)}},9672:(rt,De,k)=>{function d(K,O,oe,J=0,pe=!1){const re=O.schedule(function(){oe(),pe?K.add(this.schedule(null,J)):this.unsubscribe()},J);if(K.add(re),!pe)return re}k.d(De,{f:()=>d})},4671:(rt,De,k)=>{function d(K){return K}k.d(De,{y:()=>d})},1144:(rt,De,k)=>{k.d(De,{z:()=>d});const d=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(rt,De,k)=>{k.d(De,{D:()=>K});var d=k(576);function K(O){return Symbol.asyncIterator&&(0,d.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(rt,De,k)=>{function d(K){return"function"==typeof K}k.d(De,{m:()=>d})},3670:(rt,De,k)=>{k.d(De,{c:()=>O});var d=k(8822),K=k(576);function O(oe){return(0,K.m)(oe[d.L])}},6495:(rt,De,k)=>{k.d(De,{T:()=>O});var d=k(2202),K=k(576);function O(oe){return(0,K.m)(null==oe?void 0:oe[d.h])}},8239:(rt,De,k)=>{k.d(De,{t:()=>K});var d=k(576);function K(O){return(0,d.m)(null==O?void 0:O.then)}},3260:(rt,De,k)=>{k.d(De,{L:()=>oe,Q:()=>O});var d=k(655),K=k(576);function O(J){return(0,d.FC)(this,arguments,function*(){const re=J.getReader();try{for(;;){const{value:ce,done:ue}=yield(0,d.qq)(re.read());if(ue)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(ce)}}finally{re.releaseLock()}})}function oe(J){return(0,K.m)(null==J?void 0:J.getReader)}},4482:(rt,De,k)=>{k.d(De,{A:()=>K,e:()=>O});var d=k(576);function K(oe){return(0,d.m)(null==oe?void 0:oe.lift)}function O(oe){return J=>{if(K(J))return J.lift(function(pe){try{return oe(pe,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(rt,De,k)=>{k.d(De,{h:()=>O});var d=k(2416),K=k(3410);function O(oe){K.z.setTimeout(()=>{const{onUnhandledError:J}=d.v;if(!J)throw oe;J(oe)})}},4532:(rt,De,k)=>{function d(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(De,{z:()=>d})},655:(rt,De,k)=>{function oe(q,te){var ge={};for(var ne in q)Object.prototype.hasOwnProperty.call(q,ne)&&te.indexOf(ne)<0&&(ge[ne]=q[ne]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var Me=0;for(ne=Object.getOwnPropertySymbols(q);Me<ne.length;Me++)te.indexOf(ne[Me])<0&&Object.prototype.propertyIsEnumerable.call(q,ne[Me])&&(ge[ne[Me]]=q[ne[Me]])}return ge}function ce(q,te,ge,ne){return new(ge||(ge=Promise))(function(se,vt){function Zt(ht){try{it(ne.next(ht))}catch(sn){vt(sn)}}function Dn(ht){try{it(ne.throw(ht))}catch(sn){vt(sn)}}function it(ht){ht.done?se(ht.value):function Me(se){return se instanceof ge?se:new ge(function(vt){vt(se)})}(ht.value).then(Zt,Dn)}it((ne=ne.apply(q,te||[])).next())})}function he(q){return this instanceof he?(this.v=q,this):new he(q)}function Ee(q,te,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,ne=ge.apply(q,te||[]),se=[];return Me={},vt("next"),vt("throw"),vt("return"),Me[Symbol.asyncIterator]=function(){return this},Me;function vt(on){ne[on]&&(Me[on]=function(mi){return new Promise(function(Xt,Wi){se.push([on,mi,Xt,Wi])>1||Zt(on,mi)})})}function Zt(on,mi){try{!function Dn(on){on.value instanceof he?Promise.resolve(on.value.v).then(it,ht):sn(se[0][2],on)}(ne[on](mi))}catch(Xt){sn(se[0][3],Xt)}}function it(on){Zt("next",on)}function ht(on){Zt("throw",on)}function sn(on,mi){on(mi),se.shift(),se.length&&Zt(se[0][0],se[0][1])}}function qe(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,te=q[Symbol.asyncIterator];return te?te.call(q):(q=function Q(q){var te="function"==typeof Symbol&&Symbol.iterator,ge=te&&q[te],ne=0;if(ge)return ge.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&ne>=q.length&&(q=void 0),{value:q&&q[ne++],done:!q}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),ge={},ne("next"),ne("throw"),ne("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function ne(se){ge[se]=q[se]&&function(vt){return new Promise(function(Zt,Dn){!function Me(se,vt,Zt,Dn){Promise.resolve(Dn).then(function(it){se({value:it,done:Zt})},vt)}(Zt,Dn,(vt=q[se](vt)).done,vt.value)})}}}k.d(De,{FC:()=>Ee,KL:()=>qe,_T:()=>oe,mG:()=>ce,qq:()=>he})},5e3:(rt,De,k)=>{k.d(De,{$8M:()=>zo,$Z:()=>BE,AFp:()=>de,AaK:()=>ce,AsE:()=>U_,CHM:()=>hl,CRH:()=>mv,CZH:()=>Rm,CqO:()=>Jg,EJc:()=>Lr,EpF:()=>Ld,F4k:()=>A_,FYo:()=>kw,FiY:()=>li,G48:()=>Ju,GfV:()=>bc,Gpc:()=>j,JOm:()=>ie,LFG:()=>ze,LSH:()=>Tu,Lbi:()=>Yu,NdJ:()=>Xg,OlP:()=>En,Oqu:()=>V_,PXZ:()=>Mc,Q6J:()=>$u,QGY:()=>Vd,Qsj:()=>_C,R0b:()=>pi,RDi:()=>ts,Rgc:()=>sp,SBq:()=>Yf,Sil:()=>wI,Suo:()=>Xw,TTD:()=>io,TgZ:()=>ia,VLi:()=>BC,X6Q:()=>MI,XFs:()=>st,Xpm:()=>Mt,Y36:()=>Df,YKP:()=>lv,YNc:()=>kd,Yjl:()=>gr,Yz7:()=>Xt,ZZ4:()=>Bv,_Bn:()=>Ow,_UZ:()=>Fd,_Vd:()=>Ic,_c5:()=>UI,_uU:()=>um,aQg:()=>el,c2e:()=>Sv,cJS:()=>zt,cg1:()=>Ba,dDg:()=>Fm,deG:()=>$p,dqk:()=>Ft,eFA:()=>DI,ekj:()=>mc,g9A:()=>fh,h0i:()=>ua,hGG:()=>eD,hYB:()=>Nf,hij:()=>lm,iGM:()=>gv,ifc:()=>Vt,ip1:()=>Tv,kL8:()=>Z_,lG2:()=>Gt,lnq:()=>qd,n5z:()=>id,oAB:()=>Y,oxw:()=>Mf,q4F:()=>Fw,qLn:()=>Ir,qOj:()=>br,qZA:()=>Tf,sBO:()=>GC,sIi:()=>uc,s_b:()=>No,soG:()=>Nm,tBr:()=>Rr,tb:()=>yI,tp0:()=>mo,uIk:()=>g_,vHH:()=>Ne,vpe:()=>Ro,wAp:()=>ct,xp6:()=>lf,z2F:()=>yh,zSh:()=>Md,zs3:()=>Co});var d=k(7579),K=k(727),O=k(8306),oe=k(6451),J=k(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function re(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ue(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=pe({__forward_ref__:pe});function j(i){return i.__forward_ref__=j,i.toString=function(){return ce(this())},i}function Q(i){return Ge(i)?i():i}function Ge(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}class Ne extends Error{constructor(s,a){super(function ke(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function Ee(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}function ye(i,s){const a=s?` in ${s}`:"";throw new Ne(-201,`No provider for ${Ee(i)} found${a}`)}function it(i,s){null==i&&function ht(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Xt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function zt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Lt(i){return nr(i,Oi)||nr(i,Ki)}function nr(i,s){return i.hasOwnProperty(s)?i[s]:null}function Ar(i){return i&&(i.hasOwnProperty(Sr)||i.hasOwnProperty(Yi))?i[Sr]:null}const Oi=pe({\u0275prov:pe}),Sr=pe({\u0275inj:pe}),Ki=pe({ngInjectableDef:pe}),Yi=pe({ngInjectorDef:pe});var st=(()=>((st=st||{})[st.Default=0]="Default",st[st.Host=1]="Host",st[st.Self=2]="Self",st[st.SkipSelf=4]="SkipSelf",st[st.Optional=8]="Optional",st))();let Ur;function jn(i){const s=Ur;return Ur=i,s}function ei(i,s,a){const l=Lt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&st.Optional?null:void 0!==s?s:void ye(ce(i),"Injector")}function dn(i){return{toString:i}.toString()}var Qn=(()=>((Qn=Qn||{})[Qn.OnPush=0]="OnPush",Qn[Qn.Default=1]="Default",Qn))(),Vt=(()=>{return(i=Vt||(Vt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Vt;var i})();const et="undefined"!=typeof globalThis&&globalThis,mt="undefined"!=typeof window&&window,rr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ft=et||"undefined"!=typeof global&&global||mt||rr,ir={},ot=[],pr=pe({\u0275cmp:pe}),Nt=pe({\u0275dir:pe}),Ze=pe({\u0275pipe:pe}),Ce=pe({\u0275mod:pe}),We=pe({\u0275fac:pe}),at=pe({__NG_ELEMENT_ID__:pe});let Pt=0;function Mt(i){return dn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Qn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||ot,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Vt.Emulated,id:"c",styles:i.styles||ot,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,p=i.features,_=i.pipes;return l.id+=Pt++,l.inputs=ft(i.inputs,a),l.outputs=ft(i.outputs),p&&p.forEach(E=>E(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(L):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map($):null,l})}function L(i){return Ut(i)||function yn(i){return i[Nt]||null}(i)}function $(i){return function Tt(i){return i[Ze]||null}(i)}const le={};function Y(i){return dn(()=>{const s={type:i.type,bootstrap:i.bootstrap||ot,declarations:i.declarations||ot,imports:i.imports||ot,exports:i.exports||ot,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(le[i.id]=i.type),s})}function ft(i,s){if(null==i)return ir;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],p=c;Array.isArray(c)&&(p=c[1],c=c[0]),a[c]=l,s&&(s[c]=p)}return a}const Gt=Mt;function gr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ut(i){return i[pr]||null}function an(i,s){const a=i[Ce]||null;if(!a&&!0===s)throw new Error(`Type ${ce(i)} does not have '\u0275mod' property.`);return a}function yi(i){return Array.isArray(i)&&"object"==typeof i[1]}function ni(i){return Array.isArray(i)&&!0===i[1]}function Lc(i){return 0!=(8&i.flags)}function Ds(i){return 2==(2&i.flags)}function Xa(i){return 1==(1&i.flags)}function Br(i){return null!==i.template}function Th(i){return 0!=(512&i[2])}function jr(i,s){return i.hasOwnProperty(We)?i[We]:null}class Lo{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function io(){return ga}function ga(i){return i.type.prototype.ngOnChanges&&(i.setInput=Up),Hc}function Hc(){const i=Ss(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===ir)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Up(i,s,a,l){const c=Ss(i)||function ri(i,s){return i[Vo]=s}(i,{previous:ir,current:null}),p=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],I=_[E];p[E]=new Lo(I&&I.currentValue,s,_===ir),i[l]=s}io.ngInherit=!0;const Vo="__ngSimpleChanges__";function Ss(i){return i[Vo]||null}let ou;function ts(i){ou=i}function cn(i){return!!i.listen}const Uo={createRenderer:(i,s)=>function ma(){return void 0!==ou?ou:"undefined"!=typeof document?document:void 0}()};function nn(i){for(;Array.isArray(i);)i=i[0];return i}function oo(i,s){return nn(s[i])}function mr(i,s){return nn(s[i.index])}function ya(i,s){return i.data[s]}function yr(i,s){const a=s[i];return yi(a)?a:a[0]}function Ms(i){return 4==(4&i[2])}function ns(i){return 128==(128&i[2])}function $r(i,s){return null==s?null:i[s]}function Rs(i){i[18]=0}function Ns(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const ut={lFrame:uo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function du(){return ut.bindingsEnabled}function we(){return ut.lFrame.lView}function Rt(){return ut.lFrame.tView}function hl(i){return ut.lFrame.contextLView=i,i[8]}function hn(){let i=Bo();for(;null!==i&&64===i.type;)i=i.parent;return i}function Bo(){return ut.lFrame.currentTNode}function Hr(i,s){const a=ut.lFrame;a.currentTNode=i,a.isParent=s}function fl(){return ut.lFrame.isParent}function hu(){return ut.isInCheckNoChangesMode}function Os(i){ut.isInCheckNoChangesMode=i}function ii(){return ut.lFrame.bindingIndex}function Ps(){return ut.lFrame.bindingIndex++}function vi(i){const s=ut.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function gu(i,s){const a=ut.lFrame;a.bindingIndex=a.bindingRootIndex=i,va(s)}function va(i){ut.lFrame.currentDirectiveIndex=i}function _l(){return ut.lFrame.currentQueryIndex}function vl(i){ut.lFrame.currentQueryIndex=i}function zc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function El(i,s,a){if(a&st.SkipSelf){let c=s,p=i;for(;!(c=c.parent,null!==c||a&st.Host||(c=zc(p),null===c||(p=p[15],10&c.type))););if(null===c)return!1;s=c,i=p}const l=ut.lFrame=Wc();return l.currentTNode=s,l.lView=i,!0}function ao(i){const s=Wc(),a=i[1];ut.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Wc(){const i=ut.lFrame,s=null===i?null:i.child;return null===s?uo(i):s}function uo(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Kc(){const i=ut.lFrame;return ut.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Yc=Kc;function lo(){const i=Kc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function _r(){return ut.lFrame.selectedIndex}function Fs(i){ut.lFrame.selectedIndex=i}function _n(){const i=ut.lFrame;return ya(i.tView,i.selectedIndex)}function rs(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:S}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function wa(i,s,a){Qc(i,s,3,a)}function mu(i,s,a,l){(3&i[2])===a&&Qc(i,s,a,l)}function Fn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Qc(i,s,a,l){const p=null!=l?l:-1,_=s.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=l&&E>=l)break}else s[I]<0&&(i[18]+=65536),(E<p||-1==p)&&(Bp(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Bp(i,s,a,l){const c=a[l]<0,p=a[l+1],E=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class $o{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function pt(i,s,a){const l=cn(i);let c=0;for(;c<a.length;){const p=a[c];if("number"==typeof p){if(0!==p)break;c++;const _=a[c++],E=a[c++],I=a[c++];l?i.setAttribute(s,E,I,_):s.setAttributeNS(_,E,I)}else{const _=p,E=a[++c];Gr(_)?l&&i.setProperty(s,_,E):l?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function lr(i){return 3===i||4===i||6===i}function Gr(i){return 64===i.charCodeAt(0)}function qr(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||Ho(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function Ho(i,s,a,l,c){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==c&&(i[p+1]=c));if(l===i[p+1])return void(i[p+2]=c)}p++,null!==l&&p++,null!==c&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==c&&i.splice(p++,0,c)}function ed(i){return-1!==i}function ln(i){return 32767&i}function Ei(i,s){let a=function Rh(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let yu=!0;function si(i){const s=yu;return yu=i,s}let nd=0;function Ln(i,s){const a=Go(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,ss(l.data,i),ss(s,null),ss(l.blueprint,null));const c=oi(i,s),p=i.injectorIndex;if(ed(c)){const _=ln(c),E=Ei(c,s),I=E[1].data;for(let T=0;T<8;T++)s[p+T]=E[_+T]|I[_+T]}return s[p+8]=c,p}function ss(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Go(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function oi(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const p=c[1],_=p.type;if(l=2===_?p.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Ls(i,s,a){!function ho(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(at)&&(l=a[at]),null==l&&(l=a[at]=nd++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Fi(i,s,a){if(a&st.Optional)return i;ye(s,"NodeInjector")}function Tl(i,s,a,l){if(a&st.Optional&&void 0===l&&(l=null),0==(a&(st.Self|st.Host))){const c=i[9],p=jn(void 0);try{return c?c.get(s,l,a&st.Optional):ei(s,l,a&st.Optional)}finally{jn(p)}}return Fi(l,s,a)}function Vs(i,s,a,l=st.Default,c){if(null!==i){const p=function Zo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(at)?i[at]:void 0;return"number"==typeof s?s>=0?255&s:Al:s}(a);if("function"==typeof p){if(!El(s,i,l))return l&st.Host?Fi(c,a,l):Tl(s,a,l,c);try{const _=p(l);if(null!=_||l&st.Optional)return _;ye(a)}finally{Yc()}}else if("number"==typeof p){let _=null,E=Go(i,s),I=-1,T=l&st.Host?s[16][6]:null;for((-1===E||l&st.SkipSelf)&&(I=-1===E?oi(i,s):s[E+8],-1!==I&&Mr(l,!1)?(_=s[1],E=ln(I),s=Ei(I,s)):E=-1);-1!==E;){const S=s[1];if(ba(p,E,S.data)){const P=rd(E,s,a,_,l,T);if(P!==Li)return P}I=s[E+8],-1!==I&&Mr(l,s[1].data[E+8]===T)&&ba(p,E,s)?(_=S,E=ln(I),s=Ei(I,s)):E=-1}}}return Tl(s,a,l,c)}const Li={};function Al(){return new Ii(hn(),we())}function rd(i,s,a,l,c,p){const _=s[1],E=_.data[i+8],S=qo(E,_,a,null==l?Ds(E)&&yu:l!=_&&0!=(3&E.type),c&st.Host&&p===E);return null!==S?wi(s,_,S,E):Li}function qo(i,s,a,l,c){const p=i.providerIndexes,_=s.data,E=1048575&p,I=i.directiveStart,S=p>>20,V=c?E+S:i.directiveEnd;for(let z=l?E:E+S;z<V;z++){const me=_[z];if(z<I&&a===me||z>=I&&me.type===a)return z}if(c){const z=_[I];if(z&&Br(z)&&z.type===a)return I}return null}function wi(i,s,a,l){let c=i[a];const p=s.data;if(function Jc(i){return i instanceof $o}(c)){const _=c;_.resolving&&function Ye(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ee(p[a]));const E=si(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?jn(_.injectImpl):null;El(i,l,st.Default);try{c=i[a]=_.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function bl(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:p}=s.type.prototype;if(l){const _=ga(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==I&&jn(I),si(E),_.resolving=!1,Yc()}}return c}function ba(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Mr(i,s){return!(i&st.Self||i&st.Host&&s)}class Ii{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Vs(this._tNode,this._lView,s,l,a)}}function id(i){return dn(()=>{const s=i.prototype.constructor,a=s[We]||Rn(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const p=c[We]||Rn(c);if(p&&p!==a)return p;c=Object.getPrototypeOf(c)}return p=>new p})}function Rn(i){return Ge(i)?()=>{const s=Rn(Q(i));return s&&s()}:jr(i)}function zo(i){return function Ia(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const p=a[c];if(lr(p))break;if(0===p)c+=2;else if("number"==typeof p)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(p===s)return a[c+1];c+=2}}}return null}(hn(),i)}const Wo="__parameters__";function vn(i,s,a){return dn(()=>{const l=function Vi(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...p){if(this instanceof c)return l.apply(this,p),this;const _=new c(...p);return E.annotation=_,E;function E(I,T,S){const P=I.hasOwnProperty(Wo)?I[Wo]:Object.defineProperty(I,Wo,{value:[]})[Wo];for(;P.length<=S;)P.push(null);return(P[S]=P[S]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class En{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const $p=new En("AnalyzeForEntryComponents");function Er(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Er(l,s)):s!==i&&s.push(l)}return s}function ai(i,s){i.forEach(a=>Array.isArray(a)?ai(a,s):s(a))}function Ml(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function us(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Hn(i,s,a){let l=$s(i,s);return l>=0?i[1|l]=a:(l=~l,function Rl(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Pl(i,s){const a=$s(i,s);if(a>=0)return i[1|a]}function $s(i,s){return function fo(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const p=l+(c-l>>1),_=i[p<<a];if(s===_)return p<<a;_>s?c=p:l=p+1}return~(c<<a)}(i,s,1)}const po={},Yo="__NG_DI_FLAG__",wu="ngTempTokenPath",C=/\n/gm,F="__source",Z=pe({provide:String,useValue:pe});let X;function Se(i){const s=X;return X=i,s}function xe(i,s=st.Default){if(void 0===X)throw new Ne(203,"");return null===X?ei(i,void 0,s):X.get(i,s&st.Optional?null:void 0,s)}function ze(i,s=st.Default){return(function Yn(){return Ur}()||xe)(Q(i),s)}const At=ze;function Et(i){const s=[];for(let a=0;a<i.length;a++){const l=Q(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Ne(900,"");let c,p=st.Default;for(let _=0;_<l.length;_++){const E=l[_],I=wn(E);"number"==typeof I?-1===I?c=E.token:p|=I:c=E}s.push(ze(c,p))}else s.push(ze(l))}return s}function Vn(i,s){return i[Yo]=s,i.prototype[Yo]=s,i}function wn(i){return i[Yo]}const Rr=Vn(vn("Inject",i=>({token:i})),-1),li=Vn(vn("Optional"),8),mo=Vn(vn("SkipSelf"),4);class pd{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Hs(i){return i instanceof pd?i.changingThisBreaksApplicationSecurity:i}const Gs=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Uh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Qt=(()=>((Qt=Qt||{})[Qt.NONE=0]="NONE",Qt[Qt.HTML=1]="HTML",Qt[Qt.STYLE=2]="STYLE",Qt[Qt.SCRIPT=3]="SCRIPT",Qt[Qt.URL=4]="URL",Qt[Qt.RESOURCE_URL=5]="RESOURCE_URL",Qt))();function Tu(i){const s=function ea(){const i=we();return i&&i[12]}();return s?s.sanitize(Qt.URL,i)||"":function Jo(i,s){const a=function bu(i){return i instanceof pd&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Hs(i):function Cu(i){return(i=String(i)).match(Gs)||i.match(Uh)?i:"unsafe:"+i}(he(i))}const Kh="__ngContext__";function Nr(i,s){i[Kh]=s}function Yh(i){const s=function Sa(i){return i[Kh]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Ra(i){return i.ngOriginalError}function ig(i,...s){i.error(...s)}class Ir{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function Sy(i){return i&&i.ngErrorLogger||ig}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Ra(s);for(;a&&Ra(a);)a=Ra(a);return a||null}}const Ny=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ft))();function g(i){return i instanceof Function?i():i}var ie=(()=>((ie=ie||{})[ie.Important=1]="Important",ie[ie.DashCase=2]="DashCase",ie))();function Ke(i,s){return undefined(i,s)}function In(i){const s=i[3];return ni(s)?s[3]:s}function Au(i){return sf(i[13])}function Su(i){return sf(i[4])}function sf(i){for(;null!==i&&!ni(i);)i=i[4];return i}function ta(i,s,a,l,c){if(null!=l){let p,_=!1;ni(l)?p=l:yi(l)&&(_=!0,l=l[0]);const E=nn(l);0===i&&null!==a?null==c?By(s,a,E):ds(s,a,E,c||null,!0):1===i&&null!==a?ds(s,a,E,c||null,!0):2===i?function Gy(i,s,a){const l=uf(i,s);l&&function fb(i,s,a,l){cn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=p&&function E0(i,s,a,l,c){const p=a[7];p!==nn(a)&&ta(s,i,l,p,c);for(let E=10;E<a.length;E++){const I=a[E];lg(I[1],I,i,s,l,p)}}(s,i,p,a,c)}}function Id(i,s,a){if(cn(i))return i.createElement(s,a);{const l=null!==a?function su(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function d0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Ns(c,-1)),a.splice(l,1)}function Ly(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&d0(c,l),s>0&&(i[a-1][4]=l[4]);const p=us(i,10+s);!function qn(i,s){lg(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Vy(i,s){if(!(256&s[2])){const a=s[11];cn(a)&&a.destroyNode&&lg(i,s,a,3,null,null),function ky(i){let s=i[13];if(!s)return Uy(i[1],i);for(;s;){let a=null;if(yi(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)yi(s)&&Uy(s[1],s),s=s[3];null===s&&(s=i),yi(s)&&Uy(s[1],s),a=s&&s[4]}s=a}}(s)}}function Uy(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function f0(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof $o)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=c[p[_]],I=p[_+1];try{I.call(E)}finally{}}else try{p.call(c)}finally{}}}}(i,s),function h0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],E="function"==typeof _?_(s):nn(s[_]),I=l[c=a[p+2]],T=a[p+3];"boolean"==typeof T?E.removeEventListener(a[p],I,T):T>=0?l[c=T]():l[c=-T].unsubscribe(),p+=2}else{const _=l[c=a[p+1]];a[p].call(_)}if(null!==l){for(let p=c+1;p<l.length;p++)l[p]();s[7]=null}}(i,s),1===s[1].type&&cn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&ni(s[3])){a!==s[3]&&d0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function ag(i,s,a){return function hb(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Vt.None||c===Vt.Emulated)return null}return mr(l,a)}(i,s.parent,a)}function ds(i,s,a,l,c){cn(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function By(i,s,a){cn(i)?i.appendChild(s,a):s.appendChild(a)}function p0(i,s,a,l,c){null!==l?ds(i,s,a,l,c):By(i,s,a)}function uf(i,s){return cn(i)?i.parentNode(s):s.parentNode}let jy=function m0(i,s,a){return 40&i.type?mr(i,a):null};function ug(i,s,a,l){const c=ag(i,l,s),p=s[11],E=function g0(i,s,a){return jy(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)p0(p,c,a[I],E,!1);else p0(p,c,a,E,!1)}function Cd(i,s){if(null!==s){const a=s.type;if(3&a)return mr(s,i);if(4&a)return Hy(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return Cd(i,l);{const c=i[s.index];return ni(c)?Hy(-1,c):nn(c)}}if(32&a)return Ke(s,i)()||nn(i[s.index]);{const l=_0(i,s);return null!==l?Array.isArray(l)?l[0]:Cd(In(i[16]),l):Cd(i,s.next)}}return null}function _0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Hy(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return Cd(l,c)}return s[7]}function qy(i,s,a,l,c,p,_){for(;null!=a;){const E=l[a.index],I=a.type;if(_&&0===s&&(E&&Nr(nn(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)qy(i,s,a.child,l,c,p,!1),ta(s,i,c,E,p);else if(32&I){const T=Ke(a,l);let S;for(;S=T();)ta(s,i,c,S,p);ta(s,i,c,E,p)}else 16&I?v0(i,s,l,a,c,p):ta(s,i,c,E,p);a=_?a.projectionNext:a.next}}function lg(i,s,a,l,c,p){qy(a,l,i.firstChild,s,c,p,!1)}function v0(i,s,a,l,c,p){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)ta(s,i,c,I[T],p);else qy(i,s,I,_[3],c,p,!0)}function wo(i,s,a){cn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Zy(i,s,a){cn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function zy(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const p=s.length;if(c+p===l||i.charCodeAt(c+p)<=32)return c}a=c+1}}const w0="ng-template";function mb(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==zy(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function Na(i){return 4===i.type&&i.value!==w0}function xu(i,s,a){return s===(4!==i.type||a?i.value:w0)}function I0(i,s,a){let l=4;const c=i.attrs||[],p=function C0(i){for(let s=0;s<i.length;s++)if(lr(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!xu(i,I,a)||""===I&&1===s.length){if(pn(l))return!1;_=!0}}else{const T=8&l?I:s[++E];if(8&l&&null!==i.attrs){if(!mb(i.attrs,T,a)){if(pn(l))return!1;_=!0}continue}const P=Mu(8&l?"class":I,c,Na(i),a);if(-1===P){if(pn(l))return!1;_=!0;continue}if(""!==T){let V;V=P>p?"":c[P+1].toLowerCase();const z=8&l?V:null;if(z&&-1!==zy(z,T,0)||2&l&&T!==V){if(pn(l))return!1;_=!0}}}}else{if(!_&&!pn(l)&&!pn(I))return!1;if(_&&pn(I))continue;_=!1,l=I|1&l}}return pn(l)||_}function pn(i){return 0==(1&i)}function Mu(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let p=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=p?1:2}return-1}return function D0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function b0(i,s,a=!1){for(let l=0;l<s.length;l++)if(I0(i,s[l],a))return!0;return!1}function Wy(i,s){return i?":not("+s.trim()+")":s}function A0(i){let s=i[0],a=1,l=2,c="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!pn(_)&&(s+=Wy(p,c),c=""),l=_,p=p||!pn(l);a++}return""!==c&&(s+=Wy(p,c)),s}const Dt={};function lf(i){Ky(Rt(),we(),_r()+i,hu())}function Ky(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&wa(s,p,a)}else{const p=i.preOrderHooks;null!==p&&mu(s,p,0,a)}Fs(a)}function cf(i,s){return i<<17|s<<2}function qs(i){return i>>17&32767}function cg(i){return 2|i}function Io(i){return(131068&i)>>2}function dg(i,s){return-131069&i|s<<2}function fg(i){return 1|i}function B0(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];vl(c),_.contentQueries(2,s[p],p)}}}function Xl(i,s,a,l,c,p,_,E,I,T){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,Rs(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=T||i&&i[9]||null,S[6]=p,S[16]=2==s.type?i[16]:S,S}function Ad(i,s,a,l,c){let p=i.data[s];if(null===p)p=function vg(i,s,a,l,c){const p=Bo(),_=fl(),I=i.data[s]=function Ig(i,s,a,l,c,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==p&&(_?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(i,s,a,l,c),function ml(){return ut.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=c;const _=function jo(){const i=ut.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return Hr(p,!0),p}function Ru(i,s,a,l){if(0===a)return-1;const c=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function ec(i,s,a){ao(s);try{const l=i.viewQuery;null!==l&&xg(1,l,a);const c=i.template;null!==c&&Sd(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&B0(i,s),i.staticViewQueries&&xg(2,i.viewQuery,a);const p=i.components;null!==p&&function YT(i,s){for(let a=0;a<s.length;a++)Tb(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,lo()}}function pf(i,s,a,l){const c=s[2];if(256==(256&c))return;ao(s);const p=hu();try{Rs(s),function fu(i){return ut.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Sd(i,s,a,2,l);const _=3==(3&c);if(!p)if(_){const T=i.preOrderCheckHooks;null!==T&&wa(s,T,null)}else{const T=i.preOrderHooks;null!==T&&mu(s,T,0,null),Fn(s,0)}if(function a_(i){for(let s=Au(i);null!==s;s=Su(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],p=c[3];0==(1024&c[2])&&Ns(p,1),c[2]|=1024}}}(s),function nE(i){for(let s=Au(i);null!==s;s=Su(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];ns(l)&&pf(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&B0(i,s),!p)if(_){const T=i.contentCheckHooks;null!==T&&wa(s,T)}else{const T=i.contentHooks;null!==T&&mu(s,T,1),Fn(s,1)}!function KT(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Fs(~c);else{const p=c,_=a[++l],E=a[++l];gu(_,p),E(2,s[p])}}}finally{Fs(-1)}}(i,s);const E=i.components;null!==E&&function j0(i,s){for(let a=0;a<s.length;a++)Db(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&xg(2,I,l),!p)if(_){const T=i.viewCheckHooks;null!==T&&wa(s,T)}else{const T=i.viewHooks;null!==T&&mu(s,T,2),Fn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Ns(s[3],-1))}finally{lo()}}function t_(i,s,a,l){const c=s[10],p=!hu(),_=Ms(s);try{p&&!_&&c.begin&&c.begin(),_&&ec(i,s,l),pf(i,s,a,l)}finally{p&&!_&&c.end&&c.end()}}function Sd(i,s,a,l,c){const p=_r(),_=2&l;try{Fs(-1),_&&s.length>20&&Ky(i,s,20,hu()),a(l,c)}finally{Fs(p)}}function Nu(i,s,a){!du()||(function JT(i,s,a,l){const c=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Ln(a,s),Nr(l,s);const _=a.initialInputs;for(let E=c;E<p;E++){const I=i.data[E],T=Br(I);T&&Dg(s,a,I);const S=wi(s,i,E,a);Nr(S,s),null!==_&&eE(0,E-c,S,I,0,_),T&&(yr(a.index,s)[8]=S)}}(i,s,a,mr(a,s)),128==(128&a.flags)&&function XT(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,E=function yl(){return ut.lFrame.currentDirectiveIndex}();try{Fs(_);for(let I=l;I<c;I++){const T=i.data[I],S=s[I];va(I),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&z0(T,S)}}finally{Fs(-1),va(E)}}(i,s,a))}function tc(i,s,a=mr){const l=s.localNames;if(null!==l){let c=s.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}function $0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=xd(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function xd(i,s,a,l,c,p,_,E,I,T){const S=20+l,P=S+c,V=function H0(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Dt);return a}(S,P),z="function"==typeof T?T():T;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:z,incompleteFirstPass:!1}}function wg(i,s,a,l){const c=iE(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&sE(i).push(l,c.length-1))}function n_(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function qi(i,s,a,l,c,p,_,E){const I=mr(s,a);let S,T=s.inputs;!E&&null!=T&&(S=T[l])?(xb(i,a,S,l,c),Ds(s)&&function r_(i,s){const a=yr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function q0(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,cn(p)?p.setProperty(I,l,c):Gr(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}function Cg(i,s,a,l){let c=!1;if(du()){const p=function W0(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];b0(a,_.selectors,!1)&&(c||(c=[]),Ls(Ln(a,s),i,_.type),Br(_)?(K0(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==p){c=!0,nc(a,i.data.length,p.length);for(let S=0;S<p.length;S++){const P=p[S];P.providersResolver&&P.providersResolver(P)}let E=!1,I=!1,T=Ru(i,s,p.length,null);for(let S=0;S<p.length;S++){const P=p[S];a.mergedAttrs=qr(a.mergedAttrs,P.hostAttrs),J0(i,a,s,T,P),Q0(T,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const V=P.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}!function G0(i,s){const l=s.directiveEnd,c=i.data,p=s.attrs,_=[];let E=null,I=null;for(let T=s.directiveStart;T<l;T++){const S=c[T],P=S.inputs,V=null===p||Na(s)?null:bb(P,p);_.push(V),E=n_(P,T,E),I=n_(S.outputs,T,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=I}(i,a)}_&&function Y0(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const p=a[s[c+1]];if(null==p)throw new Ne(-301,!1);l.push(s[c],p)}}}(a,l,_)}return a.mergedAttrs=qr(a.mergedAttrs,a.attrs),c}function Ib(i,s,a,l,c,p){const _=p.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function QT(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,c,_)}}function z0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function K0(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Q0(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Br(s)&&(a[""]=i)}}function nc(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function J0(i,s,a,l,c){i.data[l]=c;const p=c.factory||(c.factory=jr(c.type)),_=new $o(p,Br(c),null);i.blueprint[l]=_,a[l]=_,Ib(i,s,0,l,Ru(i,a,c.hostVars,Dt),c)}function Dg(i,s,a){const l=mr(s,i),c=$0(a),p=i[10],_=Ag(i,Xl(i,c,null,a.onPush?64:16,l,s,p,p.createRenderer(l,a),null,null));i[s.index]=_}function ra(i,s,a,l,c,p){const _=mr(i,s);!function X0(i,s,a,l,c,p,_){if(null==p)cn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?he(p):_(p,l||"",c);cn(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,p,i.value,a,l,c)}function eE(i,s,a,l,c,p){const _=p[s];if(null!==_){const E=l.setInput;for(let I=0;I<_.length;){const T=_[I++],S=_[I++],P=_[I++];null!==E?l.setInput(a,P,T,S):a[S]=P}}}function bb(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function tE(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Db(i,s){const a=yr(s,i);if(ns(a)){const l=a[1];80&a[2]?pf(l,a,l.template,a[8]):a[5]>0&&Tg(a)}}function Tg(i){for(let l=Au(i);null!==l;l=Su(l))for(let c=10;c<l.length;c++){const p=l[c];if(1024&p[2]){const _=p[1];pf(_,p,_.template,p[8])}else p[5]>0&&Tg(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=yr(a[l],i);ns(c)&&c[5]>0&&Tg(c)}}function Tb(i,s){const a=yr(s,i),l=a[1];(function Ou(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),ec(l,a,a[8])}function Ag(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function yf(i){for(;i;){i[2]|=64;const s=In(i);if(Th(i)&&!s)return i;i=s}return null}function Sg(i,s,a){const l=s[10];l.begin&&l.begin();try{pf(i,s,i.template,a)}catch(c){throw oE(s,c),c}finally{l.end&&l.end()}}function rE(i){!function _f(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Yh(a),c=l[1];t_(c,l,c.template,a)}}(i[8])}function xg(i,s,a){vl(0),s(i,a)}const u_=(()=>Promise.resolve(null))();function iE(i){return i[7]||(i[7]=[])}function sE(i){return i.cleanup||(i.cleanup=[])}function oE(i,s){const a=i[9],l=a?a.get(Ir,null):null;l&&l.handleError(s)}function xb(i,s,a,l,c){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],I=s[_],T=i.data[_];null!==T.setInput?T.setInput(I,c,l,E):I[E]=c}}function bo(i,s,a){const l=oo(s,i);!function wd(i,s,a){cn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function Mg(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?p=E:1==p?c=ue(c,E):2==p&&(l=ue(l,E+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Pa=new En("INJECTOR",-1);class uE{get(s,a=po){if(a===po){const l=new Error(`NullInjectorError: No provider for ${ce(s)}!`);throw l.name="NullInjectorError",l}return a}}const Md=new En("Set Injector scope."),vf={},Rg={};let c_;function lE(){return void 0===c_&&(c_=new uE),c_}function Ef(i,s=null,a=null,l){const c=d_(i,s,a,l);return c._resolveInjectorDefTypes(),c}function d_(i,s=null,a=null,l){return new Nb(i,a,s||lE(),l)}class Nb{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&ai(a,E=>this.processProvider(E,s,a)),ai([s],E=>this.processInjectorType(E,[],p)),this.records.set(Pa,ic(void 0,this));const _=this.records.get(Md);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:ce(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=po,l=st.Default){this.assertNotDestroyed();const c=Se(this),p=jn(void 0);try{if(!(l&st.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function gE(i){return"function"==typeof i||"object"==typeof i&&i instanceof En}(s)&&Lt(s);E=I&&this.injectableDefInScope(I)?ic(Ng(s),vf):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&st.Self?lE():this.parent).get(s,a=l&st.Optional&&a===po?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[wu]=_[wu]||[]).unshift(ce(s)),c)throw _;return function Qo(i,s,a,l){const c=i[wu];throw s[F]&&c.unshift(s[F]),i.message=function go(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=ce(s);if(Array.isArray(s))c=s.map(ce).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):ce(E)))}c=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(C,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[wu]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{jn(p),Se(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(ce(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processInjectorType(s,a,l){if(!(s=Q(s)))return!1;let c=Ar(s);const p=null==c&&s.ngModule||void 0,_=void 0===p?s:p,E=-1!==l.indexOf(_);if(void 0!==p&&(c=Ar(p)),null==c)return!1;if(null!=c.imports&&!E){let S;l.push(_);try{ai(c.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===S&&(S=[]),S.push(P))})}finally{}if(void 0!==S)for(let P=0;P<S.length;P++){const{ngModule:V,providers:z}=S[P];ai(z,me=>this.processProvider(me,V,z||ot))}}this.injectorDefTypes.add(_);const I=jr(_)||(()=>new _);this.records.set(_,ic(I,vf));const T=c.providers;if(null!=T&&!E){const S=s;ai(T,P=>this.processProvider(P,S,T))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,l){let c=wf(s=Q(s))?s:Q(s&&s.provide);const p=function cE(i,s,a){return hE(i)?ic(void 0,i.useValue):ic(dE(i),vf)}(s);if(wf(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=ic(void 0,vf,!0),_.factory=()=>Et(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,p)}hydrate(s,a){return a.value===vf&&(a.value=Rg,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Pb(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Q(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Ng(i){const s=Lt(i),a=null!==s?s.factory:jr(i);if(null!==a)return a;if(i instanceof En)throw new Ne(204,!1);if(i instanceof Function)return function Ob(i){const s=i.length;if(s>0)throw function Ci(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Ne(204,!1);const a=function Xr(i){const s=i&&(i[Oi]||i[Ki]);if(s){const a=function Es(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ne(204,!1)}function dE(i,s,a){let l;if(wf(i)){const c=Q(i);return jr(c)||Ng(c)}if(hE(i))l=()=>Q(i.useValue);else if(function tA(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Et(i.deps||[]));else if(function fE(i){return!(!i||!i.useExisting)}(i))l=()=>ze(Q(i.useExisting));else{const c=Q(i&&(i.useClass||i.provide));if(!function pE(i){return!!i.deps}(i))return jr(c)||Ng(c);l=()=>new c(...Et(i.deps))}return l}function ic(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function hE(i){return null!==i&&"object"==typeof i&&Z in i}function wf(i){return"function"==typeof i}let Co=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return Ef({name:""},l,a,"");{const p=null!==(c=a.name)&&void 0!==c?c:"";return Ef({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=po,i.NULL=new uE,i.\u0275prov=Xt({token:i,providedIn:"any",factory:()=>ze(Pa)}),i.__NG_ELEMENT_ID__=-1,i})();function Vb(i,s){rs(Yh(i)[1],hn())}function br(i){let s=function If(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Br(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Ne(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=f_(i.inputs),_.declaredInputs=f_(i.declaredInputs),_.outputs=f_(i.outputs);const E=c.hostBindings;E&&wE(i,E);const I=c.viewQuery,T=c.contentQueries;if(I&&Ub(i,I),T&&EE(i,T),re(i.inputs,c.inputs),re(i.declaredInputs,c.declaredInputs),re(i.outputs,c.outputs),Br(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const p=c.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(i),E===br&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Fu(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=qr(c.hostAttrs,a=qr(a,c.hostAttrs))}}(l)}function f_(i){return i===ir?{}:i===ot?[]:i}function Ub(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function EE(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,p)=>{s(l,c,p),a(l,c,p)}:s}function wE(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let oc=null;function ac(){if(!oc){const i=Ft.Symbol;if(i&&i.iterator)oc=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(oc=l)}}}return oc}function uc(i){return!!Vg(i)&&(Array.isArray(i)||!(i instanceof Map)&&ac()in i)}function Vg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function zr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Lu(i,s,a,l){const c=zr(i,s,a);return zr(i,s+1,l)||c}function g_(i,s,a,l){const c=we();return zr(c,Ps(),s)&&(Rt(),ra(_n(),c,i,s,a,l)),g_}function Vu(i,s,a,l,c,p){const E=Lu(i,ii(),a,c);return vi(2),E?s+he(a)+l+he(c)+p:Dt}function cc(i,s,a,l,c,p,_,E){const T=function Nd(i,s,a,l,c){const p=Lu(i,s,a,l);return zr(i,s+2,c)||p}(i,ii(),a,c,_);return vi(3),T?s+he(a)+l+he(c)+p+he(_)+E:Dt}function kd(i,s,a,l,c,p,_,E){const I=we(),T=Rt(),S=i+20,P=T.firstCreatePass?function jb(i,s,a,l,c,p,_,E,I){const T=s.consts,S=Ad(s,i,4,_||null,$r(T,E));Cg(s,a,S,$r(T,I)),rs(s,S);const P=S.tViews=xd(2,S,l,c,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,S),P.queries=s.queries.embeddedTView(S)),S}(S,T,I,s,a,l,c,p,_):T.data[S];Hr(P,!1);const V=I[11].createComment("");ug(T,I,V,P),Nr(V,I),Ag(I,I[S]=tE(V,I,V,P)),Xa(P)&&Nu(T,I,P),null!=_&&tc(I,P,E)}function Df(i,s=st.Default){const a=we();return null===a?ze(i,s):Vs(hn(),a,Q(i),s)}function BE(){throw new Error("invalid")}function $u(i,s,a){const l=we();return zr(l,Ps(),s)&&qi(Rt(),_n(),l,i,s,l[11],a,!1),$u}function D_(i,s,a,l,c){const _=c?"class":"style";xb(i,a,s.inputs[_],_,l)}function ia(i,s,a,l){const c=we(),p=Rt(),_=20+i,E=c[11],I=c[_]=Id(E,s,function oy(){return ut.lFrame.currentNamespace}()),T=p.firstCreatePass?function Wb(i,s,a,l,c,p,_){const E=s.consts,T=Ad(s,i,2,c,$r(E,p));return Cg(s,a,T,$r(E,_)),null!==T.attrs&&Mg(T,T.attrs,!1),null!==T.mergedAttrs&&Mg(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(_,p,c,0,s,a,l):p.data[_];Hr(T,!0);const S=T.mergedAttrs;null!==S&&pt(E,I,S);const P=T.classes;null!==P&&Zy(E,I,P);const V=T.styles;return null!==V&&wo(E,I,V),64!=(64&T.flags)&&ug(p,c,I,T),0===function _a(){return ut.lFrame.elementDepthCount}()&&Nr(I,c),function lu(){ut.lFrame.elementDepthCount++}(),Xa(T)&&(Nu(p,c,T),function gf(i,s,a){if(Lc(s)){const c=s.directiveEnd;for(let p=s.directiveStart;p<c;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}(p,T,c)),null!==l&&tc(c,T),ia}function Tf(){let i=hn();fl()?function pl(){ut.lFrame.isParent=!1}():(i=i.parent,Hr(i,!1));const s=i;!function cu(){ut.lFrame.elementDepthCount--}();const a=Rt();return a.firstCreatePass&&(rs(a,i),Lc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Mh(i){return 0!=(16&i.flags)}(s)&&D_(a,s,we(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function jp(i){return 0!=(32&i.flags)}(s)&&D_(a,s,we(),s.stylesWithoutHost,!1),Tf}function Fd(i,s,a,l){return ia(i,s,a,l),Tf(),Fd}function Ld(){return we()}function Vd(i){return!!i&&"function"==typeof i.then}function A_(i){return!!i&&"function"==typeof i.subscribe}const Jg=A_;function Xg(i,s,a,l){const c=we(),p=Rt(),_=hn();return function em(i,s,a,l,c,p,_,E){const I=Xa(l),S=i.firstCreatePass&&sE(i),P=s[8],V=iE(s);let z=!0;if(3&l.type||E){const je=mr(l,s),Xe=E?E(je):je,Ie=V.length,lt=E?kt=>E(nn(kt[l.index])):l.index;if(cn(a)){let kt=null;if(!E&&I&&(kt=function Sf(i,s,a,l){const c=i.cleanup;if(null!=c)for(let p=0;p<c.length-1;p+=2){const _=c[p];if(_===a&&c[p+1]===l){const E=s[7],I=c[p+2];return E.length>I?E[I]:null}"string"==typeof _&&(p+=2)}return null}(i,s,c,l.index)),null!==kt)(kt.__ngLastListenerFn__||kt).__ngNextListenerFn__=p,kt.__ngLastListenerFn__=p,z=!1;else{p=xf(l,s,P,p,!1);const Yt=a.listen(Xe,c,p);V.push(p,Yt),S&&S.push(c,lt,Ie,Ie+1)}}else p=xf(l,s,P,p,!0),Xe.addEventListener(c,p,_),V.push(p),S&&S.push(c,lt,Ie,_)}else p=xf(l,s,P,p,!1);const me=l.outputs;let Pe;if(z&&null!==me&&(Pe=me[c])){const je=Pe.length;if(je)for(let Xe=0;Xe<je;Xe+=2){const Ni=s[Pe[Xe]][Pe[Xe+1]].subscribe(p),tl=V.length;V.push(p,Ni),S&&S.push(c,l.index,tl,-(tl+1))}}}(p,c,c[11],_,i,s,!!a,l),Xg}function tm(i,s,a,l){try{return!1!==a(l)}catch(c){return oE(i,c),!1}}function xf(i,s,a,l,c){return function p(_){if(_===Function)return l;const E=2&i.flags?yr(i.index,s):s;0==(32&s[2])&&yf(E);let I=tm(s,0,l,_),T=p.__ngNextListenerFn__;for(;T;)I=tm(s,0,T,_)&&I,T=T.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function Mf(i=1){return function ks(i){return(ut.lFrame.contextLView=function wl(i,s){for(;i>0;)s=s[15],i--;return s}(i,ut.lFrame.contextLView))[8]}(i)}function Nf(i,s,a,l,c,p,_){const E=we(),I=Vu(E,s,a,l,c,p);return I!==Dt&&qi(Rt(),_n(),E,i,I,E[11],_,!1),Nf}function HE(i,s,a,l,c){const p=i[a+1],_=null===s;let E=l?qs(p):Io(p),I=!1;for(;0!==E&&(!1===I||_);){const S=i[E+1];P_(i[E],s)&&(I=!0,i[E+1]=l?fg(S):cg(S)),E=l?qs(S):Io(S)}I&&(i[a+1]=l?cg(p):fg(p))}function P_(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&$s(i,s)>=0}function mc(i,s){return function So(i,s,a,l){const c=we(),p=Rt(),_=vi(2);p.firstUpdatePass&&function La(i,s,a,l){const c=i.data;if(null===c[a+1]){const p=c[_r()],_=function $d(i,s){return s>=i.expandoStartIndex}(i,a);(function L_(i,s){return 0!=(i.flags&(s?16:32))})(p,l)&&null===s&&!_&&(s=!1),s=function KE(i,s,a,l){const c=function Ea(i){const s=ut.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=kf(a=k_(null,i,s,a,l),s.attrs,l),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=k_(c,i,s,a,l),null===p){let I=function YE(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Io(l))return i[qs(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=k_(null,i,s,I[1],l),I=kf(I,s.attrs,l),function QE(i,s,a,l){i[qs(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else p=function Hd(i,s,a){let l;const c=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<c;p++)l=kf(l,i[p].hostAttrs,a);return kf(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(c,p,s,l),function fc(i,s,a,l,c,p){let _=p?s.classBindings:s.styleBindings,E=qs(_),I=Io(_);i[l]=a;let S,T=!1;if(Array.isArray(a)){const P=a;S=P[1],(null===S||$s(P,S)>0)&&(T=!0)}else S=a;if(c)if(0!==I){const V=qs(i[E+1]);i[l+1]=cf(V,E),0!==V&&(i[V+1]=dg(i[V+1],l)),i[E+1]=function R0(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=cf(E,0),0!==E&&(i[E+1]=dg(i[E+1],l)),E=l;else i[l+1]=cf(I,0),0===E?E=l:i[I+1]=dg(i[I+1],l),I=l;T&&(i[l+1]=cg(i[l+1])),HE(i,S,l,!0),HE(i,S,l,!1),function O_(i,s,a,l,c){const p=c?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&$s(p,s)>=0&&(a[l+1]=fg(a[l+1]))}(s,S,i,l,p),_=cf(E,I),p?s.classBindings=_:s.styleBindings=_}(c,p,s,a,_,l)}}(p,i,_,l),s!==Dt&&zr(c,_,s)&&function F_(i,s,a,l,c,p,_,E){if(!(3&s.type))return;const I=i.data,T=I[E+1];Gd(function hg(i){return 1==(1&i)}(T)?am(I,s,a,c,Io(T),_):void 0)||(Gd(p)||function M0(i){return 2==(2&i)}(T)&&(p=am(I,null,a,c,E,_)),function Yl(i,s,a,l,c){const p=cn(i);if(s)c?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:ie.DashCase;if(null==c)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=ie.Important),p?i.setStyle(a,l,c,_):a.style.setProperty(l,c,E?"important":"")}}}(l,_,oo(_r(),a),c,p))}(p,p.data[_r()],c,c[11],i,c[_+1]=function tw(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ce(Hs(i)))),i}(s,a),l,_)}(i,s,null,!0),mc}function k_(i,s,a,l,c){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=s[E],l=kf(l,p.hostAttrs,c),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function kf(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Hn(i,_,!!a||s[++p]))}return void 0===i?null:i}function am(i,s,a,l,c,p){const _=null===s;let E;for(;c>0;){const I=i[c],T=Array.isArray(I),S=T?I[1]:I,P=null===S;let V=a[c+1];V===Dt&&(V=P?ot:void 0);let z=P?Pl(V,l):S===l?V:void 0;if(T&&!Gd(z)&&(z=Pl(I,l)),Gd(z)&&(E=z,_))return E;const me=i[c+1];c=_?qs(me):Io(me)}if(null!==s){let I=p?s.residualClasses:s.residualStyles;null!=I&&(E=Pl(I,l))}return E}function Gd(i){return void 0!==i}function um(i,s=""){const a=we(),l=Rt(),c=i+20,p=l.firstCreatePass?Ad(l,c,1,s,null):l.data[c],_=a[c]=function Ed(i,s){return cn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);ug(l,a,_,p),Hr(p,!1)}function V_(i){return lm("",i,""),V_}function lm(i,s,a){const l=we(),c=function lc(i,s,a,l){return zr(i,Ps(),a)?s+he(a)+l:Dt}(l,i,s,a);return c!==Dt&&bo(l,_r(),c),lm}function U_(i,s,a,l,c){const p=we(),_=Vu(p,i,s,a,l,c);return _!==Dt&&bo(p,_r(),_),U_}function qd(i,s,a,l,c,p,_){const E=we(),I=cc(E,i,s,a,l,c,p,_);return I!==Dt&&bo(E,_r(),I),qd}const Ua=void 0;var gm=["en",[["a","p"],["AM","PM"],Ua],[["AM","PM"],Ua,Ua],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ua,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ua,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ua,"{1} 'at' {0}",Ua],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function cw(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let yc={};function Ba(i){const s=function fs(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=z_(s);if(a)return a;const l=s.split("-")[0];if(a=z_(l),a)return a;if("en"===l)return gm;throw new Error(`Missing locale data for the locale "${i}".`)}function Z_(i){return Ba(i)[ct.PluralCase]}function z_(i){return i in yc||(yc[i]=Ft.ng&&Ft.ng.common&&Ft.ng.common.locales&&Ft.ng.common.locales[i]),yc[i]}var ct=(()=>((ct=ct||{})[ct.LocaleId=0]="LocaleId",ct[ct.DayPeriodsFormat=1]="DayPeriodsFormat",ct[ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",ct[ct.DaysFormat=3]="DaysFormat",ct[ct.DaysStandalone=4]="DaysStandalone",ct[ct.MonthsFormat=5]="MonthsFormat",ct[ct.MonthsStandalone=6]="MonthsStandalone",ct[ct.Eras=7]="Eras",ct[ct.FirstDayOfWeek=8]="FirstDayOfWeek",ct[ct.WeekendRange=9]="WeekendRange",ct[ct.DateFormat=10]="DateFormat",ct[ct.TimeFormat=11]="TimeFormat",ct[ct.DateTimeFormat=12]="DateTimeFormat",ct[ct.NumberSymbols=13]="NumberSymbols",ct[ct.NumberFormats=14]="NumberFormats",ct[ct.CurrencyCode=15]="CurrencyCode",ct[ct.CurrencySymbol=16]="CurrencySymbol",ct[ct.CurrencyName=17]="CurrencyName",ct[ct.Currencies=18]="Currencies",ct[ct.Directionality=19]="Directionality",ct[ct.PluralCase=20]="PluralCase",ct[ct.ExtraData=21]="ExtraData",ct))();const ja="en-US";let W_=ja;function nh(i,s,a,l,c){if(i=Q(i),Array.isArray(i))for(let p=0;p<i.length;p++)nh(i[p],s,a,l,c);else{const p=Rt(),_=we();let E=wf(i)?i:Q(i.provide),I=dE(i);const T=hn(),S=1048575&T.providerIndexes,P=T.directiveStart,V=T.providerIndexes>>20;if(wf(i)||!i.multi){const z=new $o(I,c,Df),me=rh(E,s,c?S:S+V,P);-1===me?(Ls(Ln(T,_),p,E),Wf(p,i,s.length),s.push(E),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(z),_.push(z)):(a[me]=z,_[me]=z)}else{const z=rh(E,s,S+V,P),me=rh(E,s,S,S+V),Pe=z>=0&&a[z],je=me>=0&&a[me];if(c&&!je||!c&&!Pe){Ls(Ln(T,_),p,E);const Xe=function qa(i,s,a,l,c){const p=new $o(i,a,Df);return p.multi=[],p.index=s,p.componentProviders=0,Ec(p,c,l&&!a),p}(c?Nw:Kf,a.length,c,l,I);!c&&je&&(a[me].providerFactory=Xe),Wf(p,i,s.length,0),s.push(E),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(Xe),_.push(Xe)}else Wf(p,i,z>-1?z:me,Ec(a[c?me:z],I,!c&&l));!c&&l&&je&&a[me].componentProviders++}}}function Wf(i,s,a,l){const c=wf(s),p=function nA(i){return!!i.useClass}(s);if(c||p){const I=(p?Q(s.useClass):s).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=T.indexOf(a);-1===S?T.push(a,[l,I]):T[S+1].push(l,I)}else T.push(a,I)}}}function Ec(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function rh(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function Kf(i,s,a,l){return sv(this.multi,[])}function Nw(i,s,a,l){const c=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=wi(a,a[1],this.providerFactory.index,l);p=E.slice(0,_),sv(c,p);for(let I=_;I<E.length;I++)p.push(E[I])}else p=[],sv(c,p);return p}function sv(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Ow(i,s=[]){return a=>{a.providersResolver=(l,c)=>function Cn(i,s,a){const l=Rt();if(l.firstCreatePass){const c=Br(i);nh(a,l.data,l.blueprint,c,!0),nh(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class ov{}class vm{resolveComponentFactory(s){throw function wc(i){const s=Error(`No component factory found for ${ce(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Ic=(()=>{class i{}return i.NULL=new vm,i})();function Yr(){return ih(hn(),we())}function ih(i,s){return new Yf(mr(i,s))}let Yf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Yr,i})();function mC(i){return i instanceof Yf?i.nativeElement:i}class kw{}let _C=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function EC(){const i=we(),a=yr(hn().index,i);return function vC(i){return i[11]}(yi(a)?a:i)}(),i})(),Zu=(()=>{class i{}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:()=>null}),i})();class bc{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Fw=new bc("13.3.2"),Em={};function Qf(i,s,a,l,c=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(nn(p)),ni(p))for(let E=10;E<p.length;E++){const I=p[E],T=I[1].firstChild;null!==T&&Qf(I[1],I,T,l)}const _=a.type;if(8&_)Qf(i,s,a.child,l);else if(32&_){const E=Ke(a,s);let I;for(;I=E();)l.push(I)}else if(16&_){const E=_0(s,a);if(Array.isArray(E))l.push(...E);else{const I=In(s[16]);Qf(I[1],I,E,l,!0)}}a=c?a.projectionNext:a.next}return l}class ms{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Qf(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ni(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Ly(s,l),us(a,l))}this._attachedToViewContainer=!1}Vy(this._lView[1],this._lView)}onDestroy(s){wg(this._lView[1],this._lView,null,s)}markForCheck(){yf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Sg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function rc(i,s,a){Os(!0);try{Sg(i,s,a)}finally{Os(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function og(i,s){lg(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Ne(902,"");this._appRef=s}}class Lw extends ms{constructor(s){super(s),this._view=s}detectChanges(){rE(this._view)}checkNoChanges(){!function Sb(i){Os(!0);try{rE(i)}finally{Os(!1)}}(this._view)}get context(){return null}}class Cc extends Ic{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Ut(s);return new Xf(a,this.ngModule)}}function Jf(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Xf extends ov{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function S0(i){return i.map(A0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Jf(this.componentDef.inputs)}get outputs(){return Jf(this.componentDef.outputs)}create(s,a,l,c){const p=(c=c||this.ngModule)?function av(i,s){return{get:(a,l,c)=>{const p=i.get(a,Em,c);return p!==Em||l===Em?p:s.get(a,l,c)}}}(s,c.injector):s,_=p.get(kw,Uo),E=p.get(Zu,null),I=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",S=l?function mf(i,s,a){if(cn(i))return i.selectRootElement(s,a===Vt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):Id(_.createRenderer(null,this.componentDef),T,function wm(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(T)),P=this.componentDef.onPush?576:528,V=function vE(i,s){return{components:[],scheduler:i||Ny,clean:u_,playerHandler:s||null,flags:0}}(),z=xd(0,null,null,1,0,null,null,null,null,null),me=Xl(null,z,V,P,null,null,_,I,E,p);let Pe,je;ao(me);try{const Xe=function Lg(i,s,a,l,c,p){const _=a[1];a[20]=i;const I=Ad(_,20,2,"#host",null),T=I.mergedAttrs=s.hostAttrs;null!==T&&(Mg(I,T,!0),null!==i&&(pt(c,i,T),null!==I.classes&&Zy(c,i,I.classes),null!==I.styles&&wo(c,i,I.styles)));const S=l.createRenderer(i,s),P=Xl(a,$0(s),null,s.onPush?64:16,a[20],I,l,S,p||null,null);return _.firstCreatePass&&(Ls(Ln(I,a),_,s.type),K0(_,I),nc(I,a.length,1)),Ag(a,P),a[20]=P}(S,this.componentDef,me,_,I);if(S)if(l)pt(I,S,["ng-version",Fw.full]);else{const{attrs:Ie,classes:lt}=function x0(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===c?""!==p&&s.push(p,i[++l]):8===c&&a.push(p);else{if(!pn(c))break;c=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&pt(I,S,Ie),lt&&lt.length>0&&Zy(I,S,lt.join(" "))}if(je=ya(z,20),void 0!==a){const Ie=je.projection=[];for(let lt=0;lt<this.ngContentSelectors.length;lt++){const kt=a[lt];Ie.push(null!=kt?Array.from(kt):null)}}Pe=function _E(i,s,a,l,c){const p=a[1],_=function o_(i,s,a){const l=hn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),J0(i,l,s,Ru(i,s,1,null),a));const c=wi(s,i,l.directiveStart,l);Nr(c,s);const p=mr(l,s);return p&&Nr(p,s),c}(p,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=hn();s.contentQueries(1,_,I.directiveStart)}const E=hn();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Fs(E.index),Ib(a[1],E,0,E.directiveStart,E.directiveEnd,s),z0(s,_)),_}(Xe,this.componentDef,me,V,[Vb]),ec(z,me,null)}finally{lo()}return new Ys(this.componentType,Pe,ih(je,me),me,je)}}class Ys extends class gC{}{constructor(s,a,l,c,p){super(),this.location=l,this._rootLView=c,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new Lw(c),this.componentType=s}get injector(){return new Ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class ua{}class lv{}const zu=new Map;class hv extends ua{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Cc(this);const l=an(s);this._bootstrapComponents=g(l.bootstrap),this._r3Injector=d_(s,a,[{provide:ua,useValue:this},{provide:Ic,useValue:this.componentFactoryResolver}],ce(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Co.THROW_IF_NOT_FOUND,l=st.Default){return s===Co||s===ua||s===Pa?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class sh extends lv{constructor(s){super(),this.moduleType=s,null!==an(s)&&function Bw(i){const s=new Set;!function a(l){const c=an(l,!0),p=c.id;null!==p&&(function cv(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ce(s)} vs ${ce(s.name)}`)}(p,zu.get(p),l),zu.set(p,l));const _=g(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new hv(this.moduleType,s)}}function bm(i){return s=>{setTimeout(i,void 0,s)}}const Ro=class Kw extends d.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,p,_;let E=s,I=a||(()=>null),T=l;if(s&&"object"==typeof s){const P=s;E=null===(c=P.next)||void 0===c?void 0:c.bind(P),I=null===(p=P.error)||void 0===p?void 0:p.bind(P),T=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(I=bm(I),E&&(E=bm(E)),T&&(T=bm(T)));const S=super.subscribe({next:E,error:I,complete:T});return s instanceof K.w0&&s.add(S),S}};function rp(){return this._results[ac()]()}class ip{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ac(),l=ip.prototype;l[a]||(l[a]=rp)}get changes(){return this._changes||(this._changes=new Ro)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=Er(s);(this._changesDetected=!function xl(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],p=s[l];if(a&&(c=a(c),p=a(p)),p!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let sp=(()=>{class i{}return i.__NG_ELEMENT_ID__=Yw,i})();const hr=sp,Kt=class extends hr{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=Xl(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),ec(a,l,s),new ms(l)}};function Yw(){return op(hn(),we())}function op(i,s){return 4&i.type?new Kt(s,i,ih(i,s)):null}let No=(()=>{class i{}return i.__NG_ELEMENT_ID__=er,i})();function er(){return Ac(hn(),we())}const Cm=No,Fr=class extends Cm{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return ih(this._hostTNode,this._hostLView)}get injector(){return new Ii(this._hostTNode,this._hostLView)}get parentInjector(){const s=oi(this._hostTNode,this._hostLView);if(ed(s)){const a=Ei(s,this._hostLView),l=ln(s);return new Ii(a[1].data[l+8],a)}return new Ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=gn(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,p){const _=s&&!function Ko(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const P=a||{};E=P.index,l=P.injector,c=P.projectableNodes,p=P.ngModuleRef}const I=_?s:new Xf(Ut(s)),T=l||this.parentInjector;if(!p&&null==I.ngModule){const V=(_?T:this.parentInjector).get(ua,null);V&&(p=V)}const S=I.create(T,c,void 0,p);return this.insert(S.hostView,E),S}insert(s,a){const l=s._lView,c=l[1];if(function au(i){return ni(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const P=l[3],V=new Fr(P,P[6],P[3]);V.detach(V.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function Fy(i,s,a,l){const c=10+l,p=a.length;l>0&&(a[c-1][4]=s),l<p-10?(s[4]=a[c],Ml(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function bd(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,l,_,p);const E=Hy(p,_),I=l[11],T=uf(I,_[7]);return null!==T&&function af(i,s,a,l,c,p){l[0]=c,l[6]=s,lg(i,l,a,1,c,p)}(c,_[6],I,l,T,E),s.attachToViewContainerRef(),Ml(Dm(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=gn(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Ly(this._lContainer,a);l&&(us(Dm(this._lContainer),a),Vy(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Ly(this._lContainer,a);return l&&null!=us(Dm(this._lContainer),a)?new ms(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function gn(i){return i[8]}function Dm(i){return i[8]||(i[8]=[])}function Ac(i,s){let a;const l=s[i.index];if(ni(l))a=l;else{let c;if(8&i.type)c=nn(l);else{const p=s[11];c=p.createComment("");const _=mr(i,s);ds(p,uf(p,_),c,function pb(i,s){return cn(i)?i.nextSibling(s):s.nextSibling}(p,_),!1)}s[i.index]=a=tE(l,s,c,i),Ag(s,a)}return new Fr(a,i,s)}class ap{constructor(s){this.queryList=s,this.matches=null}clone(){return new ap(this.queryList)}setDirty(){this.queryList.setDirty()}}class Sc{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);c.push(this.queries[_.indexInDeclarationView].clone())}return new Sc(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==ch(s,a).matches&&this.queries[a].setDirty()}}class Qw{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class pv{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(s,c);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new pv(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class rn{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new rn(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const p=l[c];this.matchTNodeWithReadOption(s,a,AC(a,p)),this.matchTNodeWithReadOption(s,a,qo(a,s,p,!1,!1))}else l===sp?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,qo(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Yf||c===No||c===sp&&4&a.type)this.addMatch(a.index,-2);else{const p=qo(a,s,c,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function AC(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function up(i,s,a,l){return-1===a?function Tm(i,s){return 11&i.type?ih(i,s):4&i.type?op(i,s):null}(s,i):-2===a?function lp(i,s,a){return a===Yf?ih(s,i):a===sp?op(s,i):a===No?Ac(s,i):void 0}(i,s,l):wi(i,i[1],a,s)}function cp(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const p=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const T=_[I];E.push(T<0?null:up(s,p[T],_[I+1],a.metadata.read))}c.matches=E}return c.matches}function Am(i,s,a,l){const c=i.queries.getByIndex(a),p=c.matches;if(null!==p){const _=cp(i,s,c,a);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)l.push(_[E/2]);else{const T=p[E+1],S=s[-I];for(let P=10;P<S.length;P++){const V=S[P];V[17]===V[3]&&Am(V[1],V,T,l)}if(null!==S[9]){const P=S[9];for(let V=0;V<P.length;V++){const z=P[V];Am(z[1],z,T,l)}}}}}return l}function gv(i){const s=we(),a=Rt(),l=_l();vl(l+1);const c=ch(a,l);if(i.dirty&&Ms(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const p=c.crossesNgTemplate?Am(a,s,l,[]):cp(a,s,c,l);i.reset(p,mC),i.notifyOnChanges()}return!0}return!1}function Xw(i,s,a,l){const c=Rt();if(c.firstCreatePass){const p=hn();(function nI(i,s,a){null===i.queries&&(i.queries=new pv),i.queries.track(new rn(s,a))})(c,new Qw(s,a,l),p.index),function SC(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function tI(i,s,a){const l=new ip(4==(4&a));wg(i,s,l,l.destroy),null===s[19]&&(s[19]=new Sc),s[19].queries.push(new ap(l))}(c,we(),a)}function mv(){return function eI(i,s){return i[19].queries[s].queryList}(we(),_l())}function ch(i,s){return i.queries.getByIndex(s)}function fp(...i){}const Tv=new En("Application Initializer");let Rm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=fp,this.reject=fp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const p=this.appInits[c]();if(Vd(p))a.push(p);else if(Jg(p)){const _=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(ze(Tv,8))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const de=new En("AppId",{providedIn:"root",factory:function pp(){return`${Av()}${Av()}${Av()}`}});function Av(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fh=new En("Platform Initializer"),Yu=new En("Platform ID"),yI=new En("appBootstrapListener");let Sv=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();const Nm=new En("LocaleId",{providedIn:"root",factory:()=>At(Nm,st.Optional|st.SkipSelf)||function xv(){return"undefined"!=typeof $localize&&$localize.locale||ja}()}),Lr=new En("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Qu{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let wI=(()=>{class i{compileModuleSync(a){return new sh(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=g(an(a).declarations).reduce((_,E)=>{const I=Ut(E);return I&&_.push(new Xf(I)),_},[]);return new Qu(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Om=(()=>Promise.resolve(0))();function Za(i){"undefined"==typeof Zone?Om.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class pi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ro(!1),this.onMicrotaskEmpty=new Ro(!1),this.onStable=new Ro(!1),this.onError=new Ro(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function xc(){let i=Ft.requestAnimationFrame,s=Ft.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Rv(i){const s=()=>{!function Mv(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ft,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,km(i),i.isCheckStableRunning=!0,Pm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),km(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,p,_,E)=>{try{return II(i),a.invokeTask(c,p,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),Nv(i)}},onInvoke:(a,l,c,p,_,E,I)=>{try{return II(i),a.invoke(c,p,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),Nv(i)}},onHasTask:(a,l,c,p)=>{a.hasTask(c,p),l===c&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,km(i),Pm(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,c,p)=>(a.handleError(c,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(pi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+c,s,gp,fp,fp);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const gp={};function Pm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function km(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function II(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Nv(i){i._nesting--,Pm(i)}class bI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ro,this.onMicrotaskEmpty=new Ro,this.onStable=new Ro,this.onError=new Ro}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let Fm=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pi.assertNotInAngularZone(),Za(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Za(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(ze(pi))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})(),gh=(()=>{class i{constructor(){this._applications=new Map,Lm.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Lm.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();class mh{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function BC(i){Lm=i}let Oo,Lm=new mh;const za=new En("AllowMultipleToken");class Mc{constructor(s,a){this.name=s,this.token=a}}function DI(i,s,a=[]){const l=`Platform: ${s}`,c=new En(l);return(p=[])=>{let _=mp();if(!_||_.injector.get(za,!1))if(i)i(a.concat(p).concat({provide:c,useValue:!0}));else{const E=a.concat(p).concat({provide:c,useValue:!0},{provide:Md,useValue:"platform"});!function CI(i){if(Oo&&!Oo.destroyed&&!Oo.injector.get(za,!1))throw new Ne(400,"");Oo=i.get(AI);const s=i.get(fh,null);s&&s.forEach(a=>a())}(Co.create({providers:E,name:l}))}return function $C(i){const s=mp();if(!s)throw new Ne(401,"");return s}()}}function mp(){return Oo&&!Oo.destroyed?Oo:null}let AI=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function SI(i,s){let a;return a="noop"===i?new bI:("zone.js"===i?void 0:i)||new pi({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:pi,useValue:E}];return E.run(()=>{const T=Co.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(T),P=S.injector.get(Ir,null);if(!P)throw new Ne(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:z=>{P.handleError(z)}});S.onDestroy(()=>{Um(this._modules,S),V.unsubscribe()})}),function yp(i,s,a){try{const l=a();return Vd(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(P,E,()=>{const V=S.injector.get(Rm);return V.runInitializers(),V.donePromise.then(()=>(function uC(i){it(i,"Expected localeId to be defined"),"string"==typeof i&&(W_=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Nm,ja)||ja),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=_p({},l);return function jC(i,s,a){const l=new sh(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,c))}_moduleDoBootstrap(a){const l=a.injector.get(yh);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Ne(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(ze(Co))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();function _p(i,s){return Array.isArray(s)?s.reduce(_p,i):Object.assign(Object.assign({},i),s)}let yh=(()=>{class i{constructor(a,l,c,p,_){this._zone=a,this._injector=l,this._exceptionHandler=c,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new O.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),I=new O.y(T=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{pi.assertNotInAngularZone(),Za(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{pi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{S.unsubscribe(),P.unsubscribe()}});this.isStable=(0,oe.T)(E,I.pipe((0,J.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ne(405,"");let c;c=a instanceof ov?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const p=function Vm(i){return i.isBoundToModule}(c)?void 0:this._injector.get(ua),E=c.create(Co.NULL,[],l||c.selector,p),I=E.location.nativeElement,T=E.injector.get(Fm,null),S=T&&E.injector.get(gh);return T&&S&&S.registerApplication(I,T),E.onDestroy(()=>{this.detachView(E.hostView),Um(this.components,E),S&&S.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ne(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Um(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(yI,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(ze(pi),ze(Co),ze(Ir),ze(Ic),ze(Rm))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Um(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let vp=!0,Bm=!1;function MI(){return Bm=!0,vp}function Ju(){if(Bm)throw new Error("Cannot enable prod mode after platform setup.");vp=!1}let GC=(()=>{class i{}return i.__NG_ELEMENT_ID__=_h,i})();function _h(i){return function RI(i,s,a){if(Ds(i)&&!a){const l=yr(i.index,s);return new ms(l,l)}return 47&i.type?new ms(s[16],s):null}(hn(),we(),16==(16&i))}class Ip{constructor(){}supports(s){return uc(s)}create(s){return new KC(s)}}const Pv=(i,s)=>s;class KC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Pv}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<Fv(l,c,p)?a:l,E=Fv(_,c,p),I=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{p||(p=[]);const T=E-c,S=I-c;if(T!=S){for(let V=0;V<T;V++){const z=V<p.length?p[V]:p[V]=0,me=z+V;S<=me&&me<T&&(p[V]=z+1)}p[_.previousIndex]=S-T}}E!==I&&s(_,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!uc(s))throw new Ne(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,p,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)p=s[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),l=!0),a=a._next}else c=0,function bE(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[ac()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,c)):s=this._addAfter(new kv(a,l),p,c),s}_verifyReinsertion(s,a,l,c){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,p=s._nextRemoved;return null===c?this._removalsHead=p:c._nextRemoved=p,null===p?this._removalsTail=c:p._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new LI),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new LI),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class kv{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FI{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class LI{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new FI,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Fv(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class Lv{constructor(){}supports(s){return s instanceof Map||Vg(s)}create(){return new Vv}}class Vv{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Vg(s)))throw new Ne(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const p=c._prev,_=c._next;return p&&(p._next=_),_&&(_._prev=p),c._next=null,c._prev=null,c}const l=new YC(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class YC{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Uv(){return new Bv([new Ip])}let Bv=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Uv()),deps:[[i,new mo,new li]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Ne(901,"")}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:Uv}),i})();function VI(){return new el([new Lv])}let el=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||VI()),deps:[[i,new mo,new li]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Ne(901,"")}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:VI}),i})();const UI=DI(null,"core",[{provide:Yu,useValue:"unknown"},{provide:AI,deps:[Co]},{provide:gh,deps:[]},{provide:Sv,deps:[]}]);let eD=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(ze(yh))},i.\u0275mod=Y({type:i}),i.\u0275inj=zt({}),i})()},3942:(rt,De,k)=>{k.d(De,{Z:()=>Ne});var d=k(2090),K=k(4859),O=k(9681),oe=k(1877);class J{constructor(he,Ee){this._delegate=he,this.firebase=Ee,(0,O._addComponent)(he,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(he,Ee=O._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const qe=this._delegate.container.getProvider(he);return!qe.isInitialized()&&"EXPLICIT"===(null===(Ye=qe.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&qe.initialize(),qe.getImmediate({identifier:Ee})}_removeServiceInstance(he,Ee=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(Ee)}_addComponent(he){(0,O._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,O._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ue(){const ke=function ce(ke){const he={},Ee={__esModule:!0,initializeApp:function be(Be,ee={}){const q=O.initializeApp(Be,ee);if((0,d.r3)(he,q.name))return he[q.name];const te=new ke(q,Ee);return he[q.name]=te,te},app:qe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ve(Be){const ee=Be.name,q=ee.replace("-compat","");if(O._registerComponent(Be)&&"PUBLIC"===Be.type){const te=(ge=qe())=>{if("function"!=typeof ge[q])throw re.create("invalid-app-argument",{appName:ee});return ge[q]()};void 0!==Be.serviceProps&&(0,d.ZB)(te,Be.serviceProps),Ee[q]=te,ke.prototype[q]=function(...ge){return this._getService.bind(this,ee).apply(this,Be.multipleInstances?ge:[])}}return"PUBLIC"===Be.type?Ee[q]:null},removeApp:function Ye(Be){delete he[Be]},useAsService:function $e(Be,ee){return"serverAuth"===ee?null:ee},modularAPIs:O}};function qe(Be){if(!(0,d.r3)(he,Be=Be||O._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:Be});return he[Be]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function ye(){return Object.keys(he).map(Be=>he[Be])}}),qe.App=ke,Ee}(J);return ke.INTERNAL=Object.assign(Object.assign({},ke.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function he(Ee){(0,d.ZB)(ke,Ee)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),ke}(),j=new oe.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ke=self.firebase.SDK_VERSION;ke&&ke.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=B;!function Ae(ke){(0,O.registerVersion)("@firebase/app-compat","0.1.21",ke)}()},9681:(rt,De,k)=>{k.r(De),k.d(De,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Ar,_DEFAULT_ENTRY_NAME:()=>Dn,_addComponent:()=>on,_addOrOverwriteComponent:()=>mi,_apps:()=>ht,_clearComponents:()=>Lt,_components:()=>sn,_getProvider:()=>Wi,_registerComponent:()=>Xt,_removeServiceInstance:()=>zt,deleteApp:()=>Yi,getApp:()=>Sr,getApps:()=>Ki,initializeApp:()=>Oi,onLog:()=>Yn,registerVersion:()=>Ur,setLogLevel:()=>jn});var d=k(5861),K=k(4859),O=k(1877),oe=k(2090);class J{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(We=>{if(function pe(Ze){const Ce=Ze.getComponent();return"VERSION"===(null==Ce?void 0:Ce.type)}(We)){const at=We.getImmediate();return`${at.library}/${at.version}`}return null}).filter(We=>We).join(" ")}}const re="@firebase/app",ue=new O.Yd("@firebase/app"),Dn="[DEFAULT]",it={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ht=new Map,sn=new Map;function on(Ze,Ce){try{Ze.container.addComponent(Ce)}catch(We){ue.debug(`Component ${Ce.name} failed to register with FirebaseApp ${Ze.name}`,We)}}function mi(Ze,Ce){Ze.container.addOrOverwriteComponent(Ce)}function Xt(Ze){const Ce=Ze.name;if(sn.has(Ce))return ue.debug(`There were multiple attempts to register component ${Ce}.`),!1;sn.set(Ce,Ze);for(const We of ht.values())on(We,Ze);return!0}function Wi(Ze,Ce){const We=Ze.container.getProvider("heartbeat").getImmediate({optional:!0});return We&&We.triggerHeartbeat(),Ze.container.getProvider(Ce)}function zt(Ze,Ce,We=Dn){Wi(Ze,Ce).clearInstance(We)}function Lt(){sn.clear()}const Xr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Es{constructor(Ce,We,at){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},We),this._name=We.name,this._automaticDataCollectionEnabled=We.automaticDataCollectionEnabled,this._container=at,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}const Ar="9.6.10";function Oi(Ze,Ce={}){"object"!=typeof Ce&&(Ce={name:Ce});const We=Object.assign({name:Dn,automaticDataCollectionEnabled:!1},Ce),at=We.name;if("string"!=typeof at||!at)throw Xr.create("bad-app-name",{appName:String(at)});const Pt=ht.get(at);if(Pt){if((0,oe.vZ)(Ze,Pt.options)&&(0,oe.vZ)(We,Pt.config))return Pt;throw Xr.create("duplicate-app",{appName:at})}const Mt=new K.H0(at);for(const L of sn.values())Mt.addComponent(L);const U=new Es(Ze,We,Mt);return ht.set(at,U),U}function Sr(Ze=Dn){const Ce=ht.get(Ze);if(!Ce)throw Xr.create("no-app",{appName:Ze});return Ce}function Ki(){return Array.from(ht.values())}function Yi(Ze){return st.apply(this,arguments)}function st(){return(st=(0,d.Z)(function*(Ze){const Ce=Ze.name;ht.has(Ce)&&(ht.delete(Ce),yield Promise.all(Ze.container.getProviders().map(We=>We.delete())),Ze.isDeleted=!0)})).apply(this,arguments)}function Ur(Ze,Ce,We){var at;let Pt=null!==(at=it[Ze])&&void 0!==at?at:Ze;We&&(Pt+=`-${We}`);const Mt=Pt.match(/\s|\//),U=Ce.match(/\s|\//);if(Mt||U){const L=[`Unable to register library "${Pt}" with version "${Ce}":`];return Mt&&L.push(`library name "${Pt}" contains illegal characters (whitespace or "/")`),Mt&&U&&L.push("and"),U&&L.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void ue.warn(L.join(" "))}Xt(new K.wA(`${Pt}-version`,()=>({library:Pt,version:Ce}),"VERSION"))}function Yn(Ze,Ce){if(null!==Ze&&"function"!=typeof Ze)throw Xr.create("invalid-log-argument");(0,O.Am)(Ze,Ce)}function jn(Ze){(0,O.Ub)(Ze)}const dn="firebase-heartbeat-store";let Qn=null;function ws(){return Qn||(Qn=(0,oe.X3)("firebase-heartbeat-database",1,(Ze,Ce)=>{0===Ce&&Ze.createObjectStore(dn)}).catch(Ze=>{throw Xr.create("storage-open",{originalErrorMessage:Ze.message})})),Qn}function Vt(){return(Vt=(0,d.Z)(function*(Ze){try{return(yield ws()).transaction(dn).objectStore(dn).get(rr(Ze))}catch(Ce){throw Xr.create("storage-get",{originalErrorMessage:Ce.message})}})).apply(this,arguments)}function et(Ze,Ce){return mt.apply(this,arguments)}function mt(){return(mt=(0,d.Z)(function*(Ze,Ce){try{const at=(yield ws()).transaction(dn,"readwrite");return yield at.objectStore(dn).put(Ce,rr(Ze)),at.complete}catch(We){throw Xr.create("storage-set",{originalErrorMessage:We.message})}})).apply(this,arguments)}function rr(Ze){return`${Ze.name}!${Ze.options.appId}`}class eo{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const We=this.container.getProvider("app").getImmediate();this._storage=new ot(We),this._heartbeatsCachePromise=this._storage.read().then(at=>(this._heartbeatsCache=at,at))}triggerHeartbeat(){var Ce=this;return(0,d.Z)(function*(){const at=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Pt=fr();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==Pt&&!Ce._heartbeatsCache.heartbeats.some(Mt=>Mt.date===Pt))return Ce._heartbeatsCache.heartbeats.push({date:Pt,agent:at}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(Mt=>{const U=new Date(Mt.date).valueOf();return Date.now()-U<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,d.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const We=fr(),{heartbeatsToSend:at,unsentEntries:Pt}=function ir(Ze,Ce=1024){const We=[];let at=Ze.slice();for(const Pt of Ze){const Mt=We.find(U=>U.agent===Pt.agent);if(Mt){if(Mt.dates.push(Pt.date),pr(We)>Ce){Mt.dates.pop();break}}else if(We.push({agent:Pt.agent,dates:[Pt.date]}),pr(We)>Ce){We.pop();break}at=at.slice(1)}return{heartbeatsToSend:We,unsentEntries:at}}(Ce._heartbeatsCache.heartbeats),Mt=(0,oe.L)(JSON.stringify({version:2,heartbeats:at}));return Ce._heartbeatsCache.lastSentHeartbeatDate=We,Pt.length>0?(Ce._heartbeatsCache.heartbeats=Pt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),Mt})()}}function fr(){return(new Date).toISOString().substring(0,10)}class ot{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,d.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function da(Ze){return Vt.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var We=this;return(0,d.Z)(function*(){var at;if(yield We._canUseIndexedDBPromise){const Mt=yield We.read();return et(We.app,{lastSentHeartbeatDate:null!==(at=Ce.lastSentHeartbeatDate)&&void 0!==at?at:Mt.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var We=this;return(0,d.Z)(function*(){var at;if(yield We._canUseIndexedDBPromise){const Mt=yield We.read();return et(We.app,{lastSentHeartbeatDate:null!==(at=Ce.lastSentHeartbeatDate)&&void 0!==at?at:Mt.lastSentHeartbeatDate,heartbeats:[...Mt.heartbeats,...Ce.heartbeats]})}})()}}function pr(Ze){return(0,oe.L)(JSON.stringify({version:2,heartbeats:Ze})).length}!function Nt(Ze){Xt(new K.wA("platform-logger",Ce=>new J(Ce),"PRIVATE")),Xt(new K.wA("heartbeat",Ce=>new eo(Ce),"PRIVATE")),Ur(re,"0.7.20",Ze),Ur(re,"0.7.20","esm2017"),Ur("fire-js","")}("")},4859:(rt,De,k)=>{k.d(De,{H0:()=>ce,wA:()=>O});var d=k(5861),K=k(2090);class O{constructor(B,j,Q){this.name=B,this.instanceFactory=j,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const oe="[DEFAULT]";class J{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const Q=new K.BH;if(this.instancesDeferred.set(j,Q),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:j});Ge&&Q.resolve(Ge)}catch(Ge){}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const Q=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),Ge=null!==(j=null==B?void 0:B.optional)&&void 0!==j&&j;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Ae){if(Ge)return null;throw Ae}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function re(ue){return"EAGER"===ue.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(j){}for(const[j,Q]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(j);try{const Ae=this.getOrInitializeService({instanceIdentifier:Ge});Q.resolve(Ae)}catch(Ae){}}}}clearInstance(B=oe){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,d.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...j.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=oe){return this.instances.has(B)}getOptions(B=oe){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,Q=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:Q,options:j});for(const[Ae,Ne]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Ae)&&Ne.resolve(Ge);return Ge}onInit(B,j){var Q;const Ge=this.normalizeInstanceIdentifier(j),Ae=null!==(Q=this.onInitCallbacks.get(Ge))&&void 0!==Q?Q:new Set;Ae.add(B),this.onInitCallbacks.set(Ge,Ae);const Ne=this.instances.get(Ge);return Ne&&B(Ne,Ge),()=>{Ae.delete(B)}}invokeOnInitCallbacks(B,j){const Q=this.onInitCallbacks.get(j);if(Q)for(const Ge of Q)try{Ge(B,j)}catch(Ae){}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let Q=this.instances.get(B);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=B,ue===oe?void 0:ue),options:j}),this.instances.set(B,Q),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(Q,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Q)}catch(Ge){}var ue;return Q||null}normalizeInstanceIdentifier(B=oe){return this.component?this.component.multipleInstances?B:oe:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new J(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(rt,De,k)=>{k.d(De,{Am:()=>ue,Ub:()=>ce,Yd:()=>re,in:()=>K});const d=[];var K=(()=>{return(B=K||(K={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",K;var B})();const O={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},oe=K.INFO,J={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},pe=(B,j,...Q)=>{if(j<B.logLevel)return;const Ge=(new Date).toISOString(),Ae=J[j];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Ae](`[${Ge}]  ${B.name}:`,...Q)};class re{constructor(j){this.name=j,this._logLevel=oe,this._logHandler=pe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in K))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...j),this._logHandler(this,K.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...j),this._logHandler(this,K.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,K.INFO,...j),this._logHandler(this,K.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,K.WARN,...j),this._logHandler(this,K.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...j),this._logHandler(this,K.ERROR,...j)}}function ce(B){d.forEach(j=>{j.setLogLevel(B)})}function ue(B,j){for(const Q of d){let Ge=null;j&&j.level&&(Ge=O[j.level]),Q.userLogHandler=null===B?null:(Ae,Ne,...ke)=>{const he=ke.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch(Ye){return null}}).filter(Ee=>Ee).join(" ");Ne>=(null!=Ge?Ge:Ae.logLevel)&&B({level:K[Ne].toLowerCase(),message:he,args:ke,type:Ae.name})}}}},5861:(rt,De,k)=>{function d(O,oe,J,pe,re,ce,ue){try{var B=O[ce](ue),j=B.value}catch(Q){return void J(Q)}B.done?oe(j):Promise.resolve(j).then(pe,re)}function K(O){return function(){var oe=this,J=arguments;return new Promise(function(pe,re){var ce=O.apply(oe,J);function ue(j){d(ce,pe,re,ue,B,"next",j)}function B(j){d(ce,pe,re,ue,B,"throw",j)}ue(void 0)})}}k.d(De,{Z:()=>K})}},rt=>{rt(rt.s=5116)}]);